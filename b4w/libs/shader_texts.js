b4w.module["shader_texts"] = function(exports, require) {exports["anchors.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["void","main","(",")","{","gl_FragColor","=","vec4","(","1.0",")",";","}"]}]},exports["anchors.glslv"] = {type:"group",parts:[{type:"var",name:"ANCHOR_NUM",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_index",";","uniform","vec3","u_position","[","ANCHOR_NUM","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec4","a",";","a","=","u_view_matrix","*","vec4","(","u_position","[","int","(","a_index",")","]",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","a",";","gl_PointSize","=","4.0",";","}"]}]},exports["color_id.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec3","u_color_id",";","uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_outline_intensity",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","b",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["b","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["b","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","b","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_OUTLINE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","u_outline_intensity",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","u_color_id",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["color_id.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","attribute","vec3","a_normal",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","mat4","ck",";","vec3","cl",",","cm",",","cn",",","co",";","cl","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["cl","=","mix","(","cl",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["cm","=","vec3","(","0.0",")",";","cn","=","vec3","(","0.0",")",";","co","=","vec3","(","0.0",")",";","bv","(","cl",",","cm",",","cn",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["cm","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cm","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["cn","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["ck","=","ao","(","u_camera_eye",",","cn",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ck","=","ai","(","u_camera_eye",",","cn",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","(","u_model_matrix","*","vec4","(","cm",",","1.0",")",")",".","xyz",";","ck","=","ck","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","co",")",";"]}]}}]},{type:"textline",tokens:["d","cp","=","av","(","cl","-","cm",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ck",")",";","cp",".","b","=","cn",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","cp","=","av","(","cl",",","cm",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["co","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["co","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cj","(","cp",".","a",",","cp",".","b",",","co",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","cp",".","a",",","1.0",")",";","}"]}]},exports["depth.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";"]}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"procedural.glslf"},{type:"include",file:"shadow.glslf"}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","e_",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["e_","=","(","texture2D","(","u_sampler",",","a",")",")",".","a",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["e_","=","u_diffuse_color",".","a",";"]}]}}]},{type:"textline",tokens:["if","(","e_","<","0.5",")","discard",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","cq","(","cD",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",";"]}]}}]}]}},{type:"elif",expression:["SHADOW_DST","==","SHADOW_DST_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","eU","(","cJ",".","z",")",",","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["depth.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","MAIN_BEND_COL","&&","DETAIL_BEND","||","SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_shadow_cast_billboard_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","cD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","fT",";","vec2","fU",";","vec4","fV",",","fW",";","mat4","fX",",","fY",";","vec3","fZ",",","f_",",","ga",",","gb",";","fZ","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["fZ","=","mix","(","fZ",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["f_","=","vec3","(","0.0",")",";","ga","=","vec3","(","0.0",")",";","gb","=","vec3","(","0.0",")",";","bv","(","fZ",",","f_",",","ga",",","gb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["f_","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["f_","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","gc","=","fE","(","fZ",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","f_",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["ga","=","(","u_model_matrix","*","vec4","(","f_",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","HAIR_BILLBOARD","&&","SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["fX","=","u_shadow_cast_billboard_view_matrix",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fX","=","u_view_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["fY","=","ao","(","u_camera_eye",",","ga",",","fX",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fY","=","ai","(","u_camera_eye",",","ga",",","fX",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["gb","=","(","u_model_matrix","*","vec4","(","f_",",","1.0",")",")",".","xyz",";","fY","=","fY","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","gb",")",";"]}]}}]},{type:"textline",tokens:["d","gc","=","av","(","fZ","-","f_",",","f_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","fY",")",";","gc",".","b","=","ga",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","gc","=","av","(","fZ",",","f_",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL","&&","DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["gb","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gb","=","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["cj","(","gc",".","a",",","gc",".","b",",","gb",")",";"]}]}}]},{type:"textline",tokens:["fV","=","u_view_matrix","*","vec4","(","gc",".","a",",","1.0",")",";","fW","=","u_proj_matrix","*","fV",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["fW",".","xy","+=","u_subpixel_jitter","*","fW",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","gc",".","a",")",";","cJ","=","fV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_DST","==","SHADOW_DST_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["cD","=","-","fV",".","z","/","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_NONE","&&","SHADOW_DST","==","SHADOW_DST_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["fU","=","(","u_proj_matrix","*","u_view_matrix","[","3","]",")",".","xy",";","fT","=","SHADOW_TEX_RES","/","2.0",";","fU","=","floor","(","fU","*","fT","+","0.5",")","/","fT","-","fU",";","fW",".","xy","+=","fU",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","fW",";","}"]}]},exports["grass_map.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","fT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","fT",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","fT",",","vec3","(","1.0",")",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","fT",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}"]}]},exports["grass_map.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_grass_size",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_grass_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","float","u_time",";","uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","fT",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","float","fT",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","fT",";"]}]}}]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","fU",";","mat4","fV",";","vec3","fW",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fW","=","(","u_model_matrix","*","vec4","(","vec3","(","0.0",")",",","1.0",")",")",".","xyz",";","fV","=","ai","(","u_camera_eye",",","fW",",","u_view_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["fV","=","fV","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["d","fX","=","av","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","fV",")",";","fX",".","b","=","fW",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","fX","=","av","(","a_position",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]},{type:"textline",tokens:["fU","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","fX",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_SIZE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fT","=","vec4","(","a_grass_size",",","a_grass_color",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["fT","=","a_grass_size",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["fT","=","a_grass_color",";"]}]}}]}]}}]},{type:"textline",tokens:["gl_Position","=","fU",";","}"]}]},exports["halo.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LINES",tokens:["0"]},{type:"var",name:"NUM_RINGS",tokens:["0"]},{type:"var",name:"NUM_STARS",tokens:["0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec3","u_halo_rings_color",";","uniform","vec3","u_halo_lines_color",";","uniform","float","u_halo_hardness",";","uniform","float","u_halo_size",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_halo_stars_blend",";","uniform","float","u_halo_stars_height",";","uniform","float","u_cam_water_depth",";","varying","vec4","ga",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","float","gb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS",">","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["const","int","gc","=","NUM_RINGS",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","int","gc","=","NUM_LINES",";"]}]}}]},{type:"textline",tokens:["float","ge","(","float","gd",")","{","return","gd","-","floor","(","gd","*","(","1.0","/","0.01",")",")","*","0.01",";","}"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["void","gn","(","inout","float","gf",",","in","float","gg","[","gc","]",",","in","float","gh",")","{","float","gi",",","gj",",","gk",",","gl",";","for","(","int","gm","=","0",";","gm","<","NUM_RINGS",";","gm","++",")","{","gi","=","40.0","*","gg","[","gm","]",";","gj","=","300.0","*","(","ge","(","gi",")","-","0.005",")",";","gk","=","gi",";","gl","=","abs","(","gk","*","(","u_halo_size","*","gj","-","gh",")",")",";","gf","+=","1.0","-","min","(","gl",",","1.0",")",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["void","gw","(","inout","float","go",",","in","float","gp","[","gc","]",",","in","float","gq",")","{","float","gr",",","gs",",","gt",",","gu",";","for","(","int","gv","=","0",";","gv","<","NUM_LINES",";","gv","++",")","{","gr","=","gp","[","gv","]",";","gs","=","gr",";","gt","=","1000.0","*","(","ge","(","gr",")","-","0.005",")",";","gu","=","20.0","*","abs","(","gs","*","a",".","x","+","gt","*","a",".","y",")",";","go","+=","1.0","-","min","(","gu",",","1.0",")",";","}","go","*=","gq",";","}"]}]}}]},{type:"textline",tokens:["void","gD","(","inout","float","gx",",","in","vec2","gy",")","{","float","gz",",","gA",",","gB",",","gC",";","gA","=","atan","(","gy",".","y",",","gy",".","x",")",";","gA","*=","(","1.0","+","0.25","*","float","(","NUM_STARS",")",")",";","gB","=","cos","(","gA",")",";","gC","=","sin","(","gA",")",";","gA","=","(","gB","*","gy",".","x","+","gC","*","gy",".","y",")","*","(","gB","*","gy",".","y","-","gC","*","gy",".","x",")",";","gz","=","abs","(","gA",")",";","if","(","gz","<","1.0",")","{","gz","=","(","0.01","*","u_halo_size",")","/","(","gz",")",";","gx","*=","sqrt","(","min","(","gz",",","1.0",")",")",";","}","}","void","main","(",")","{","vec3","gE",";","float","gF",",","gG",",","gH",",","gI",";","gF","=","(","a",".","x","*","a",".","x","+","a",".","y","*","a",".","y",")",";","gG","=","sqrt","(","gF",")",";","gF","=","max","(","1.0","-","gF",",","0.0",")",";","gF","=","pow","(","gF",",","u_halo_hardness",")",";","gH","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS","||","NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["float","gJ","[","gc","]",";","for","(","int","gK","=","0",";","gK","<","gc",";","gK","++",")","{","gJ","[","gK","]","=","fract","(","gb","/","(","float","(","gK",")","+","0.01",")",")","-","1.0",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["gI","=","0.0",";","gn","(","gI",",","gJ",",","gG",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["gG","=","0.0",";","gw","(","gG",",","gJ",",","gF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gD","(","gF",",","a",")",";"]}]}}]},{type:"textline",tokens:["gF","*=","gH",";","gE","=","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_RINGS"],group:{type:"group",parts:[{type:"textline",tokens:["gI","*=","gF",";","gE","+=","u_halo_rings_color","*","gI",";","gF","+=","gI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_LINES"],group:{type:"group",parts:[{type:"textline",tokens:["gG","*=","gH",";","gE","+=","u_halo_lines_color","*","gG",";","gF","+=","gG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gF","*=","max","(","1.0","-","2.0","*","u_sun_intensity",".","x",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gI","=","u_halo_stars_blend","*","(","ga",".","y","-","u_halo_stars_height",")",";","gF","*=","clamp","(","gI",",","0.0",",","1.0",")",";","gF","*=","min","(","u_cam_water_depth","+","2.0","*","WAVES_HEIGHT",",","1.0",")",";"]}]}}]}]}}]},{type:"textline",tokens:["fX","(","gE",")",";","f_","(","gE",",","gF",")",";","gl_FragColor","=","vec4","(","gE",",","gF",")",";","}"]}]},exports["halo.glslv"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec2","a_halo_bb_vertex",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","PRECISION","float","u_halo_size",";","varying","vec2","a",";","varying","float","gb",";"]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","ga",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","gc",",","gd",";","mat4","ge",",","gf",";","vec3","gg",";","gg","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","a","=","a_halo_bb_vertex","*","2.0",";","gb","=","fract","(","gg",".","x","+","gg",".","y","+","gg",".","z",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["ge","=","N","(","gg",",","u_view_matrix",")",";","gf","=","u_view_matrix",";","gf","[","3","]","[","0","]","=","0.0",";","gf","[","3","]","[","1","]","=","0.0",";","gf","[","3","]","[","2","]","=","0.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ge","=","N","(","gg",",","u_view_matrix",")",";"]}]}}]},{type:"textline",tokens:["gc","=","vec4","(","a_halo_bb_vertex","*","2.0","*","u_halo_size",",","0.0",",","1.0",")",";","gc","=","ge","*","gc",";"]},{type:"condition",parts:[{type:"if",expression:["SKY_STARS"],group:{type:"group",parts:[{type:"textline",tokens:["gd","=","u_proj_matrix","*","gf","*","gc",";","gd",".","z","=","0.99999","*","gd",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ga","=","gc",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gd","=","u_proj_matrix","*","u_view_matrix","*","gc",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","gd",";","}"]}]},exports["line.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","void","main","(",")","{","gl_FragColor","=","u_diffuse_color",";","}"]}]},exports["line.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_POINTS",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_point",";","uniform","vec3","u_line_points","[","NUM_POINTS","]",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","void","main","(",")","{","vec3","gc",";","gc","=","u_line_points","[","int","(","a_point",")","]",";","gl_Position","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","gc",",","1.0",")",";","}"]}]},exports["main.glslf"] = {type:"group",parts:[{type:"var",name:"PARALLAX_STEPS",tokens:["0.0"]},{type:"var",name:"PARALLAX_LOD_DIST",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC","&&","!","ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_specmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_colormap1",";","uniform","sampler2D","u_stencil0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";","uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";","uniform","float","u_alpha_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_specular_color_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_parallax_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";","varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"include",file:"shadow.glslf"}]}}]},{type:"include",file:"mirror.glslf"},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec4","kq",",","kr",",","ks",",","kt",";","mat3","ku",";","vec3","kv",",","kw",",","kx",",","ky",",","kz",",","kA",",","kB",",","kC",";","vec2","kD",",","kE",",","kF",",","kG",";","float","kH",",","kI",",","kJ",",","kK",",","kL",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kH","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kD","=","a",";"]}]}}]},{type:"textline",tokens:["kv","=","jD",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","kv","=","kv",";","else","kv","=","-","kv",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","cross","(","kv",",","jE",".","xyz",")","*","jE",".","w",";","ku","=","mat3","(","jE",".","xyz",",","kw",",","kv",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["kI","=","length","(","cJ",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kE","=","normalize","(","u_view_matrix_frag","*","vec4","(","jD",",","0.0",")",")",".","st",";","kE","=","kE","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","&&","PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","kI","<","PARALLAX_LOD_DIST",")","{","kJ","=","clamp","(","0.5","*","(","PARALLAX_LOD_DIST","-","kI",")",",","0.0",",","1.0",")",";","kJ","=","u_parallax_scale","*","kJ",";","kw","=","normalize","(","jB","*","ku",")",";","kK","=","1.0","/","PARALLAX_STEPS",";","kF","=","kw",".","xy","*","kJ","/","(","PARALLAX_STEPS","*","kw",".","z",")",";","kJ","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kG","=","kE",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kG","=","kD",";"]}]}}]},{type:"textline",tokens:["kL","=","texture2D","(","u_normalmap0",",","kG",")",".","a",";","for","(","float","kM","=","1.0",";","kM","<=","PARALLAX_STEPS",";","kM","++",")","{","if","(","kL","<","kJ",")","{","kJ","-=","kK",";","kG","-=","kF",";","kL","=","texture2D","(","u_normalmap0",",","kG",")",".","a",";","}","}","kF","=","kG","+","kF",";","kK","=","texture2D","(","u_normalmap0",",","kF",")",".","a","-","(","kJ","+","kK",")",";","kL","=","kL","-","kJ",";","kJ","=","kL","/","(","kL","-","kK",")",";","kG","=","kJ","*","kF","+","(","1.0","-","kJ",")","*","kG",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kD","+=","kG","-","kE",";"]}]}}]},{type:"textline",tokens:["kE","=","kG",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kE","+=","kG","-","kD",";"]}]}}]},{type:"textline",tokens:["kD","=","kG",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_normalmap0",",","kE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kq","=","texture2D","(","u_normalmap0",",","kD",")",";"]}]}}]},{type:"textline",tokens:["kw","=","kq",".","rgb","-","0.5",";","kw","=","mix","(","vec3","(","0.0",",","0.0",",","1.0",")",",","kw",",","u_normal_factor",")",";","kw","=","ku","*","kw",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kw","=","kv",";"]}]}}]},{type:"textline",tokens:["kw","=","normalize","(","kw",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORMAL_TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["kE","=","normalize","(","u_view_matrix_frag","*","vec4","(","kw",",","0.0",")",")",".","st",";","kE","=","kE","*","vec2","(","0.495",")","+","vec2","(","0.5",")",";"]}]}}]},{type:"textline",tokens:["kv","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kx","=","jF",";","fV","(","kx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","vec4","(","kx",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kq","=","u_diffuse_color",";"]}]}}]},{type:"textline",tokens:["kL","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","texture2D","(","u_colormap0",",","kE",")",";"]}]}},{type:"elif",expression:["TEXTURE_COLOR0_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","texture2D","(","u_colormap0",",","kD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR0_CO"],group:{type:"group",parts:[{type:"textline",tokens:["fV","(","kr",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR1_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","texture2D","(","u_colormap1",",","kE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ks","=","texture2D","(","u_colormap1",",","kD",")",";"]}]}}]},{type:"textline",tokens:["fV","(","ks",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_STENCIL_ALPHA_MASK_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_stencil0",",","kE",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kt","=","texture2D","(","u_stencil0",",","kD",")",";"]}]}}]},{type:"textline",tokens:["kr","=","mix","(","kr",",","ks",",","kt",".","r",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["kq",".","rgb","=","mix","(","kq",".","rgb",",","kr",".","rgb",",","u_diffuse_color_factor",")",";","kK","=","u_alpha_factor","*","kr",".","a",";","kK","+=","(","1.0","-","step","(","0.0",",","kK",")",")",";","kq",".","a","=","mix","(","kK",",","1.0",",","u_diffuse_color",".","a",")",";","kL","=","kr",".","a",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["kq",".","rgb","*=","mix","(","vec3","(","1.0",")",",","kr",".","rgb",",","u_diffuse_color_factor",")",";","kq",".","a","=","kr",".","a",";","kL","=","kr",".","a",";"]}]}}]}]}}]},{type:"textline",tokens:["kx","=","u_diffuse_intensity","*","kq",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","kx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","0.5","*","kw",".","y","+","0.5",";","kz","=","u_environment_energy","*","kp","(","kJ",",","kw",")",";","kz","=","u_ambient","*","kz",";","kK","=","eZ","(","kx",")",";","kA","=","u_emit","*","kq",".","rgb",";","kB","=","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_SPEC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_AS_SPEC"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","vec3","(","kL",")",";"]}]}},{type:"elif",expression:["TEXTURE_SPEC_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","texture2D","(","u_specmap0",",","kE",")",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kC","=","texture2D","(","u_specmap0",",","kD",")",".","rgb",";"]}]}}]},{type:"textline",tokens:["fV","(","kC",".","rgb",")",";","kB","=","mix","(","kB",",","kC",",","u_specular_color_factor",")",";"]}]}}]},{type:"textline",tokens:["kJ","=","u_specular_params","[","0","]",";","kF","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","kC","=","kJ","*","kB",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","kN","=","jh","(","kA",",","kz",",","kx",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","kN","=","jc","(","kA",",","kz",",","kx",",","kC",",","jC",",","kw",",","kv",",","kF",",","u_diffuse_params",",","kK",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["ky","=","kN",".","a",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["kL","=","u_reflect_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kL","=","0.0",";"]}]}}]},{type:"textline",tokens:["jZ","(","ky",",","kv",",","kw",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","kL",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ky","+=","kN",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","max","(","ky","-","sqrt","(","0.01","*","-","min","(","kH",",","0.0",")",")",",","0.5","*","ky",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["jA","(","ky",",","kH",",","u_time",",","kK",",","kw",",","u_sun_direction",",","u_sun_intensity",",","u_sun_quaternion",",","jC",",","kI",")",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","kq",".","a",";","if","(","kJ","<=","0.5",")","discard",";","kJ","=","1.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","kq",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kJ","+=","kN",".","a",".","a","*","kC",".","r","*","u_specular_alpha",";"]}]}}]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kJ","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","mix","(","km","(","cI",",","kw",".","xz","*","u_refr_bump",")",",","ky",",","kJ",")",";","kJ","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["kL","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","gm","(","u_cube_fog",",","kv",")",";","ks","=","vec4","(","kB",",","u_fog_color_density",".","a",")",";","fV","(","ks",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ks","=","u_fog_color_density",";","ks",".","rgb","*=","kL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["gC","(","ky",",","kI",",","kv",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","ks",",","kH",",","kL",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","ky",",","kI",",","ks",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK","&&","!","SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","vec3","(","dC",".","a",")",";"]}]}}]},{type:"textline",tokens:["fX","(","ky",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","ky",",","kJ",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","ky",",","kJ",")",";","}"]}]},exports["main.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";","attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_texture_scale",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";","varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_COLOR","||","DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"include",file:"dynamic_grass.glslv"},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"textline",tokens:["void","main","(",")","{","vec4","kq",",","kr",";","float","ks",",","kt",",","ku",";","mat4","kv",";","vec3","kw",",","kx",",","ky",",","kz",",","kA",",","kB",",","kC",";","kw","=","a_position",";","kx","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_UV_ORCO"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","vec3","(","a_tangent",")",";","kz","=","a_tangent","[","3","]","*","cross","(","kx",",","ky",")",";"]}]}},{type:"elif",expression:["TEXTURE_NORM_CO","==","TEXTURE_COORDS_NORMAL"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","kB","=","normalize","(","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",")",";","kA","=","kA","-","u_camera_eye",";","kz","=","cross","(","kA",",","kB",")",";","ky","=","cross","(","kB",",","kz",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ky","=","vec3","(","0.0",")",";","kz","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","mix","(","kw",",","a_position_next",",","u_va_frame_factor",")",";","kx","=","mix","(","kx",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","vec3","(","a_tangent",")",";","kB","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","kA",")",";","ky","=","mix","(","ky",",","kA",",","u_va_frame_factor",")",";","kz","=","mix","(","kz",",","kB",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bv","(","kw",",","ky",",","kz",",","kx",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kA","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","kD","=","fE","(","kw",",","ky",",","kz",",","kx",",","kA",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kB","=","(","u_model_matrix","*","vec4","(","kA",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","ao","(","u_camera_eye",",","kB",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kv","=","ai","(","u_camera_eye",",","kB",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["kC","=","(","u_model_matrix","*","vec4","(","kA",",","1.0",")",")",".","xyz",";","kv","=","kv","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kC",")",";"]}]}}]},{type:"textline",tokens:["d","kD","=","av","(","kw","-","kA",",","kA",",","ky",",","kz",",","kx",",","kv",")",";","kD",".","b","=","kB",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","kD","=","av","(","kw",",","kA",",","ky",",","kz",",","kx",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_NORM_CO"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","(","dot","(","cross","(","kD",".","e",",","kD",".","c",")",",","kD",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jE","=","vec4","(","kD",".","c",",","ks",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","kD",".","a",",","kD",".","b",",","kx",")",";"]}]}}]},{type:"textline",tokens:["jC","=","kD",".","a",";","jD","=","kD",".","e",";","jB","=","u_camera_eye","-","kD",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["TEXCOORD"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","ay","(","a_texcoord",",","u_texture_scale",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","kD",".","f",";"]}]}},{type:"elif",expression:["VERTEX_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["jF","=","a_color",";"]}]}}]},{type:"textline",tokens:["kq","=","u_view_matrix","*","vec4","(","kD",".","a",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","||","(","TEXTURE_NORM_CO","&&","PARALLAX",")","||","(","WATER_EFFECTS","&&","CAUSTICS",")"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","kq",";"]}]}}]},{type:"textline",tokens:["kr","=","u_proj_matrix","*","kq",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kr",".","xy","+=","u_subpixel_jitter","*","kr",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","kr",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","kD",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","kr",".","x",";","kt","=","kr",".","y",";","ku","=","kr",".","w",";","cI",".","x","=","(","ks","+","ku",")","/","2.0",";","cI",".","y","=","(","kt","+","ku",")","/","2.0",";","cI",".","z","=","ku",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","kq",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kr",";","}"]}]},exports["nodes.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"NUM_LAMP_LIGHTS",tokens:["0"]},{type:"var",name:"NUM_VALUES",tokens:["0"]},{type:"var",name:"NUM_RGBS",tokens:["0"]},{type:"var",name:"MAPPING_TRS_MATRIX",tokens:["mat4","(","0.0",")"]},{type:"var",name:"MAPPING_SCALE",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_TRANSLATION",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MIN_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_MAX_CLIP",tokens:["vec3","(","0.0",")"]},{type:"var",name:"MAPPING_IS_NORMAL",tokens:["0.0"]},{type:"var",name:"RGB_IND",tokens:["0"]},{type:"var",name:"VALUE_IND",tokens:["0"]},{type:"var",name:"LAMP_INDEX",tokens:["0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"procedural.glslf"},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"include",file:"caustics.glslf"}]}}]},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_sun_quaternion",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";","uniform","float","u_cam_water_depth",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_sun_direction",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_VECTOR_VIEW","||","REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_view_matrix_frag",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";","uniform","vec4","u_refl_plane",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_mask",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_pcf_blur_radii",";","uniform","vec4","u_csm_center_dists",";","uniform","sampler2D","u_shadow_map0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shadow_map3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{type:"textline",tokens:["uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","float","u_specular_alpha",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_LAMP"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_lamp_light_positions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_directions","[","NUM_LAMP_LIGHTS","]",";","uniform","vec3","u_lamp_light_color_intensities","[","NUM_LAMP_LIGHTS","]",";","uniform","vec4","u_lamp_light_factors","[","NUM_LAMP_LIGHTS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_VALUE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_node_values","[","NUM_VALUES","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_RGB"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_node_rgbs","[","NUM_RGBS","]",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jC",";","varying","vec4","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"textline",tokens:["float","ZERO_VALUE_NODES","=","0.0",";","float","UNITY_VALUE_NODES","=","1.0",";","vec3","kq","=","vec3","(","ZERO_VALUE_NODES",")",";","vec3","kr","=","vec3","(","UNITY_VALUE_NODES",")",";"]},{type:"include",file:"shadow.glslf"},{type:"include",file:"mirror.glslf"},{type:"include",file:"environment.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","kv","(","in","vec3","ks",",","in","float","kt",")","{","vec3","ku",";","ku","=","kq",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","km","(","cI",",","ks",".","xz","*","kt",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ku","=","texture2D","(","u_refractmap",",","cI",".","xy","/","cI",".","z",")",".","rgb",";","fV","(","ku",")",";"]}]}}]},{type:"textline",tokens:["return","ku",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_SEPHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kA","(","vec3","kw",")","{","float","kx",",","ky",";","vec4","kz",";","kz","=","vec4","(","ZERO_VALUE_NODES",",","-","UNITY_VALUE_NODES","/","3.0",",","2.0","/","3.0",",","-","UNITY_VALUE_NODES",")",";","kz","=","mix","(","vec4","(","kw",".","bg",",","kz",".","wz",")",",","vec4","(","kw",".","gb",",","kz",".","xy",")",",","step","(","kw",".","b",",","kw",".","g",")",")",";","kz","=","mix","(","vec4","(","kz",".","xyw",",","kw",".","r",")",",","vec4","(","kw",".","r",",","kz",".","yzx",")",",","step","(","kz",".","x",",","kw",".","r",")",")",";","kx","=","kz",".","x","-","min","(","kz",".","w",",","kz",".","y",")",";","ky","=","1.0e-10",";","return","vec3","(","abs","(","kz",".","z","+","(","kz",".","w","-","kz",".","y",")","/","(","6.0","*","kx","+","ky",")",")",",","kx","/","(","kz",".","x","+","ky",")",",","kz",".","x",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_HUE_SAT","||","USE_NODE_MIX_RGB_HUE","||","USE_NODE_MIX_RGB_SATURATION","||","USE_NODE_MIX_RGB_VALUE","||","USE_NODE_MIX_RGB_COLOR","||","USE_NODE_COMBHSV"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kE","(","vec3","kB",")","{","vec3","kC",";","vec4","kD",";","kD","=","vec4","(","UNITY_VALUE_NODES",",","2.0","/","3.0",",","UNITY_VALUE_NODES","/","3.0",",","3.0",")",";","kC","=","abs","(","fract","(","vec3","(","kB",".","r",",","kB",".","r",",","kB",".","r",")","+","kD",".","xyz",")","*","6.0","-","kD",".","www",")",";","return","kB",".","b","*","mix","(","kD",".","xxx",",","clamp","(","kC","-","kD",".","xxx",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","kB",".","g",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_GEOMETRY_UV","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kG","(","vec2","kF",")","{","return","vec3","(","kF","*","2.0","-","vec2","(","UNITY_VALUE_NODES",",","UNITY_VALUE_NODES",")",",","ZERO_VALUE_NODES",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_TEXTURE_COLOR","||","USE_NODE_TEXTURE_NORMAL","||","USE_NODE_B4W_PARALLAX"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","kI","(","vec3","kH",")","{","return","vec2","(","kH",".","xy","*","0.5","+","vec2","(","0.5",",","0.5",")",")",";","}"]}]}}]},{type:"node",name:"CAMERA",declarations:[{type:"node_out",name:"lI",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"lJ",qualifier:["float"],is_optional:true},{type:"node_out",name:"lK",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lI"],statements:[{type:"textline",tokens:["lI","=","normalize","(","kV",".","xyz",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lJ"],statements:[{type:"textline",tokens:["lJ","=","abs","(","kV",".","z",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_lK"],statements:[{type:"textline",tokens:["lK","=","length","(","kV",".","xyz",")",";"]}]}]}]},{type:"node",name:"COMBRGB",declarations:[{type:"node_in",name:"lL",qualifier:["float"],is_optional:false},{type:"node_in",name:"lM",qualifier:["float"],is_optional:false},{type:"node_in",name:"lN",qualifier:["float"],is_optional:false},{type:"node_out",name:"lO",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lO","=","vec3","(","lL",",","lM",",","lN",")",";"]}]},{type:"node",name:"COMBHSV",declarations:[{type:"node_in",name:"lP",qualifier:["float"],is_optional:false},{type:"node_in",name:"lQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"lR",qualifier:["float"],is_optional:false},{type:"node_out",name:"lS",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lS","=","kE","(","vec3","(","lP",",","lQ",",","lR",")",")",";"]}]},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_out",name:"lT",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"kJ",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lT","=","kG","(","kJ",")",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_out",name:"lU",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"kK",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["lU","=","kK",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_out",name:"lV",qualifier:["float"],is_optional:false},{type:"node_param",name:"kL",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["lV","=","kL",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_out",name:"lW",qualifier:["float"],is_optional:false},{type:"node_out",name:"lX",qualifier:["float"],is_optional:false},{type:"node_param",name:"kM",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["lW","=","kM","[","0","]",";","lX","=","kM","[","1","]",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_out",name:"lY",qualifier:["float"],is_optional:false},{type:"node_out",name:"lZ",qualifier:["float"],is_optional:false},{type:"node_out",name:"l_",qualifier:["float"],is_optional:false},{type:"node_param",name:"kN",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["lY","=","kN","[","0","]",";","lZ","=","kN","[","1","]",";","l_","=","kN","[","2","]",";"]}]},{type:"node",name:"GEOMETRY_NO",declarations:[{type:"node_out",name:"ma",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ma","=","lo",";"]}]},{type:"node",name:"GEOMETRY_FB",declarations:[{type:"node_out",name:"mb",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mb","=","(","gl_FrontFacing",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]}]},{type:"node",name:"GEOMETRY_VW",declarations:[{type:"node_out",name:"mc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mc","=","ln",";"]}]},{type:"node",name:"GEOMETRY_GL",declarations:[{type:"node_out",name:"md",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["md","=","vec3","(","lp",".","r",",","-","lp",".","b",",","lp",".","g",")",";"]}]},{type:"node",name:"HUE_SAT",declarations:[{type:"node_in",name:"me",qualifier:["float"],is_optional:false},{type:"node_in",name:"mf",qualifier:["float"],is_optional:false},{type:"node_in",name:"mg",qualifier:["float"],is_optional:false},{type:"node_in",name:"mh",qualifier:["float"],is_optional:false},{type:"node_in",name:"mi",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mj",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lt","=","kA","(","mi",")",";","lt","[","0","]","+=","(","me","-","0.5",")",";","if","(","lt","[","0","]",">","UNITY_VALUE_NODES",")","lt","[","0","]","-=","UNITY_VALUE_NODES",";","else","if","(","lt","[","0","]","<","ZERO_VALUE_NODES",")","lt","[","0","]","+=","UNITY_VALUE_NODES",";","lt","*=","vec3","(","UNITY_VALUE_NODES",",","mf",",","mg",")",";","lt","=","mix","(","kr",",","mix","(","kq",",","lt",",","step","(","kq",",","lt",")",")",",","step","(","lt",",","kr",")",")",";","mj","=","mix","(","mi",",","kE","(","lt",")",",","mh",")",";"]}]},{type:"node",name:"INVERT",declarations:[{type:"node_in",name:"mk",qualifier:["float"],is_optional:false},{type:"node_in",name:"ml",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mm",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mm","=","mix","(","ml",",","kr","-","ml",",","mk",")",";"]}]},{type:"node",name:"LAMP",declarations:[{type:"node_out",name:"mn",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"mo",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mp",qualifier:["float"],is_optional:false},{type:"node_out",name:"mq",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mn"],statements:[{type:"textline",tokens:["mn","=","u_lamp_light_color_intensities","[","LAMP_INDEX","]",";"]}]}]},{type:"textline",tokens:["kW","=","u_lamp_light_factors","[","LAMP_INDEX","]",";","lu","=","u_lamp_light_directions","[","LAMP_INDEX","]",";","lv","=","u_lamp_light_positions","[","LAMP_INDEX","]",";","ld","=","kW",".","z",";","if","(","ld","!=","-","UNITY_VALUE_NODES",")","{","mo","=","lv","-","jC",";","mp","=","length","(","mo",")",";","mo","=","normalize","(","mo",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mq"],statements:[{type:"textline",tokens:["mq","=","ld","/","(","ld","+","mp","*","mp",")",";","ld","=","kW",".","x",";","le","=","kW",".","y",";","if","(","ld",">","-","UNITY_VALUE_NODES",")","{","lf","=","dot","(","mo",",","lu",")",";","lf","*=","smoothstep","(","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",",","(","lf","-","ld",")","/","le",")",";","mq","*=","lf",";","}"]}]}]},{type:"textline",tokens:["}","else","{"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mo"],statements:[{type:"textline",tokens:["mo","=","lu",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mp"],statements:[{type:"textline",tokens:["mp","=","length","(","lv","-","jC",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mq"],statements:[{type:"textline",tokens:["mq","=","UNITY_VALUE_NODES",";"]}]}]},{type:"textline",tokens:["}"]}]},{type:"node",name:"NORMAL",declarations:[{type:"node_in",name:"mr",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ms",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"mt",qualifier:["float"],is_optional:true},{type:"node_param",name:"kO",qualifier:["vec3"]}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ms"],statements:[{type:"textline",tokens:["ms","=","kO",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_mt"],statements:[{type:"textline",tokens:["mt","=","-","dot","(","mr",",","kO",")",";"]}]}]}]},{type:"node",name:"B4W_VECTOR_VIEW",declarations:[{type:"node_in",name:"mu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mv",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mv","=","-","(","u_view_matrix_frag","*","vec4","(","mu",",","ZERO_VALUE_NODES",")",")",".","xyz",";"]}]},{type:"node",name:"MAPPING",declarations:[{type:"node_in",name:"mw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"mx",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["mx","=","mw",";"]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRS_MATRIX",statements:[{type:"textline",tokens:["mx","=","(","MAPPING_TRS_MATRIX","*","vec4","(","mx",",","UNITY_VALUE_NODES",")",")",".","xyz",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_SCALE",statements:[{type:"textline",tokens:["mx","=","mx","*","MAPPING_SCALE",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_TRANSLATION",statements:[{type:"textline",tokens:["mx","=","mx","+","MAPPING_TRANSLATION",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MIN_CLIP",statements:[{type:"textline",tokens:["mx","=","max","(","mx",",","MAPPING_MIN_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_ifdef",name:"MAPPING_MAX_CLIP",statements:[{type:"textline",tokens:["mx","=","min","(","mx",",","MAPPING_MAX_CLIP",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["MAPPING_IS_NORMAL"],statements:[{type:"textline",tokens:["mx","=","normalize","(","mx",")",";"]}]}]}]},{type:"node",name:"MATH_ADD",declarations:[{type:"node_in",name:"my",qualifier:["float"],is_optional:false},{type:"node_in",name:"mz",qualifier:["float"],is_optional:false},{type:"node_out",name:"mA",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mA","=","my","+","mz",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mA","=","clamp","(","mA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SUBTRACT",declarations:[{type:"node_in",name:"mB",qualifier:["float"],is_optional:false},{type:"node_in",name:"mC",qualifier:["float"],is_optional:false},{type:"node_out",name:"mD",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mD","=","mB","-","mC",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mD","=","clamp","(","mD",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MULTIPLY",declarations:[{type:"node_in",name:"mE",qualifier:["float"],is_optional:false},{type:"node_in",name:"mF",qualifier:["float"],is_optional:false},{type:"node_out",name:"mG",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mG","=","mE","*","mF",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mG","=","clamp","(","mG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_DIVIDE",declarations:[{type:"node_in",name:"mH",qualifier:["float"],is_optional:false},{type:"node_in",name:"mI",qualifier:["float"],is_optional:false},{type:"node_out",name:"mJ",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mJ","=","(","mI","!=","ZERO_VALUE_NODES",")","?","mH","/","mI",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mJ","=","clamp","(","mJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_SINE",declarations:[{type:"node_in",name:"mK",qualifier:["float"],is_optional:false},{type:"node_in",name:"mL",qualifier:["float"],is_optional:false},{type:"node_out",name:"mM",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mM","=","sin","(","mK",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mM","=","clamp","(","mM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mL",";"]}]},{type:"node",name:"MATH_COSINE",declarations:[{type:"node_in",name:"mN",qualifier:["float"],is_optional:false},{type:"node_in",name:"mO",qualifier:["float"],is_optional:false},{type:"node_out",name:"mP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mP","=","cos","(","mN",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mP","=","clamp","(","mP",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mO",";"]}]},{type:"node",name:"MATH_TANGENT",declarations:[{type:"node_in",name:"mQ",qualifier:["float"],is_optional:false},{type:"node_in",name:"mR",qualifier:["float"],is_optional:false},{type:"node_out",name:"mS",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mS","=","tan","(","mQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mS","=","clamp","(","mS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mR",";"]}]},{type:"node",name:"MATH_ARCSINE",declarations:[{type:"node_in",name:"mT",qualifier:["float"],is_optional:false},{type:"node_in",name:"mU",qualifier:["float"],is_optional:false},{type:"node_out",name:"mV",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mV","=","(","mT","<=","UNITY_VALUE_NODES","&&","mT",">=","-","UNITY_VALUE_NODES",")","?","asin","(","mT",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mV","=","clamp","(","mV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mU",";"]}]},{type:"node",name:"MATH_ARCCOSINE",declarations:[{type:"node_in",name:"mW",qualifier:["float"],is_optional:false},{type:"node_in",name:"mX",qualifier:["float"],is_optional:false},{type:"node_out",name:"mY",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["mY","=","(","mW","<=","UNITY_VALUE_NODES","&&","mW",">=","-","UNITY_VALUE_NODES",")","?","acos","(","mW",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["mY","=","clamp","(","mY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["mX",";"]}]},{type:"node",name:"MATH_ARCTANGENT",declarations:[{type:"node_in",name:"mZ",qualifier:["float"],is_optional:false},{type:"node_in",name:"m_",qualifier:["float"],is_optional:false},{type:"node_out",name:"na",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["na","=","atan","(","mZ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["na","=","clamp","(","na",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["m_",";"]}]},{type:"node",name:"MATH_POWER",declarations:[{type:"node_in",name:"nb",qualifier:["float"],is_optional:false},{type:"node_in",name:"nc",qualifier:["float"],is_optional:false},{type:"node_out",name:"nd",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["if","(","nb","<","ZERO_VALUE_NODES","||","nb","==","ZERO_VALUE_NODES","&&","nc","==","ZERO_VALUE_NODES",")","nd","=","ZERO_VALUE_NODES",";","else","nd","=","pow","(","nb",",","nc",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nd","=","clamp","(","nd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_LOGARITHM",declarations:[{type:"node_in",name:"ne",qualifier:["float"],is_optional:false},{type:"node_in",name:"nf",qualifier:["float"],is_optional:false},{type:"node_out",name:"ng",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ng","=","(","ne",">","ZERO_VALUE_NODES","&&","nf",">","ZERO_VALUE_NODES",")","?","log2","(","ne",")","/","log2","(","nf",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ng","=","clamp","(","ng",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MINIMUM",declarations:[{type:"node_in",name:"nh",qualifier:["float"],is_optional:false},{type:"node_in",name:"ni",qualifier:["float"],is_optional:false},{type:"node_out",name:"nj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nj","=","min","(","nh",",","ni",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nj","=","clamp","(","nj",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MAXIMUM",declarations:[{type:"node_in",name:"nk",qualifier:["float"],is_optional:false},{type:"node_in",name:"nl",qualifier:["float"],is_optional:false},{type:"node_out",name:"nm",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nm","=","max","(","nk",",","nl",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nm","=","clamp","(","nm",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ROUND",declarations:[{type:"node_in",name:"nn",qualifier:["float"],is_optional:false},{type:"node_in",name:"no",qualifier:["float"],is_optional:false},{type:"node_out",name:"np",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["np","=","floor","(","nn","+","0.5",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["np","=","clamp","(","np",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["no",";"]}]},{type:"node",name:"MATH_LESS_THAN",declarations:[{type:"node_in",name:"nq",qualifier:["float"],is_optional:false},{type:"node_in",name:"nr",qualifier:["float"],is_optional:false},{type:"node_out",name:"ns",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ns","=","(","nq","<","nr",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ns","=","clamp","(","ns",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_GREATER_THAN",declarations:[{type:"node_in",name:"nt",qualifier:["float"],is_optional:false},{type:"node_in",name:"nu",qualifier:["float"],is_optional:false},{type:"node_out",name:"nv",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nv","=","(","nt",">","nu",")","?","UNITY_VALUE_NODES",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nv","=","clamp","(","nv",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_MODULO",declarations:[{type:"node_in",name:"nw",qualifier:["float"],is_optional:false},{type:"node_in",name:"nx",qualifier:["float"],is_optional:false},{type:"node_out",name:"ny",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["ny","=","abs","(","nx",")",">","0.000001","?","mod","(","nw",",","nx",")",":","ZERO_VALUE_NODES",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["ny","=","clamp","(","ny",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MATH_ABSOLUTE",declarations:[{type:"node_in",name:"nz",qualifier:["float"],is_optional:false},{type:"node_in",name:"nA",qualifier:["float"],is_optional:false},{type:"node_out",name:"nB",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["nB","=","abs","(","nz",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MATH_USE_CLAMP"],statements:[{type:"textline",tokens:["nB","=","clamp","(","nB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]},{type:"textline",tokens:["nA",";"]}]},{type:"node",name:"MIX_RGB_MIX",declarations:[{type:"node_in",name:"nC",qualifier:["float"],is_optional:false},{type:"node_in",name:"nD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nF",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","nC",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nF","=","mix","(","nD",",","nE",",","ld",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nF","=","clamp","(","nF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_ADD",declarations:[{type:"node_in",name:"nG",qualifier:["float"],is_optional:false},{type:"node_in",name:"nH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nJ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","nG",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nJ","=","mix","(","nH",",","nH","+","nI",",","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nJ","=","clamp","(","nJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_MULTIPLY",declarations:[{type:"node_in",name:"nK",qualifier:["float"],is_optional:false},{type:"node_in",name:"nL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nN",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","nK",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nN","=","mix","(","nL",",","nL","*","nM",",","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nN","=","clamp","(","nN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SUBTRACT",declarations:[{type:"node_in",name:"nO",qualifier:["float"],is_optional:false},{type:"node_in",name:"nP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","nO",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","nR","=","mix","(","nP",",","nP","-","nQ",",","ld",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nR","=","clamp","(","nR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SCREEN",declarations:[{type:"node_in",name:"nS",qualifier:["float"],is_optional:false},{type:"node_in",name:"nT",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nU",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nV",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","nS",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lf","=","UNITY_VALUE_NODES","-","le",";","nV","=","kr","-","(","vec3","(","lf",")","+","le","*","(","kr","-","nU",")",")","*","(","kr","-","nT",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nV","=","clamp","(","nV",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIVIDE",declarations:[{type:"node_in",name:"nW",qualifier:["float"],is_optional:false},{type:"node_in",name:"nX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"nY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"nZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","nW",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lf","=","UNITY_VALUE_NODES","-","ld",";","nY","+=","step","(","nY",",","kq",")",";","nZ","=","lf","*","nX","+","ld","*","nX","/","nY",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["nZ","=","clamp","(","nZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DIFFERENCE",declarations:[{type:"node_in",name:"n_",qualifier:["float"],is_optional:false},{type:"node_in",name:"oa",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ob",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oc",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","n_",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oc","=","mix","(","oa",",","abs","(","oa","-","ob",")",",","le",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oc","=","clamp","(","oc",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DARKEN",declarations:[{type:"node_in",name:"od",qualifier:["float"],is_optional:false},{type:"node_in",name:"oe",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"of",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"og",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","od",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","og","=","min","(","oe",".","rgb",",","of",".","rgb","*","lf",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["og","=","clamp","(","og",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LIGHTEN",declarations:[{type:"node_in",name:"oh",qualifier:["float"],is_optional:false},{type:"node_in",name:"oi",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oj",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ok",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","oh",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ok","=","max","(","oi",".","rgb",",","oj",".","rgb","*","ld",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ok","=","clamp","(","ok",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_OVERLAY",declarations:[{type:"node_in",name:"ol",qualifier:["float"],is_optional:false},{type:"node_in",name:"om",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"on",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oo",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","ol",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lu","=","vec3","(","UNITY_VALUE_NODES","-","le",")",";","oo","=","mix","(","om","*","(","lu","+","2.0","*","le","*","on",")",",","kr","-","(","lu","+","2.0","*","le","*","(","kr","-","on",")",")","*","(","kr","-","om",")",",","step","(","0.5",",","om",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oo","=","clamp","(","oo",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_DODGE",declarations:[{type:"node_in",name:"op",qualifier:["float"],is_optional:false},{type:"node_in",name:"oq",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"or",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"os",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","op",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lv","=","kr","-","lf","*","or",";","lu","=","clamp","(","oq","/","lv",",","0.0",",","1.0",")",";","os","=","mix","(","mix","(","lu",",","kr",",","step","(","lv",",","kq",")",")",",","oq",",","step","(","oq",",","kq",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["os","=","clamp","(","os",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_BURN",declarations:[{type:"node_in",name:"ot",qualifier:["float"],is_optional:false},{type:"node_in",name:"ou",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ov",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"ow",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","ot",",","0.0",",","1.0",")",";","lu","=","vec3","(","1.0","-","ld",")",";","lv","=","lu","+","ld","*","ov",";","lu","=","clamp","(","kr","-","(","kr","-","ou",")","/","lv",",","0.0",",","1.0",")",";","ow","=","mix","(","lu",",","kq",",","step","(","lv",",","kq",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["ow","=","clamp","(","ow",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_HUE",declarations:[{type:"node_in",name:"ox",qualifier:["float"],is_optional:false},{type:"node_in",name:"oy",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oz",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oA",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","ox",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oA","=","oy",";","lv","=","kA","(","oz",")",";","if","(","lv",".","y","!=","ZERO_VALUE_NODES",")","{","lu","=","kA","(","oA",")",";","lu",".","x","=","lv",".","x",";","lw","=","kE","(","lu",")",";","oA","=","mix","(","oA",",","lw",",","le",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oA","=","clamp","(","oA",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SATURATION",declarations:[{type:"node_in",name:"oB",qualifier:["float"],is_optional:false},{type:"node_in",name:"oC",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oD",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oE",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","oB",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ld","=","UNITY_VALUE_NODES","-","lf",";","oE","=","oC",";","lv","=","kA","(","oE",")",";","if","(","lv",".","y","!=","ZERO_VALUE_NODES",")","{","lw","=","kA","(","oD",")",";","lv",".","y","=","ld","*","lv",".","y","+","lf","*","lw",".","y",";","oE","=","kE","(","lv",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oE","=","clamp","(","oE",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_VALUE",declarations:[{type:"node_in",name:"oF",qualifier:["float"],is_optional:false},{type:"node_in",name:"oG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oH",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["le","=","clamp","(","oF",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ld","=","UNITY_VALUE_NODES","-","le",";","lw","=","kA","(","oG",")",";","lx","=","kA","(","oH",")",";","lw",".","z","=","ld","*","lw",".","z","+","le","*","lx",".","z",";","oI","=","kE","(","lw",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oI","=","clamp","(","oI",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_COLOR",declarations:[{type:"node_in",name:"oJ",qualifier:["float"],is_optional:false},{type:"node_in",name:"oK",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","oJ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oM","=","oK",";","ly","=","kA","(","oL",")",";","if","(","ly",".","y","!=","ZERO_VALUE_NODES",")","{","lx","=","kA","(","oM",")",";","lx",".","x","=","ly",".","x",";","lx",".","y","=","ly",".","y",";","lz","=","kE","(","lx",")",";","oM","=","mix","(","oM",",","lz",",","lf",")",";","}"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oM","=","clamp","(","oM",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_SOFT_LIGHT",declarations:[{type:"node_in",name:"oN",qualifier:["float"],is_optional:false},{type:"node_in",name:"oO",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oP",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oQ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["ld","=","clamp","(","oN",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","le","=","UNITY_VALUE_NODES","-","ld",";","ly","=","oP","+","oO","-","oP","*","oO",";","oQ","=","oO","*","(","vec3","(","le",")","+","vec3","(","ld",")","*","(","(","kr","-","oO",")","*","oP","+","ly",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oQ","=","clamp","(","oQ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"MIX_RGB_LINEAR_LIGHT",declarations:[{type:"node_in",name:"oR",qualifier:["float"],is_optional:false},{type:"node_in",name:"oS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oT",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"oU",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["lf","=","clamp","(","oR",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","oU","=","oS","+","lf","*","(","2.0","*","oT","-","kr",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["MIX_RGB_USE_CLAMP"],statements:[{type:"textline",tokens:["oU","=","clamp","(","oU",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]},{type:"node",name:"OUTPUT",declarations:[{type:"node_in",name:"oV",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oW",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["lq","=","oV",";","lc","=","oW",";"]}]},{type:"node",name:"MATERIAL",declarations:[{type:"node_in",name:"oX",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"oY",qualifier:["float"],is_optional:false},{type:"node_in",name:"oZ",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"o_",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pa",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pb",qualifier:["float"],is_optional:true},{type:"node_out",name:"pc",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"kP",qualifier:["const","vec2"]},{type:"node_param",name:"kQ",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["lz","=","clamp","(","oX",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","ly","=","kQ","[","0","]","*","clamp","(","oZ",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["lA","=","normalize","(","o_",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lA","=","lo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["lB","=","kZ","*","lz",";","le","=","0.5","*","lA",".","y","+","0.5",";","lC","=","la","*","u_environment_energy","*","kp","(","le",",","lA",")",";","ld","=","eZ","(","lz",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["kT","=","vec2","(","kP","[","0","]",",","kP","[","1","]",")",";","kU","=","vec2","(","kQ","[","1","]",",","kQ","[","2","]",")",";","lH","=","jc","(","lB",",","lC",",","lz",",","ly",",","lp",",","lA",",","ln",",","kU",",","kT",",","ld",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","ZERO_VALUE_NODES",",","vec4","(","ZERO_VALUE_NODES",")",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lH","=","jh","(","lB",",","lC",",","lz",")",";"]}]}]},{type:"textline",tokens:["lb","=","ld",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lH",".","a","=","vec4","(","lz",",","ZERO_VALUE_NODES",")",";","lH",".","b","=","kq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pa"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["pa","=","lH",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["pa","=","kq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pa","+=","lH",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pb"],statements:[{type:"textline",tokens:["pb","=","clamp","(","oY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pb","+=","lH",".","a",".","a","*","ly",".","r","*","k_",";","pb","=","clamp","(","pb",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pc"],statements:[{type:"textline",tokens:["pc","=","lA",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["lr","=","lH",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lr","=","kq",";"]}]}]},{type:"textline",tokens:["ls","=","lA",";"]}]},{type:"node",name:"MATERIAL_EXT",declarations:[{type:"node_in",name:"pd",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pe",qualifier:["float"],is_optional:false},{type:"node_in",name:"pf",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pg",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"ph",qualifier:["float"],is_optional:false},{type:"node_in",name:"pi",qualifier:["float"],is_optional:false},{type:"node_in",name:"pj",qualifier:["vec4"],is_optional:false},{type:"node_in",name:"pk",qualifier:["float"],is_optional:false},{type:"node_in",name:"pl",qualifier:["float"],is_optional:false},{type:"node_out",name:"pm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pn",qualifier:["float"],is_optional:true},{type:"node_out",name:"po",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pp",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pq",qualifier:["vec3"],is_optional:true},{type:"node_param",name:"kR",qualifier:["const","vec2"]},{type:"node_param",name:"kS",qualifier:["const","vec3"]}],statements:[{type:"textline",tokens:["ly","=","clamp","(","pd",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","lD","=","kS","[","0","]","*","clamp","(","pf",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_NORMAL"],statements:[{type:"textline",tokens:["lE","=","normalize","(","pg",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lE","=","lo",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["!","SHADELESS_MAT"],statements:[{type:"textline",tokens:["lf","=","eZ","(","ly",")",";","lF","=","ph","*","ly",";","lg","=","0.5","*","lE",".","y","+","0.5",";","lG","=","la","*","u_environment_energy","*","kp","(","lg",",","lE",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["NUM_LIGHTS",">","0"],statements:[{type:"textline",tokens:["kU","=","vec2","(","kR","[","0","]",",","kR","[","1","]",")",";","kT","=","vec2","(","kS","[","1","]",",","kS","[","2","]",")",";","lH","=","jc","(","lF",",","lG",",","ly",",","lD",",","lp",",","lE",",","ln",",","kT",",","kU",",","lf",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","pi",",","pj",")",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lH","=","jh","(","lF",",","lG",",","ly",")",";"]}]}]},{type:"textline",tokens:["lb","=","lf",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lH",".","a","=","vec4","(","ly",",","ZERO_VALUE_NODES",")",";","lH",".","b","=","kq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pm"],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_DIFFUSE"],statements:[{type:"textline",tokens:["pm","=","lH",".","a",".","rgb",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["pm","=","kq",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],statements:[{type:"textline",tokens:["jZ","(","pm",",","ln",",","lE",",","u_fresnel_params","[","2","]",",","u_fresnel_params","[","3","]",",","pk",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pm","+=","lH",".","b",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pn"],statements:[{type:"textline",tokens:["pn","=","clamp","(","pe",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["pn","+=","lH",".","a",".","a","*","lD",".","r","*","pl",";","pn","=","clamp","(","pn",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_po"],statements:[{type:"textline",tokens:["po","=","lE",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pp"],statements:[{type:"textline",tokens:["pp","=","lH",".","a",".","rgb",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pq"],statements:[{type:"textline",tokens:["pq","=","lH",".","b",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_MATERIAL_SPECULAR"],statements:[{type:"textline",tokens:["lr","=","lH",".","b",";"]}]},{type:"node_else",statements:[{type:"textline",tokens:["lr","=","kq",";"]}]}]},{type:"textline",tokens:["ls","=","lE",";"]}]},{type:"node",name:"RGB",declarations:[{type:"node_out",name:"pr",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pr","=","u_node_rgbs","[","RGB_IND","]",";"]}]},{type:"node",name:"RGBTOBW",declarations:[{type:"node_in",name:"ps",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pt",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pt","=","ps",".","r","*","0.35","+","ps",".","g","*","0.45","+","ps",".","b","*","0.2",";"]}]},{type:"node",name:"SEPRGB",declarations:[{type:"node_in",name:"pu",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pv",qualifier:["float"],is_optional:true},{type:"node_out",name:"pw",qualifier:["float"],is_optional:true},{type:"node_out",name:"px",qualifier:["float"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pv"],statements:[{type:"textline",tokens:["pv","=","pu",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pw"],statements:[{type:"textline",tokens:["pw","=","pu",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_px"],statements:[{type:"textline",tokens:["px","=","pu",".","b",";"]}]}]}]},{type:"node",name:"SEPHSV",declarations:[{type:"node_in",name:"py",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pz",qualifier:["float"],is_optional:true},{type:"node_out",name:"pA",qualifier:["float"],is_optional:true},{type:"node_out",name:"pB",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["lD","=","kA","(","py",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pz"],statements:[{type:"textline",tokens:["pz","=","lD",".","r",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pA"],statements:[{type:"textline",tokens:["pA","=","lD",".","g",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pB"],statements:[{type:"textline",tokens:["pB","=","lD",".","b",";"]}]}]}]},{type:"node",name:"SQUEEZE",declarations:[{type:"node_in",name:"pC",qualifier:["float"],is_optional:false},{type:"node_in",name:"pD",qualifier:["float"],is_optional:false},{type:"node_in",name:"pE",qualifier:["float"],is_optional:false},{type:"node_out",name:"pF",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pF","=","UNITY_VALUE_NODES","/","(","UNITY_VALUE_NODES","+","pow","(","2.71828183",",","-","(","(","pC","-","pE",")","*","pD",")",")",")",";"]}]},{type:"node",name:"GAMMA",declarations:[{type:"node_in",name:"pG",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"pH",qualifier:["float"],is_optional:false},{type:"node_out",name:"pI",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pI","=","max","(","kq",",","pG",")",";","pI","=","pow","(","pI",",","vec3","(","pH",")",")",";"]}]},{type:"node",name:"B4W_SRGB_TO_LINEAR",declarations:[{type:"node_in",name:"pJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pK",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pK","=","max","(","kq",",","pJ",")",";","pK","=","pow","(","pK",",","vec3","(","2.2",")",")",";"]}]},{type:"node",name:"B4W_LINEAR_TO_SRGB",declarations:[{type:"node_in",name:"pL",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pM",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["pM","=","max","(","kq",",","pL",")",";","pM","=","pow","(","pM",",","vec3","(","UNITY_VALUE_NODES","/","2.2",")",")",";"]}]},{type:"node",name:"TEXTURE_EMPTY",declarations:[{type:"node_out",name:"pN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pO",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pP",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["pP","=","pN","[","0","]","=","pN","[","1","]","=","pN","[","2","]","=","pO","[","0","]","=","pO","[","1","]","=","pO","[","2","]","=","0.0",";"]}]},{type:"node",name:"TEXTURE_ENVIRONMENT",declarations:[{type:"node_in",name:"pQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"pR",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pS",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_ENVIRONMENT_var_texture",qualifier:["uniform","samplerCube"]}],statements:[{type:"textline",tokens:["kW","=","textureCube","(","node_TEXTURE_ENVIRONMENT_var_texture",",","pQ",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pR"],statements:[{type:"textline",tokens:["pR","=","kW",".","xyz",";","fV","(","pR",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pS"],statements:[{type:"textline",tokens:["pS","=","kW",".","w",";"]}]}]}]},{type:"node",name:"TEXTURE_COLOR",declarations:[{type:"node_in",name:"pT",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pU",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pV",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"pW",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pX",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"pY",qualifier:["float"],is_optional:true},{type:"node_out",name:"pZ",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"p_",qualifier:["float"],is_optional:true},{type:"node_out",name:"qa",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qb",qualifier:["float"],is_optional:true},{type:"node_out",name:"qc",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qd",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_COLOR_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kI","(","pT",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pX"],statements:[{type:"textline",tokens:["pX","=","kW",".","xyz",";","fV","(","pX",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pY"],statements:[{type:"textline",tokens:["pY","=","kW",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kI","(","pU",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_pZ"],statements:[{type:"textline",tokens:["pZ","=","kW",".","xyz",";","fV","(","pZ",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_p_"],statements:[{type:"textline",tokens:["p_","=","kW",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kI","(","pV",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qa"],statements:[{type:"textline",tokens:["qa","=","kW",".","xyz",";","fV","(","qa",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qb"],statements:[{type:"textline",tokens:["qb","=","kW",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_COLOR_var_texture",",","kI","(","pW",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qc"],statements:[{type:"textline",tokens:["qc","=","kW",".","xyz",";","fV","(","qc",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qd"],statements:[{type:"textline",tokens:["qd","=","kW",".","w",";"]}]}]}]}]}]},{type:"node",name:"TEXTURE_NORMAL",declarations:[{type:"node_in",name:"qe",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qf",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qg",qualifier:["vec3"],is_optional:true},{type:"node_in",name:"qh",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qi",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qj",qualifier:["float"],is_optional:true},{type:"node_out",name:"qk",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"ql",qualifier:["float"],is_optional:true},{type:"node_out",name:"qm",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qn",qualifier:["float"],is_optional:true},{type:"node_out",name:"qo",qualifier:["vec3"],is_optional:true},{type:"node_out",name:"qp",qualifier:["float"],is_optional:true},{type:"node_param",name:"node_TEXTURE_NORMAL_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kI","(","qe",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qi"],statements:[{type:"textline",tokens:["qi","=","normalize","(","kX","*","(","kW",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qj"],statements:[{type:"textline",tokens:["qj","=","kW",".","w",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv2"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kI","(","qf",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qk"],statements:[{type:"textline",tokens:["qk","=","normalize","(","kX","*","(","kW",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ql"],statements:[{type:"textline",tokens:["ql","=","kW",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv3"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kI","(","qg",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qm"],statements:[{type:"textline",tokens:["qm","=","normalize","(","kX","*","(","kW",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qn"],statements:[{type:"textline",tokens:["qn","=","kW",".","w",";"]}]}]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_uv4"],statements:[{type:"textline",tokens:["kW","=","texture2D","(","node_TEXTURE_NORMAL_var_texture",",","kI","(","qh",")",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qo"],statements:[{type:"textline",tokens:["qo","=","normalize","(","kX","*","(","kW",".","xyz","-","0.5",")",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qp"],statements:[{type:"textline",tokens:["qp","=","kW",".","w",";"]}]}]}]}]}]},{type:"node",name:"VALUE",declarations:[{type:"node_out",name:"qq",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["qq","=","u_node_values","[","VALUE_IND","]",";"]}]},{type:"node",name:"VECT_MATH_ADD",declarations:[{type:"node_in",name:"qr",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qs",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qt",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qu",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qt","=","qr","+","qs",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qu"],statements:[{type:"textline",tokens:["qu","=","(","abs","(","qt","[","0","]",")","+","abs","(","qt","[","1","]",")","+","abs","(","qt","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_SUBTRACT",declarations:[{type:"node_in",name:"qv",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qw",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qx",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qy",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qx","=","qv","-","qw",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qy"],statements:[{type:"textline",tokens:["qy","=","(","abs","(","qx","[","0","]",")","+","abs","(","qx","[","1","]",")","+","abs","(","qx","[","2","]",")",")","/","3.0",";"]}]}]}]},{type:"node",name:"VECT_MATH_AVERAGE",declarations:[{type:"node_in",name:"qz",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qA",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qB",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qC",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qB","=","qz","+","qA",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qC"],statements:[{type:"textline",tokens:["qC","=","length","(","qB",")",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qB"],statements:[{type:"textline",tokens:["qB","=","normalize","(","qB",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_DOT_PRODUCT",declarations:[{type:"node_in",name:"qD",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qE",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qF",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qG",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qF","=","kq",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qG"],statements:[{type:"textline",tokens:["qG","=","dot","(","qD",",","qE",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_CROSS_PRODUCT",declarations:[{type:"node_in",name:"qH",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qI",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qJ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qK",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qJ","=","cross","(","qH",",","qI",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qK"],statements:[{type:"textline",tokens:["qK","=","length","(","qJ",")",";"]}]}]}]},{type:"node",name:"VECT_MATH_NORMALIZE",declarations:[{type:"node_in",name:"qL",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qM",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qN",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qO",qualifier:["float"],is_optional:true}],statements:[{type:"textline",tokens:["qN","=","normalize","(","qL",")",";"]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_qO"],statements:[{type:"textline",tokens:["qO","=","length","(","qL",")",";"]}]}]},{type:"textline",tokens:["qM",";"]}]},{type:"node",name:"B4W_REFLECT",declarations:[{type:"node_in",name:"qP",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qQ",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qR",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qR","=","reflect","(","-","qP",",","qQ",")",";"]}]},{type:"node",name:"B4W_PARALLAX",declarations:[{type:"node_in",name:"qS",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"qT",qualifier:["float"],is_optional:false},{type:"node_in",name:"qU",qualifier:["const","float"],is_optional:false},{type:"node_in",name:"qV",qualifier:["const","float"],is_optional:false},{type:"node_out",name:"qW",qualifier:["vec3"],is_optional:false},{type:"node_param",name:"node_B4W_PARALLAX_var_texture",qualifier:["uniform","sampler2D"]}],statements:[{type:"textline",tokens:["lh","=","length","(","kV",")",";","if","(","lh","<","qV",")","{","kT","=","kI","(","qS",")",";","li","=","clamp","(","0.5","*","(","qV","-","lh",")",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";","li","=","qT","*","li",";","lD","=","normalize","(","ln","*","kX",")",";","lj","=","UNITY_VALUE_NODES","/","qU",";","kU","=","lD",".","xy","*","li","/","(","qU","*","lD",".","z",")",";","lk","=","UNITY_VALUE_NODES",";","ll","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kT",")",".","a",";","for","(","float","qX","=","1.0",";","qX","<=","qU",";","qX","++",")","{","if","(","ll","<","lk",")","{","lk","-=","lj",";","kT","-=","kU",";","ll","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kT",")",".","a",";","}","}","kU","=","kT","+","kU",";","lj","=","texture2D","(","node_B4W_PARALLAX_var_texture",",","kU",")",".","a","-","(","lk","+","lj",")",";","lk","=","ll","-","lk",";","lk","=","lk","/","(","lk","-","lj",")",";","kT","=","lk","*","kU","+","(","UNITY_VALUE_NODES","-","lk",")","*","kT",";","qW","=","kG","(","kT",")",";","}","else","qW","=","qS",";"]}]},{type:"node",name:"B4W_CLAMP",declarations:[{type:"node_in",name:"qY",qualifier:["vec3"],is_optional:false},{type:"node_out",name:"qZ",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["qZ","=","clamp","(","qY",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]},{type:"node",name:"B4W_REFRACTION",declarations:[{type:"node_in",name:"q_",qualifier:["vec3"],is_optional:false},{type:"node_in",name:"ra",qualifier:["float"],is_optional:false},{type:"node_out",name:"rb",qualifier:["vec3"],is_optional:false}],statements:[{type:"textline",tokens:["rb","=","kv","(","q_",",","ra",")",";"]}]},{type:"node",name:"B4W_TRANSLUCENCY",declarations:[{type:"node_in",name:"rc",qualifier:["float"],is_optional:false},{type:"node_in",name:"rd",qualifier:["float"],is_optional:false},{type:"node_in",name:"re",qualifier:["float"],is_optional:false},{type:"node_in",name:"rf",qualifier:["float"],is_optional:false},{type:"node_in",name:"rg",qualifier:["float"],is_optional:false},{type:"node_out",name:"rh",qualifier:["float"],is_optional:true},{type:"node_out",name:"ri",qualifier:["vec4"],is_optional:true}],statements:[{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_rh"],statements:[{type:"textline",tokens:["rh","=","rc",";"]}]}]},{type:"node_condition",parts:[{type:"node_if",expression:["USE_OUT_ri"],statements:[{type:"textline",tokens:["ri","=","vec4","(","rd",",","re",",","rf",",","rg",")",";"]}]}]}]},{type:"node",name:"B4W_TIME",declarations:[{type:"node_out",name:"rj",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rj","=","u_time",";"]}]},{type:"node",name:"B4W_SMOOTHSTEP",declarations:[{type:"node_in",name:"rk",qualifier:["float"],is_optional:false},{type:"node_in",name:"rl",qualifier:["float"],is_optional:false},{type:"node_in",name:"rm",qualifier:["float"],is_optional:false},{type:"node_out",name:"rn",qualifier:["float"],is_optional:false}],statements:[{type:"textline",tokens:["rn","=","smoothstep","(","rl",",","rm",",","rk",")",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec2","kT",",","kU",";","vec4","kV",",","kW",";","mat3","kX",";","float","kY",",","kZ",",","k_",",","la",",","lb",",","lc",",","ld",",","le",",","lf",",","lg",",","lh",",","li",",","lj",",","lk",",","ll",";","vec3","lm",",","ln",",","lo",",","lp",",","lq",",","lr",",","ls",",","lt",",","lu",",","lv",",","lw",",","lx",",","ly",",","lz",",","lA",",","lB",",","lC",",","lD",",","lE",",","lF",",","lG",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","||","!","DISABLE_FOG","||","(","CAUSTICS","&&","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["lm","=","u_sun_intensity",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["ln","=","jD",";"]},{type:"condition",parts:[{type:"if",expression:["DOUBLE_SIDED_LIGHTING"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","gl_FrontFacing",")","ln","=","ln",";","else","ln","=","-","ln",";"]}]}}]},{type:"textline",tokens:["lo","=","normalize","(","ln",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lp","=","cross","(","ln",",","jE",".","xyz",")","*","jE",".","w",";","kX","=","mat3","(","jE",".","xyz",",","lp",",","ln",")",";","kX","=","kX",";"]}]}}]},{type:"textline",tokens:["lp","=","u_camera_eye_frag","-","jC",";","ln","=","normalize","(","lp",")",";","lp","=","jC",";","kV","=","cJ",";","kZ","=","u_emit",";","k_","=","u_specular_alpha",";","la","=","u_ambient",";","gO","lH",";"]},{type:"nodes_main"},{type:"textline",tokens:["lD","=","lq",";","lj","=","lc",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WETTABLE"],group:{type:"group",parts:[{type:"textline",tokens:["lD","=","max","(","lD","-","sqrt","(","0.01","*","-","min","(","kY",",","ZERO_VALUE_NODES",")",")",",","0.5","*","lD",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["jA","(","lD",",","kY",",","u_time",",","lb",",","ls",",","u_sun_direction",",","lm",",","u_sun_quaternion",",","jC",",","length","(","cJ",")",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","(","!","PROCEDURAL_FOG","||","WATER_EFFECTS",")"],group:{type:"group",parts:[{type:"textline",tokens:["lk","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","ZERO_VALUE_NODES",",","UNITY_VALUE_NODES",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["lq","=","gm","(","u_cube_fog",",","ln",")",";","kW","=","vec4","(","lq",",","u_fog_color_density",".","a",")",";","fV","(","kW",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kW","=","u_fog_color_density",";","kW",".","rgb","*=","lk",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["gC","(","lD",",","length","(","cJ",")",",","ln",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","kW",",","kY",",","lk",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","lD",",","length","(","cJ",")",",","kW",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","lj","<","0.5",")","discard",";","lj","=","UNITY_VALUE_NODES",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SSAO_ONLY","&&","SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["kU","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","lc","=","kU",".","g",";","lD","=","vec3","(","lc",")",";"]}]}}]},{type:"textline",tokens:["fX","(","lD",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","lD",",","lj",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","lD",",","lj",")",";","}"]}]},exports["nodes.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"VERTEX_ANIM_MIX_NORMALS_FACTOR",tokens:["u_va_frame_factor"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_normal_next",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_tangent_next",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_normal_offset",";","uniform","mat4","u_v_light_matrix",";","uniform","mat4","u_b_light_matrix",";","uniform","mat4","u_p_light_matrix0",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jC",";","varying","vec4","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","jE",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cF",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","USE_NODE_B4W_REFRACTION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"include",file:"shadow.glslv"},{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"node",name:"GEOMETRY_UV",declarations:[{type:"node_param",name:"node_GEOMETRY_UV_var_a_uv",qualifier:["attribute","vec2"]},{type:"node_param",name:"kJ",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["kJ","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{type:"node",name:"GEOMETRY_VC",declarations:[{type:"node_param",name:"node_GEOMETRY_VC_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kO",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["kO","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC1",declarations:[{type:"node_param",name:"node_GEOMETRY_VC1_var_a_vertex_color",qualifier:["attribute","float"]},{type:"node_param",name:"kP",qualifier:["varying","float"]}],statements:[{type:"textline",tokens:["kP","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC2",declarations:[{type:"node_param",name:"node_GEOMETRY_VC2_var_a_vertex_color",qualifier:["attribute","vec2"]},{type:"node_param",name:"kQ",qualifier:["varying","vec2"]}],statements:[{type:"textline",tokens:["kQ","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{type:"node",name:"GEOMETRY_VC3",declarations:[{type:"node_param",name:"node_GEOMETRY_VC3_var_a_vertex_color",qualifier:["attribute","vec3"]},{type:"node_param",name:"kR",qualifier:["varying","vec3"]}],statements:[{type:"textline",tokens:["kR","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{type:"nodes_global"},{type:"textline",tokens:["void","main","(",")","{","vec4","kS",";","float","kT",",","kU",",","kV",";","mat4","kW",";","vec3","kX",",","kY",",","kZ",",","k_",",","la",",","lb",",","lc",";","kX","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","a_normal",";","kZ","=","vec3","(","a_tangent",")",";","k_","=","a_tangent","[","3","]","*","cross","(","kY",",","kZ",")",";"]}]}},{type:"elif",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","a_normal",";","kZ","=","vec3","(","0.0",")",";","k_","=","vec3","(","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kY","=","vec3","(","0.0",")",";","kZ","=","vec3","(","0.0",")",";","k_","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["kX","=","mix","(","kX",",","a_position_next",",","u_va_frame_factor",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kY","=","mix","(","kY",",","a_normal_next",",","VERTEX_ANIM_MIX_NORMALS_FACTOR",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["la","=","vec3","(","a_tangent",")",";","lb","=","a_tangent_next","[","3","]","*","cross","(","a_normal_next",",","la",")",";","kZ","=","mix","(","kZ",",","la",",","u_va_frame_factor",")",";","k_","=","mix","(","k_",",","lb",",","u_va_frame_factor",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["bv","(","kX",",","kZ",",","k_",",","kY",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["la","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["la","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["lb","=","(","u_model_matrix","*","vec4","(","la",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["kW","=","ao","(","u_camera_eye",",","lb",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kW","=","ai","(","u_camera_eye",",","lb",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["lc","=","(","u_model_matrix","*","vec4","(","la",",","1.0",")",")",".","xyz",";","kW","=","kW","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","lc",")",";"]}]}}]},{type:"textline",tokens:["d","ld","=","av","(","kX","-","la",",","la",",","kZ",",","k_",",","kY",",","kW",")",";","ld",".","b","=","lb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","ld","=","av","(","kX",",","la",",","kZ",",","k_",",","kY",",","u_model_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","ld",".","a",",","ld",".","b",",","kY",")",";"]}]}}]},{type:"textline",tokens:["jC","=","ld",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_MATERIAL","||","USE_NODE_MATERIAL_EXT","||","USE_NODE_GEOMETRY_NO","||","CAUSTICS","||","CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["jD","=","ld",".","e",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CALC_TBN_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["kT","=","(","dot","(","cross","(","ld",".","e",",","ld",".","c",")",",","ld",".","d",")","<","0.0",")","?","-","1.0",":","1.0",";","jE","=","vec4","(","ld",".","c",",","kT",")",";"]}]}}]},{type:"textline",tokens:["cJ","=","u_view_matrix","*","vec4","(","ld",".","a",",","1.0",")",";","kS","=","u_proj_matrix","*","cJ",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_JITTER"],group:{type:"group",parts:[{type:"textline",tokens:["kS",".","xy","+=","u_subpixel_jitter","*","kS",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","kS",")",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["fO","(","ld",".","a",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","SHADOW_SRC","==","SHADOW_SRC_MASK","||","(","USE_NODE_B4W_REFRACTION","&&","REFRACTIVE",")"],group:{type:"group",parts:[{type:"textline",tokens:["kT","=","kS",".","x",";","kU","=","kS",".","y",";","kV","=","kS",".","w",";","cI",".","x","=","(","kT","+","kV",")","/","2.0",";","cI",".","y","=","(","kU","+","kV",")","/","2.0",";","cI",".","z","=","kV",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_REFRACTION","&&","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","cJ",".","z","/","u_view_max_depth",";"]}]}}]},{type:"nodes_main"},{type:"textline",tokens:["gl_Position","=","kS",";","}"]}]},exports["particles_color.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","float","u_p_alpha_start",";","uniform","float","u_p_alpha_end",";","uniform","vec4","u_fog_color_density",";","varying","float","kS",";","varying","vec3","jF",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cJ",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec3","kT",";","float","kU",";","kU","=","2.0","*","sqrt","(","(","gl_PointCoord",".","x","-","0.5",")","*","(","gl_PointCoord",".","x","-","0.5",")","+","(","gl_PointCoord",".","y","-","0.5",")","*","(","gl_PointCoord",".","y","-","0.5",")",")",";","kU","=","smoothstep","(","u_p_alpha_start",",","u_p_alpha_end",",","kU",")",";","kU","=","u_diffuse_color",".","a","*","kS","*","(","1.0","-","clamp","(","kU",",","0.0",",","1.0",")",")",";","kT","=","jF","*","u_diffuse_color",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","kT",",","length","(","cJ",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["fX","(","kT",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kT",",","kU",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kT",",","kU",")",";","}"]}]},exports["particles_color.glslv"] = {type:"group",parts:[{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","float","u_height",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","kS",";","varying","vec3","jF",";","varying","vec3","cJ",";"]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["void","main","(",")","{","float","lF",";","vec4","lG",";","kT","lH",";","lH","=","lE","(",")",";","lG","=","u_view_matrix","*","vec4","(","lH",".","b",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","lG",";","kS","=","lH",".","c",";","jF","=","lH",".","d",";","cJ","=","lG",".","xyz",";","lF","=","u_height","*","u_proj_matrix","[","1","]","[","1","]","*","u_p_size","/","gl_Position",".","z",";","gl_PointSize","=","lH",".","a","*","lF",";","}"]}]},exports["particles_texture.glslf"] = {type:"group",parts:[{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"fog.glslf"},{type:"var",name:"PARTICLES_SHADELESS",tokens:["0"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_sampler",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky_texture",";"]}]}},{type:"elif",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_emit",";","uniform","float","u_ambient",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","varying","float","kS",";","varying","vec3","jF",";","varying","vec2","a",";","varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"environment.glslf"},{type:"textline",tokens:["void","main","(",")","{","vec2","kq",";","float","kr",";","vec3","ks",",","kt",",","ku",",","kv",",","kw",",","kx",";","vec4","ky",",","kz",";","ky","=","u_diffuse_color",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["kz","=","texture2D","(","u_sampler",",","a",")",";","fV","(","kz",".","rgb",")",";"]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MIX"],group:{type:"group",parts:[{type:"textline",tokens:["ky",".","rgb","=","mix","(","ky",".","rgb",",","kz",".","rgb",",","u_diffuse_color_factor",")",";"]}]}},{type:"elif",expression:["TEXTURE_BLEND_TYPE","==","TEXTURE_BLEND_TYPE_MULTIPLY"],group:{type:"group",parts:[{type:"textline",tokens:["ky",".","rgb","*=","mix","(","vec3","(","1.0",")",",","kz",".","rgb",",","u_diffuse_color_factor",")",";"]}]}}]},{type:"textline",tokens:["ky",".","a","=","kz",".","a",";"]}]}}]},{type:"textline",tokens:["ky",".","rgb","*=","jF",";","ks","=","u_diffuse_intensity","*","ky",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["!","PARTICLES_SHADELESS"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","u_emit","*","ky",".","rgb",";","ku","=","vec3","(","0.0",",","1.0",",","0.0",")",";","kr","=","0.5",";","kv","=","u_environment_energy","*","kp","(","kr",",","ku",")",";","kv","=","u_ambient","*","kv",";","kr","=","u_specular_params","[","0","]",";","kq","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","kw","=","kr","*","u_specular_color",";","kx","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","kA","=","jc","(","kt",",","kv",",","ks",",","kw",",","jC",",","ku",",","kx",",","kq",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","kA","=","jh","(","kt",",","kv",",","ks",")",";"]}]}}]},{type:"textline",tokens:["kw","=","kA",".","a",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kw","=","ks",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["gg","(","kw",",","length","(","cJ",")",",","u_fog_color_density",")",";"]}]}}]},{type:"textline",tokens:["kr","=","ky",".","a","*","kS",";","fX","(","kw",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA","&&","!","ALPHA_CLIP"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kw",",","kr",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kw",",","kr",")",";","}"]}]},exports["particles_texture.glslv"] = {type:"group",parts:[{type:"var",name:"BILLBOARD_ALIGN",tokens:["0"]},{type:"var",name:"COLOR_RAMP_LENGTH",tokens:["0"]},{type:"var",name:"SIZE_RAMP_LENGTH",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"define",name:"BILLBOARD_ALIGN_VIEW",tokens:["1"]},{type:"define",name:"BILLBOARD_ALIGN_XY",tokens:["2"]},{type:"define",name:"BILLBOARD_ALIGN_YZ",tokens:["3"]},{type:"define",name:"BILLBOARD_ALIGN_ZX",tokens:["4"]},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_p_delay",";","attribute","float","a_p_lifetime",";","attribute","vec4","a_p_vels",";","attribute","vec2","a_p_bb_vertex",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_p_color_ramp","[","COLOR_RAMP_LENGTH","]",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_p_size_ramp","[","SIZE_RAMP_LENGTH","]",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_p_time",";","uniform","float","u_p_length",";","uniform","int","u_p_cyclic",";","uniform","float","u_p_fade_in",";","uniform","float","u_p_fade_out",";","uniform","float","u_p_nfactor",";","uniform","float","u_p_gravity",";","uniform","float","u_p_mass",";","uniform","vec3","u_p_wind",";","uniform","float","u_p_max_lifetime",";","uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";","uniform","vec3","u_camera_eye",";","uniform","float","u_p_size",";"]},{type:"condition",parts:[{type:"if",expression:["!","WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["varying","float","kS",";","varying","vec3","jF",";","varying","vec2","a",";","varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","cJ",";"]}]}}]},{type:"include",file:"particles.glslv"},{type:"textline",tokens:["float","ks","(","vec2","kq",",","vec2","kr",")","{","return","(","atan","(","kr",".","y",",","kr",".","x",")","-","atan","(","kq",".","y",",","kq",".","x",")",")",";","}","void","main","(",")","{","vec4","kt",",","ku",",","kv",";","mat4","kw",";","float","kx",";","kT","ky",";","ky","=","lE","(",")",";","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")","{","kx","=","ky",".","e",";","kw","=","N","(","ky",".","b",",","u_view_matrix",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_XY",")","{","kx","=","ky",".","e",";","kw","=","x","(",")",";","kw","[","3","]","=","vec4","(","ky",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_YZ",")","{","kx","=","ky",".","e",";","kw","=","B","(","radians","(","90.0",")",")",";","kw","[","3","]","=","vec4","(","ky",".","b",",","1.0",")",";","}","else","if","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_ZX",")","{","kx","=","ks","(","vec2","(","EPSILON",",","1.0",")",",","vec2","(","a_normal",".","x",",","a_normal",".","z",")",")","+","ky",".","e",";","kw","=","z","(","radians","(","-","90.0",")",")",";","kw","[","3","]","=","vec4","(","ky",".","b",",","1.0",")",";","}","kt","=","vec4","(","a_p_bb_vertex","*","2.0","*","ky",".","a","*","u_p_size",",","0.0",",","1.0",")",";","kt","=","kw","*","D","(","kx",")","*","kt",";","ku","=","u_view_matrix","*","kt",";","kv","=","u_proj_matrix","*","ku",";","gl_Position","=","kv",";","kS","=","ky",".","c",";","jF","=","ky",".","d",";","a","=","a_p_bb_vertex","+","0.5",";","jC","=","kt",".","xyz",";","jB","=","u_camera_eye","-","kt",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["cJ","=","ku",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["procedural_skydome.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","vec3","u_sky_color",";","uniform","vec3","u_sun_direction",";","uniform","float","u_rayleigh_brightness",";","uniform","float","u_mie_brightness",";","uniform","float","u_spot_brightness",";","uniform","float","u_scatter_strength",";","uniform","float","u_rayleigh_strength",";","uniform","float","u_mie_strength",";","uniform","float","u_rayleigh_collection_power",";","uniform","float","u_mie_collection_power",";","uniform","float","u_mie_distribution",";","varying","vec3","lF",";","const","float","lG","=","0.99",";","const","float","lH","=","1.8",";","const","int","lI","=","8",";","float","lO","(","vec3","lJ",",","vec3","lK",")","{","float","lL",",","lM",",","lN",";","lL","=","dot","(","lK",",","lK",")",";","lM","=","2.0","*","dot","(","lK",",","lJ",")",";","lN","=","dot","(","lJ",",","lJ",")","-","1.0",";","lL","=","lM","*","lM","-","4.0","*","lL","*","lN",";","lL","=","sqrt","(","lL",")",";","lM","=","(","-","lM","-","lL",")","/","2.0",";","lL","=","lN","/","lM",";","return","lL",";","}","float","lV","(","float","lP",",","float","lQ",")","{","float","lR",",","lS",",","lT",",","lU",";","lR","=","3.0","*","(","1.0","-","lQ","*","lQ",")",";","lS","=","2.0","*","(","2.0","+","lQ","*","lQ",")",";","lT","=","1.0","+","lP","*","lP",";","lU","=","pow","(","1.0","+","lQ","*","lQ","-","2.0","*","lQ","*","lP",",","1.5",")",";","lU","=","max","(","lU",",","0.00001",")",";","return","(","lR","/","lS",")","*","(","lT","/","lU",")",";","}","float","ma","(","vec3","lW",",","vec3","lX",",","float","lY",")","{","vec3","lZ",";","float","l_",";","l_","=","dot","(","lX",",","-","lW",")",";","if","(","l_","<","0.0",")","{","return","1.0",";","}","lZ","=","lW","+","l_","*","lX",";","if","(","length","(","lZ",")","<","lY",")","{","return","0.0",";","}","else","if","(","length","(","lZ",")",">=","lY",")","{","lZ","=","normalize","(","lZ",")","*","lY","-","lW",";","l_","=","acos","(","dot","(","normalize","(","lZ",")",",","lX",")",")",";","return","smoothstep","(","0.0",",","1.0",",","pow","(","l_","*","2.0",",","3.0",")",")",";","}","else","return","1.0",";","}","vec3","me","(","float","mb",",","vec3","mc",",","float","md",")","{","return","mc","-","mc","*","pow","(","u_sky_color",",","vec3","(","md","/","mb",")",")",";","}","void","main","(",")","{","float","mf",",","mg",",","mh",",","mi",",","mj",",","mk",",","ml",",","mm",",","mn",";","vec3","mo",",","mp",",","mq",",","mr",",","ms",",","mt",",","mu",";","mo","=","normalize","(","lF",")",";","mp","=","u_sun_direction",";","mf","=","dot","(","mo",",","mp",")",";","mg","=","lV","(","mf",",","-","0.01",")","*","u_rayleigh_brightness","*","mp",".","y",";","mh","=","lV","(","mf","-","0.5",",","u_mie_distribution",")","*","u_mie_brightness","*","(","1.0","-","mp",".","y",")",";","mf","=","smoothstep","(","0.0",",","100.0",",","lV","(","mf",",","0.9995",")",")","*","u_spot_brightness",";","mq","=","vec3","(","0.0",",","lG",",","0.0",")",";","mi","=","lO","(","mq",",","mo",")",";","mj","=","mi","/","float","(","lI",")",";","mk","=","ma","(","mq",",","mo",",","lG","-","0.3",")",";","mr","=","vec3","(","0.0",",","0.0",",","0.0",")",";","ms","=","vec3","(","0.0",",","0.0",",","0.0",")",";","for","(","int","mv","=","0",";","mv","<","lI",";","mv","++",")","{","ml","=","mj","*","float","(","mv",")",";","mt","=","mq","+","mo","*","ml",";","mm","=","ma","(","mt",",","mp",",","lG","-","0.2",")",";","mn","=","lO","(","mt",",","mp",")",";","mu","=","me","(","mn",",","vec3","(","lH",")",",","u_scatter_strength",")","*","mm",";","mr","+=","me","(","sqrt","(","ml",")",",","u_sky_color","*","mu",",","u_rayleigh_strength",")",";","ms","+=","me","(","ml",",","mu",",","u_mie_strength",")",";","}","mr","=","mr","*","mk","*","pow","(","mi",",","u_rayleigh_collection_power",")","/","float","(","lI",")",";","ms","=","(","ms","*","mk","*","pow","(","mi",",","u_mie_collection_power",")",")","/","float","(","lI",")",";","ms","=","vec3","(","mf","*","ms","+","mh","*","ms","+","mg","*","mr",")",";","fX","(","ms",")",";","gl_FragColor","=","vec4","(","ms",",","1.0",")",";","}"]}]},exports["procedural_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_cube_view_matrix",";","varying","vec3","lF",";","void","main","(",")","{","vec4","kq",",","kr",";","kq","=","vec4","(","a_position",".","xy",",","0.999999",",","1.0",")",";","kr","=","u_cube_view_matrix","*","kq",";","lF","=","kr",".","xyz",";","gl_Position","=","kq",";","}"]}]},exports["special_lens_flares.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",";","kq","=","texture2D","(","u_sampler",",","a",")",";","fX","(","kq",".","rgb",")",";","f_","(","kq",".","rgb",",","kq",".","a",")",";","gl_FragColor","=","kq",";","}"]}]},exports["special_lens_flares.glslv"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"define",name:"LIGHT_INDEX",tokens:["0"]},{type:"textline",tokens:["attribute","float","a_lf_dist",";","attribute","vec2","a_lf_bb_vertex",";","attribute","vec2","a_texcoord",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","varying","vec2","a",";","void","main","(",")","{","vec2","kq",";","float","kr",";","vec4","ks",";","vec3","kt",";","a","=","a_texcoord",";","kt","=","normalize","(","u_light_directions","[","LIGHT_INDEX","]",")",";","ks","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","kt",",","0.0",")",";","ks",".","x","/=","ks",".","w",";","ks",".","y","/=","ks",".","w",";","ks","+=","99999.0","*","step","(","ks",".","z",",","0.0",")",";","ks","+=","100.0","*","(","step","(","1.0",",","abs","(","ks",".","x",")",")","+","step","(","1.0",",","abs","(","ks",".","y",")",")",")",";","ks",".","x","=","-","a_lf_dist","*","ks",".","x",";","ks",".","y","=","-","a_lf_dist","*","ks",".","y",";","kr","=","u_proj_matrix","[","1","]","[","1","]","/","u_proj_matrix","[","0","]","[","0","]",";","kq","=","vec2","(","a_lf_bb_vertex",".","x","/","kr",",","a_lf_bb_vertex",".","y",")",";","if","(","a_lf_dist",">","-","0.999",")","{","const","float","ku","=","1.9",";","kq","*=","(","1.0","+","ku","*","length","(","ks",".","xy",")",")",";","}","gl_Position","=","vec4","(","ks",".","xy","+","kq",",","0.999999",",","1.0",")",";","}"]}]},exports["special_skydome.glslf"] = {type:"group",parts:[{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"define",name:"INV_PI",tokens:["0.318309886"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["USE_SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_sky",";"]}]}},{type:"elif",expression:["USE_SKY_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_horizon_color",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye_frag",";","uniform","vec3","u_sun_intensity",";","uniform","float","u_environment_energy",";","uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lF",";"]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_BLEND","&&","USE_SKY_PAPER"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kq",";","float","kr",",","ks",";","vec3","kt",",","ku",",","kv",",","kw",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS","||","!","USE_SKY_PAPER","&&","USE_SKY_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","normalize","(","lF",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["kt","=","textureCube","(","u_sky",",","lF",")",".","rgb",";"]}]}},{type:"elif",expression:["USE_SKY_BLEND"],group:{type:"group",parts:[{type:"textline",tokens:[";"]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_PAPER"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_SKY_REAL"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","abs","(","a",".","y",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kr","=","(","a",".","y","+","1.0",")","*","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ks","=","acos","(","ku",".","y",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_REAL"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","abs","(","ks","*","INV_PI","-","0.5",")","*","2.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kr","=","1.0","-","ks","*","INV_PI",";"]}]}}]}]}}]},{type:"textline",tokens:["kv","=","u_horizon_color",";","kw","=","u_zenith_color",";","fX","(","kv",")",";","fX","(","kw",")",";","kt","=","mix","(","kv",",","kw",",","kr",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kt","=","u_horizon_color",";","fX","(","kt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS","&&","!","DISABLE_FOG","&&","!","REFLECTION_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["fV","(","kt",".","rgb",")",";","ks","=","u_camera_eye_frag",".","y","-","WATER_LEVEL",";","ks","=","min","(","-","ks","*","0.03",",","0.8",")",";","kr","=","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",";","kv","=","vec3","(","0.0",")",";","kq","=","u_underwater_fog_color_density",";","kq",".","rgb","=","mix","(","kq",".","rgb",",","kv",",","min","(","-","ku",".","y","+","ks",",","1.0",")",")","*","kr",";","kr","=","clamp","(","sign","(","ku",".","y","-","0.05","*","ks",")",",","0.0",",","1.0",")",";","kt","=","mix","(","kq",".","rgb",",","kt",",","kr",")",";","fX","(","kt",".","rgb",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kt",",","1.0",")",";","}"]}]},exports["special_skydome.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position",";","uniform","mat4","u_sky_vp_inverse",";","varying","vec3","lF",";"]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_BLEND","&&","USE_SKY_PAPER"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kq",",","kr",";","kq","=","vec4","(","a_position",".","xy",",","0.9999999",",","1.0",")",";","kr","=","u_sky_vp_inverse","*","kq",";","lF","=","kr",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["USE_SKY_BLEND","&&","USE_SKY_PAPER"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_position",".","xy",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","kq",";","}"]}]},exports["special_water.glslf"] = {type:"group",parts:[{type:"var",name:"ABSORB",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"SSS_STRENGTH",tokens:["6.0"]},{type:"var",name:"SSS_WIDTH",tokens:["0.0"]},{type:"include",file:"std_enums.glsl"},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"fog.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"lighting.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"math.glslv"},{type:"define",name:"REFL_BUMP",tokens:["0.001"]},{type:"define",name:"REFR_BUMP",tokens:["0.0005"]},{type:"textline",tokens:["uniform","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_horizon_color",";","uniform","samplerCube","u_sky_texture",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["uniform","float","u_environment_energy",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_light_positions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_directions","[","NUM_LIGHTS","]",";","uniform","vec3","u_light_color_intensities","[","NUM_LIGHTS","]",";","uniform","vec4","u_light_factors","[","NUM_LFACTORS","]",";"]}]}}]},{type:"textline",tokens:["uniform","vec3","u_sun_intensity",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE","||","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_cam_water_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_fog_color_density",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_cube_fog",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_refractmap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_reflectmap",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_scene_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_foam",";"]}]}}]},{type:"textline",tokens:["uniform","vec4","u_diffuse_color",";","uniform","vec2","u_diffuse_params",";","uniform","float","u_diffuse_intensity",";","uniform","float","u_ambient",";","uniform","vec4","u_fresnel_params",";","uniform","vec3","u_specular_color",";","uniform","vec3","u_specular_params",";","uniform","vec3","u_shallow_water_col",";","uniform","vec3","u_shore_water_col",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_norm_uv_velocity",";","uniform","vec2","u_normalmap0_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap1_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap2_scale",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_mirror_factor",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_reflect_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_water_shallow_col_fac",";","uniform","float","u_water_shore_col_fac",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_foam_factor",";","uniform","vec2","u_foam_uv_freq",";","uniform","vec2","u_foam_mag",";","uniform","vec2","u_foam_scale",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_refr_bump",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","kq","=","1.0",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["(","NUM_NORMALMAPS",">","0","||","FOAM",")","&&","!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jE",";","varying","vec3","lG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"include",file:"environment.glslf"}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE","&&","SHORE_SMOOTHING","&&","USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"include",file:"refraction.glslf"}]}}]},{type:"textline",tokens:["vec3","lV","(","in","vec2","lK",",","in","vec3","lL",",","in","vec3","lM",",","in","vec3","lN",",","out","float","lO",")","{","float","lP",",","lQ",",","lR",";","vec2","lS",";","vec3","lT",",","lU",";","lT","=","reflect","(","-","lM",",","lL",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lS","=","lK",".","xy","+","lL",".","xz","*","REFL_BUMP","/","jG",";","lO","=","u_reflect_factor",";","if","(","u_cam_water_depth","<","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["lU","=","u_underwater_fog_color_density",".","rgb",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lU","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"textline",tokens:["lP","=","dot","(","lM",",","lL",")",";","lO","*=","max","(","1.0","-","1.0","/","lP",",","1.0",")",";","}","else","{","lU","=","texture2D","(","u_reflectmap",",","lS",")",".","rgb",";","fV","(","lU",")",";","}"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["lO","=","u_mirror_factor",";","lU","=","lN","*","textureCube","(","u_mirrormap",",","lT",")",".","rgb",";","fV","(","lU",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lO","=","u_reflect_factor",";","lU","=","lN","*","vec3","(","0.3",",","0.5",",","1.0",")",";","fV","(","lU",")",";"]}]}}]},{type:"textline",tokens:["lT","=","normalize","(","lT","+","lM",")",";","lP","=","1.0","-","dot","(","lM",",","lT",")",";","lQ","=","u_fresnel_params","[","3","]",";","lR","=","u_fresnel_params","[","2","]",";","lQ","=","lQ","+","(","1.0","-","lQ",")","*","pow","(","lP",",","lR",")",";","lO","=","min","(","lO","*","lQ",",","1.0",")",";","return","lU",";","}","void","main","(",")","{","vec4","lW",";","vec2","lX",",","lY",",","lZ",";","float","l_",",","ma",",","mb",",","mc",",","md",",","me",";","vec3","mf",",","mg",",","mh",",","mi",",","mj",",","mk",",","ml",";","mat3","mm",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mm","=","mat3","(","jE",",","lG",",","jD",")",";"]}]}}]},{type:"textline",tokens:["mf","=","normalize","(","jD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mm","=","mat3","(","1.0",",","0.0",",","0.0",",","0.0",",","0.0",",","-","1.0",",","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"textline",tokens:["mf","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","jC",".","y","-","WATER_LEVEL",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["lX","=","vec2","(","lH",".","x",",","-","lH",".","z",")","+","0.5",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lX","=","vec2","(","jC",".","x",",","-","jC",".","z",")","+","0.5",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lX","=","a",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["mg","=","vec3","(","0.0",")",";","mh","=","texture2D","(","u_normalmap0",",","lX","*","u_normalmap0_scale","+","vec2","(","0.3",",","0.5",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","mg","+=","mh",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["mi","=","vec3","(","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["NORM_FOAM0"],group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mh",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["mh","=","texture2D","(","u_normalmap0",",","lX","*","u_normalmap1_scale","+","vec2","(","-","0.3",",","0.7",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","mg","+=","mh",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM1"],group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mh",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["mh","=","texture2D","(","u_normalmap0",",","lX","*","u_normalmap2_scale","+","vec2","(","0.0",",","1.1",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","mg","+=","mh",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM2"],group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mh",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["mh","=","texture2D","(","u_normalmap0",",","lX","*","u_normalmap3_scale","+","vec2","(","-","0.66",",","-","0.3",")","*","u_water_norm_uv_velocity","*","u_time",")",".","xyz","-","0.5",";","mg","+=","mh",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["NORM_FOAM3"],group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mh",";"]}]}}]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["mh","=","mm","*","mi",";","if","(","!","g","(","mh",",","vec3","(","0.0",")",")",")","mh","=","normalize","(","mh",")",";","mi","=","mix","(","mf",",","mh",",","0.2",")",";","mi","=","normalize","(","mi",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["mf","=","mix","(","mf",",","normalize","(","mm","*","mg",")",",","0.3",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mf","=","mix","(","mf",",","normalize","(","mm","*","mg",")",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["mf","=","normalize","(","mf",")",";"]}]}}]},{type:"textline",tokens:["mh","=","normalize","(","jB",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lY","=","cI",".","xy","/","cI",".","z",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["ma","=","jG","*","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["mb","=","u_diffuse_color",".","a",";","lW","=","texture2DProj","(","u_scene_depth",",","cI",")",";","mc","=","cu","(","lW",")",";","md","=","max","(","mc","-","jG",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lZ","=","lY","+","mf",".","xz","*","u_refr_bump","/","jG",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","ke","(","mc",",","lZ",",","lY",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lZ","=","lY",";","me","=","mc",";"]}]}}]},{type:"textline",tokens:["mc","=","max","(","me","-","jG",",","0.0",")",";","me","=","u_view_max_depth","/","ABSORB","*","mc",";","if","(","u_cam_water_depth","<","0.0",")","mc","=","0.0",";","else","mc","=","min","(","mb","*","me",",","1.0",")",";","me","=","u_view_max_depth","/","ABSORB","*","md",";","mb","=","min","(","15.0","*","mb","*","u_view_max_depth","*","md",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["me","=","u_view_max_depth","/","ABSORB","*","md",";","if","(","u_cam_water_depth",">","0.0",")","mb","=","min","(","mb","*","me",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["mb","*=","min","(","5.0","*","ma",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mb","=","u_diffuse_color",".","a",";"]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["mc","=","1.0","-","mb",";","lZ","=","lY","+","mf",".","xz","*","REFR_BUMP","/","jG",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["mg","=","texture2D","(","u_refractmap",",","lZ",")",".","rgb",";","fV","(","mg",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","pow","(","min","(","lI",".","b","/","u_water_shallow_col_fac",",","1.0",")",",","0.3",")",";","mj","=","mix","(","u_shallow_water_col",",","u_diffuse_color",".","rgb",",","me",")",";","me","=","pow","(","min","(","lI",".","b","/","u_water_shore_col_fac",",","1.0",")",",","0.3",")",";","mj","=","mix","(","u_shore_water_col",",","mj",",","me",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mj","=","u_diffuse_color",".","rgb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","max","(","1.0","-","u_view_max_depth","*","md",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["me","=","1.0","-","mb",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["md","=","max","(","l_","/","WAVES_HEIGHT","+","0.1",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["mk","=","normalize","(","vec3","(","lI",".","r",",","0.0",",","lI",".","g",")",")",";","mk","=","normalize","(","mix","(","vec3","(","0.0",",","1.0",",","0.0",")",",","mk",",","0.8",")",")",";","l_","=","1.25","*","max","(","dot","(","mi",",","mk",")","-","0.2",",","0.0",")",";","l_","+=","max","(","dot","(","mi",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",",","0.0",")",";","me","+=","l_","*","(","1.0","-","lI",".","b",")",";","md","*=","(","1.0","-","0.95","*","pow","(","lI",".","b",",","0.1",")",")",";"]}]}}]},{type:"textline",tokens:["me","+=","md",";","me","=","min","(","u_foam_factor","*","me",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["lW","=","texture2D","(","u_foam",",","u_foam_mag","*","sin","(","u_foam_uv_freq","*","u_time",")","+","lX","*","u_foam_scale",")",";"]}]}}]},{type:"textline",tokens:["l_","=","u_specular_params","[","0","]",";","lZ","=","vec2","(","u_specular_params","[","1","]",",","u_specular_params","[","2","]",")",";","mk","=","l_","*","u_specular_color",";"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT","&&","SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["mi","=","u_environment_energy","*","kp","(","0.0",",","mf",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mi","=","u_environment_energy","*","u_zenith_color",";"]}]}}]},{type:"textline",tokens:["mi","=","u_ambient","*","mi",";","mi","=","mi","+","u_sun_intensity",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["ml","=","lV","(","lY",",","mf",",","mh",",","mi",",","md",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ml","=","lV","(","vec2","(","0.0",")",",","mf",",","mh",",","mi",",","md",")",";"]}]}}]},{type:"textline",tokens:["mj","=","u_diffuse_intensity","*","mj",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","mn","=","jc","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","mj",",","mk",",","jC",",","mf",",","mh",",","lZ",",","u_diffuse_params",",","1.0",",","u_light_positions",",","u_light_directions",",","u_light_color_intensities",",","u_light_factors",",","0.0",",","vec4","(","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","mn","=","jh","(","vec3","(","0.0",")",",","vec3","(","0.0",")",",","mj",")",";"]}]}}]},{type:"textline",tokens:["mj","=","mn",".","a",".","rgb",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","max","(","dot","(","u_sun_direction",",","-","jD",")","+","SSS_WIDTH",",","0.0",")","*","max","(","dot","(","-","mh",",","u_sun_direction",")","-","0.5",",","0.0",")","*","max","(","0.0",",","length","(","u_sun_intensity",")","-","0.1",")",";","l_","=","clamp","(","SSS_STRENGTH","*","l_",",","0.0",",","1.0",")",";","mj","=","mix","(","mj",",","u_shallow_water_col",",","l_",")",";","mj","=","mix","(","mj",",","u_shore_water_col",",","l_",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["mj","=","mix","(","mg",",","mj",",","mc",")",";"]}]}}]},{type:"textline",tokens:["mj","=","mix","(","mj",",","ml",",","md",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["l_","=","mix","(","lW",".","g",",","lW",".","r",",","max","(","4.0","*","(","me","-","0.75",")",",","0.0",")",")",";","l_","=","mix","(","lW",".","b",",","l_",",","max","(","2.0","*","me","-","1.0",",","0.0",")",")",";","l_","=","mix","(","0.0",",","l_",",","me",")",";","mj","=","mix","(","mj",",","mi",",","l_",")",";"]}]}}]},{type:"textline",tokens:["mj","+=","mn",".","b",";"]},{type:"condition",parts:[{type:"if",expression:["!","DISABLE_FOG"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["mk","=","gm","(","u_cube_fog",",","mh",")",";","lW","=","vec4","(","mk",",","u_fog_color_density",".","a",")",";","fV","(","lW",".","rgb",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lW","=","u_fog_color_density",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","gK","(","mj",",","ma",",","u_cam_water_depth",",","u_underwater_fog_color_density",",","clamp","(","length","(","u_sun_intensity",")","+","u_environment_energy",",","0.0",",","1.0",")",")",";","}","else","{","gg","(","mj",",","ma",",","lW",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gg","(","mj",",","ma",",","lW",")",";"]}]}}]}]}}]},{type:"textline",tokens:["fX","(","mj",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["mb","=","max","(","mb",",","mn",".","b",".","r",")",";"]},{type:"condition",parts:[{type:"if",expression:["FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["mb","+=","l_",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","mj",",","mb",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["mf","=","fwidth","(","lJ",")",";","mg","=","smoothstep","(","vec3","(","0.0",")",",","mf","*","kq",",","lJ",")",";","mc","=","min","(","min","(","mg",".","x",",","mg",".","y",")",",","mg",".","z",")",";","mc","=","clamp","(","mc",",","0.0",",","1.0",")",";","mj","=","mix","(","u_wireframe_edge_color",",","mj",",","mc",")",";","mb","=","mix","(","1.0",",","mb",",","mc",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","mj",",","mb",")",";","}"]}]},exports["special_water.glslv"] = {type:"group",parts:[{type:"var",name:"DIR_MIN_SHR_FAC",tokens:["0.0"]},{type:"var",name:"DIR_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_SCALE",tokens:["0.0"]},{type:"var",name:"DIR_NOISE_FREQ",tokens:["0.0"]},{type:"var",name:"DIR_MIN_NOISE_FAC",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_0",tokens:["0.0"]},{type:"var",name:"DST_NOISE_SCALE_1",tokens:["0.0"]},{type:"var",name:"DST_NOISE_FREQ_1",tokens:["0.0"]},{type:"var",name:"DST_MIN_FAC",tokens:["0.0"]},{type:"var",name:"MAX_SHORE_DIST",tokens:["0.0"]},{type:"var",name:"PRECISION",tokens:["mediump"]},{type:"var",name:"SHORE_MAP_CENTER_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_X",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_CENTER_Y",tokens:["0.0"]},{type:"var",name:"SHORE_MAP_SIZE_Y",tokens:["0.0"]},{type:"var",name:"WAVES_HOR_FAC",tokens:["0.0"]},{type:"var",name:"WATER_LEVEL",tokens:["0.0"]},{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"var",name:"WAVES_LENGTH",tokens:["0.0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"include",file:"scale_texcoord.glslv"},{type:"include",file:"procedural.glslf"},{type:"textline",tokens:["attribute","vec3","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_texcoord",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_polyindex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_camera_eye",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_time",";","uniform","vec3","u_wind",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{type:"textline",tokens:["varying","vec3","jB",";","varying","vec3","jC",";"]},{type:"condition",parts:[{type:"if",expression:["!","GENERATED_MESH","&&","(","NUM_NORMALMAPS",">","0","||","FOAM",")"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jD",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","jE",";","varying","vec3","lG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lH",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","cI",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","jG",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec3","lJ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","kv","(","in","vec2","kq",")","{","float","kr",";","vec4","ks",";","vec2","kt",";","kt","=","0.5","+","vec2","(","(","kq",".","x","-","SHORE_MAP_CENTER_X",")","/","SHORE_MAP_SIZE_X",",","-","(","kq",".","y","+","SHORE_MAP_CENTER_Y",")","/","SHORE_MAP_SIZE_Y",")",";","ks","=","texture2D","(","u_shore_dist_map",",","kt",")",";","const","vec2","ku","=","vec2","(","1.0","/","255.0",",","1.0",")",";","kr","=","dot","(","ks",".","ba",",","ku",")",";","kt","=","normalize","(","ks",".","rg","*","2.0","-","1.0",")",";","return","vec3","(","kt",",","kr",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"SMALL_WAVES_FAC",tokens:["0.3"]},{type:"textline",tokens:["void","kH","(","inout","vec3","kw",",","in","float","kx",",","in","vec3","ky",")","{","vec2","kz",",","kA",",","kB",";","float","kC",",","kD",",","kE",",","kF",",","kG",";","kC","=","dx","(","DST_NOISE_SCALE_0","*","(","kw",".","xz","+","DST_NOISE_FREQ_0","*","kx",")",")","*","dx","(","DST_NOISE_SCALE_1","*","(","kw",".","zx","-","DST_NOISE_FREQ_1","*","kx",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["kD","=","WAVES_LENGTH","/","MAX_SHORE_DIST","/","M_PI",";","kE","=","ky",".","b",";","kF","=","sqrt","(","kE",")",";","kD","=","max","(","kE",",","DIR_MIN_SHR_FAC",")","*","sin","(","kF","/","kD","+","DIR_FREQ","*","kx",")",";","kG","=","max","(","dx","(","DIR_NOISE_SCALE","*","(","kw",".","xz","+","DIR_NOISE_FREQ","*","kx",")",")",",","DIR_MIN_NOISE_FAC",")",";","kD","*=","kG",";","kG","=","WAVES_HEIGHT","*","mix","(","kD",",","kC",",","max","(","kF",",","DST_MIN_FAC",")",")",";","kz","=","ky",".","rg",";","kF","=","WAVES_HOR_FAC","*","kD","*","max","(","MAX_SHORE_DIST","/","35.0","*","(","0.05","-","kE",")",",","0.0",")",";","kz","=","kF","*","kz",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kG","=","WAVES_HEIGHT","*","kC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["kA","=","2.0","*","(","kw",".","xz","-","0.1","*","kx",")",";","kB","=","1.3","*","(","kw",".","zx","+","0.03","*","kx",")",";","kD","=","da","(","0.5","*","kA",")",".","x","+","da","(","0.5","*","kB",")",".","x","-","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["kw",".","xz","+=","kz",";","kD","*=","kE",";"]}]}}]},{type:"textline",tokens:["kG","+=","SMALL_WAVES_FAC","*","kD",";"]}]}}]},{type:"textline",tokens:["kw",".","y","+=","kG",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kI",",","lK",";","vec2","lL",";","float","lM",",","lN",",","lO",";","vec3","lP",",","lQ",",","lR",",","lS",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_WIREFRAME"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_polyindex","==","0.0",")","lJ","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","lJ","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","lJ","=","vec3","(","0.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["lP","=","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","abs","(","lP",".","y",")",";","lL","=","u_camera_eye",".","xz","-","mod","(","u_camera_eye",".","xz",",","lM",")",";","lP",".","y","=","WATER_LEVEL",";","lP",".","xz","+=","lL",";"]}]}},{type:"elif",expression:["NUM_NORMALMAPS",">","0","||","FOAM"],group:{type:"group",parts:[{type:"textline",tokens:["a","=","a_texcoord",";"]}]}}]},{type:"textline",tokens:["d","lT","=","av","(","lP",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC","&&","GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["lH","=","lT",".","a",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lI","=","kv","(","lT",".","a",".","xz",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["lN","=","length","(","u_wind",")",";","lO","=","u_time",";","lO","*=","lN",";"]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["lN","=","lM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lN","=","0.1",";"]}]}}]},{type:"textline",tokens:["lP","=","lT",".","a","+","vec3","(","lN",",","0.0",",","0.0",")",";","lQ","=","lT",".","a","+","vec3","(","0.0",",","0.0",",","lN",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lR","=","kv","(","lP",".","xz",")",";","lS","=","kv","(","lQ",".","xz",")",";","kH","(","lP",",","lO",",","lR",")",";","kH","(","lQ",",","lO",",","lS",")",";","kH","(","lT",".","a",",","lO",",","lI",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kH","(","lP",",","lO",",","vec3","(","0.0",")",")",";","kH","(","lQ",",","lO",",","vec3","(","0.0",")",")",";","kH","(","lT",".","a",",","lO",",","vec3","(","0.0",")",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["GENERATED_MESH"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","a_position",".","y","<","0.0",")","{","lT",".","a",".","y","=","WATER_LEVEL","-","1.0",";","lP",".","y","=","lT",".","a",".","y",";","lQ",".","y","=","lT",".","a",".","y",";","}"]}]}}]},{type:"textline",tokens:["lR","=","normalize","(","lP","-","lT",".","a",")",";","lS","=","normalize","(","lQ","-","lT",".","a",")",";","jD","=","normalize","(","cross","(","lS",",","lR",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["NUM_NORMALMAPS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["jE","=","lS",";","lG","=","cross","(","jD",",","jE",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_PARAMS"],group:{type:"group",parts:[{type:"textline",tokens:["lM","=","dot","(","jD",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","lN","=","clamp","(","0.8","-","lM",",","0.0",",","1.0",")",";","jD","=","mix","(","jD",",","vec3","(","0.0",",","1.0",",","0.0",")",",","lN",")",";"]}]}}]}]}}]},{type:"textline",tokens:["jC","=","lT",".","a",";","jB","=","u_camera_eye","-","lT",".","a",";","kI","=","u_view_matrix","*","vec4","(","lT",".","a",",","1.0",")",";","lK","=","u_proj_matrix","*","kI",";"]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["lO","=","lK",".","x",";","lM","=","lK",".","y",";","lN","=","lK",".","w",";","cI",".","x","=","(","lO","+","lN",")","/","2.0",";","cI",".","y","=","(","lM","+","lN",")","/","2.0",";","cI",".","z","=","lN",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHORE_SMOOTHING","||","REFLECTIVE","||","REFRACTIVE","||","!","DISABLE_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["jG","=","-","kI",".","z","/","u_view_max_depth",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","lK",";","}"]}]},exports["wireframe.glslf"] = {type:"group",parts:[{type:"define",name:"WM_OPAQUE_WIREFRAME",tokens:["0"]},{type:"define",name:"WM_TRANSPARENT_WIREFRAME",tokens:["1"]},{type:"define",name:"WM_FRONT_BACK_VIEW",tokens:["2"]},{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","int","u_wireframe_mode",";","uniform","vec3","u_wireframe_edge_color",";"]}]}}]},{type:"textline",tokens:["varying","vec3","lJ",";","const","float","kq","=","1.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE_DYNAMIC"],group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kr","=","vec3","(","1.0",",","0.05",",","0.05",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","kr","=","vec3","(","0.05",",","0.05",",","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["const","vec3","ks","=","vec3","(","0.4",",","0.4",",","1.0",")",";","const","vec3","kt","=","vec3","(","1.0",",","0.4",",","0.4",")",";","const","vec3","ku","=","vec3","(","1.0",",","1.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","float","kv",",","kw",";","vec3","kx",",","ky",";","kx","=","vec3","(","0.0",")",";","kv","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","sign","(","lJ","-","vec3","(","0.02","*","kq",")",")",";","if","(","ky",".","x","<","0.0","||","ky",".","y","<","0.0","||","ky",".","z","<","0.0",")","{","kx","=","kr",";","kv","=","1.0",";","}","else","discard",";"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","0"],group:{type:"group",parts:[{type:"textline",tokens:["ky","=","sign","(","lJ","-","vec3","(","0.02","*","kq",")",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","if","(","ky",".","x","<","0.0","||","ky",".","y","<","0.0","||","ky",".","z","<","0.0",")","kx","=","u_wireframe_edge_color",";","else","kx","=","ku",";","kv","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","if","(","ky",".","x","<","0.0","||","ky",".","y","<","0.0","||","ky",".","z","<","0.0",")","kv","=","1.0",";","else","kv","=","0.0",";","kx","=","u_wireframe_edge_color",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","ky",".","x","<","0.0","||","ky",".","y","<","0.0","||","ky",".","z","<","0.0",")","kx","=","u_wireframe_edge_color",";","else","if","(","gl_FrontFacing",")","kx","=","ks",";","else","kx","=","kt",";","kv","=","1.0",";","}"]}]}},{type:"elif",expression:["WIREFRAME_QUALITY","==","1"],group:{type:"group",parts:[{type:"extension",tokens:["GL_OES_standard_derivatives",":","enable"]},{type:"textline",tokens:["ky","=","fwidth","(","lJ",")",";","ky","=","smoothstep","(","vec3","(","0.0",")",",","ky","*","kq",",","lJ",")",";","kw","=","min","(","min","(","ky",".","x",",","ky",".","y",")",",","ky",".","z",")",";","kw","=","clamp","(","kw",",","0.0",",","1.0",")",";","if","(","u_wireframe_mode","==","WM_OPAQUE_WIREFRAME",")","{","kx","=","vec3","(","mix","(","u_wireframe_edge_color",",","ku",",","kw",")",")",";","kv","=","1.0",";","}","else","if","(","u_wireframe_mode","==","WM_TRANSPARENT_WIREFRAME",")","{","kx","=","u_wireframe_edge_color",";","kv","=","mix","(","1.0",",","0.0",",","kw",")",";","}","else","if","(","u_wireframe_mode","==","WM_FRONT_BACK_VIEW",")","{","if","(","gl_FrontFacing",")","kx","=","mix","(","u_wireframe_edge_color",",","ks",",","kw",")",";","else","kx","=","mix","(","u_wireframe_edge_color",",","kt",",","kw",")",";","kv","=","1.0",";","}"]}]}}]},{type:"textline",tokens:["fX","(","kx",")",";"]},{type:"condition",parts:[{type:"if",expression:["ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["f_","(","kx",",","kv",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","vec4","(","kx",",","kv",")",";","}"]}]},exports["wireframe.glslv"] = {type:"group",parts:[{type:"var",name:"AU_QUALIFIER",tokens:["uniform"]},{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"var",name:"MAX_BONES",tokens:["0"]},{type:"include",file:"math.glslv"},{type:"include",file:"to_world.glslv"},{type:"textline",tokens:["attribute","vec3","a_position",";","attribute","vec3","a_normal",";","attribute","float","a_polyindex",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","float","a_bending_col_main",";"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_bending_col_detail",";","AU_QUALIFIER","float","au_detail_bending_amp",";","AU_QUALIFIER","float","au_branch_bending_amp",";","AU_QUALIFIER","float","au_detail_bending_freq",";"]}]}}]}]}}]},{type:"textline",tokens:["AU_QUALIFIER","float","au_wind_bending_amp",";","AU_QUALIFIER","float","au_wind_bending_freq",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_emitter_center",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec3","a_position_next",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["attribute","vec4","a_influence",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["STATIC_BATCH"],group:{type:"group",parts:[{type:"textline",tokens:["const","mat4","u_model_matrix","=","mat4","(","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["uniform","mat4","u_model_matrix",";"]}]}}]},{type:"textline",tokens:["uniform","mat4","u_proj_matrix",";","uniform","mat4","u_view_matrix",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_wind",";","uniform","PRECISION","float","u_time",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_jitter_amp",";","uniform","float","u_jitter_freq",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec3","u_camera_eye",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","float","u_va_frame_factor",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsb","[","MAX_BONES","]",";","uniform","vec4","u_transb","[","MAX_BONES","]",";","uniform","vec4","u_arm_rel_trans",";","uniform","vec4","u_arm_rel_quat",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_quatsa","[","MAX_BONES","]",";","uniform","vec4","u_transa","[","MAX_BONES","]",";","uniform","float","u_frame_factor",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_grass_map_depth",";","uniform","sampler2D","u_grass_map_color",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_grass_map_dim",";","uniform","float","u_grass_size",";","uniform","float","u_scale_threshold",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec3","lJ",";"]},{type:"condition",parts:[{type:"if",expression:["!","DEBUG_SPHERE"],group:{type:"group",parts:[{type:"include",file:"skin.glslv"},{type:"include",file:"wind_bending.glslv"},{type:"include",file:"dynamic_grass.glslv"}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","kq",";","mat4","kr",";","vec3","ks",",","kt",",","ku",",","kv",",","kw",";","if","(","a_polyindex","==","0.0",")","lJ","=","vec3","(","1.0",",","0.0",",","0.0",")",";","else","if","(","a_polyindex","==","1.0",")","lJ","=","vec3","(","0.0",",","1.0",",","0.0",")",";","else","if","(","a_polyindex","==","2.0",")","lJ","=","vec3","(","0.0",",","0.0",",","1.0",")",";","ks","=","a_position",";","kt","=","a_normal",";"]},{type:"condition",parts:[{type:"if",expression:["DEBUG_SPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["d","kx","=","av","(","ks",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["VERTEX_ANIM"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","mix","(","ks",",","a_position_next",",","u_va_frame_factor",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","vec3","(","0.0",")",";","kv","=","vec3","(","0.0",")",";","bv","(","ks",",","ku",",","kv",",","kt",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","||","DYNAMIC_GRASS","||","BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["ku","=","au_center_pos",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ku","=","vec3","(","0.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["d","kx","=","fE","(","ks",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","ku",",","u_grass_map_depth",",","u_grass_map_color",",","u_grass_map_dim",",","u_grass_size",",","u_camera_eye",",","u_camera_quat",",","u_view_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["kv","=","(","u_model_matrix","*","vec4","(","ku",",","1.0",")",")",".","xyz",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","ao","(","u_camera_eye",",","kv",",","u_view_matrix",",","u_model_matrix",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["kr","=","ai","(","u_camera_eye",",","kv",",","u_view_matrix",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND","&&","BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["kw","=","(","u_model_matrix","*","vec4","(","ku",",","1.0",")",")",".","xyz",";","kr","=","kr","*","aa","(","u_wind",",","u_time",",","u_jitter_amp",",","u_jitter_freq",",","kw",")",";"]}]}}]},{type:"textline",tokens:["d","kx","=","av","(","ks","-","ku",",","ku",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","kr",")",";","kx",".","b","=","kv",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["d","kx","=","av","(","ks",",","ku",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","u_model_matrix",")",";"]}]}}]}]}}]},{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cj","(","kx",".","a",",","kx",".","b",",","kt",")",";"]}]}}]}]}}]},{type:"textline",tokens:["kq","=","u_view_matrix","*","vec4","(","kx",".","a",",","1.0",")",";","gl_Position","=","u_proj_matrix","*","kq",";","}"]}]},exports["postprocessing/anaglyph.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler_left",";","uniform","sampler2D","u_sampler_right",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",",","kr",";","kq","=","texture2D","(","u_sampler_left",",","a",")",";","kr","=","texture2D","(","u_sampler_right",",","a",")",";","gl_FragColor","=","vec4","(","kq","[","0","]",",","kr","[","1","]",",","kr","[","2","]",",","kq","[","3","]","+","kr","[","3","]",")",";","}"]}]},exports["postprocessing/antialiasing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"AA_METHOD_PASS",tokens:["1"]},{type:"define",name:"AA_METHOD_FXAA_LIGHT",tokens:["2"]},{type:"define",name:"AA_METHOD_FXAA_QUALITY",tokens:["3"]},{type:"define",name:"FXAA_REDUCE_MIN",tokens:["(","1.0","/","128.0",")"]},{type:"define",name:"FXAA_REDUCE_MUL",tokens:["(","1.0","/","8.0",")"]},{type:"define",name:"FXAA_SPAN_MAX",tokens:["8.0"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","vec4","kt","(","float","kq",",","float","kr",")","{","vec2","ks",";","ks","=","a","+","vec2","(","kq",",","kr",")","*","u_texel_size",";","return","texture2D","(","u_color",",","ks",")",";","}","float","kx","(","vec4","ku",")","{","float","kv",";","vec3","kw",";","kw","=","vec3","(","0.299",",","0.587",",","0.114",")",";","kv","=","dot","(","ku",".","rgb",",","kw",")",";","return","kv",";","}","vec4","lL","(",")","{","vec2","ky",";","float","kz",",","kA",",","kB",",","kC",",","kD",",","kE",";","vec4","kF",",","kG",",","kH",",","kI",",","lK",";","kF","=","kt","(","-","1.0",",","-","1.0",")",";","kG","=","kt","(","1.0",",","-","1.0",")",";","kH","=","kt","(","-","1.0",",","1.0",")",";","kI","=","kt","(","1.0",",","1.0",")",";","lK","=","kt","(","0.0",",","0.0",")",";","kz","=","kx","(","kF",")",";","kA","=","kx","(","kG",")",";","kB","=","kx","(","kH",")",";","kC","=","kx","(","kI",")",";","kD","=","kx","(","lK",")",";","kE","=","min","(","kD",",","min","(","min","(","kz",",","kA",")",",","min","(","kB",",","kC",")",")",")",";","kD","=","max","(","kD",",","max","(","max","(","kz",",","kA",")",",","max","(","kB",",","kC",")",")",")",";","ky",".","x","=","-","(","(","kz","+","kA",")","-","(","kB","+","kC",")",")",";","ky",".","y","=","(","(","kz","+","kB",")","-","(","kA","+","kC",")",")",";","kz","=","max","(","(","kz","+","kA","+","kB","+","kC",")","*","(","0.25","*","FXAA_REDUCE_MUL",")",",","FXAA_REDUCE_MIN",")",";","kA","=","1.0","/","(","min","(","abs","(","ky",".","x",")",",","abs","(","ky",".","y",")",")","+","kz",")",";","ky","=","min","(","vec2","(","FXAA_SPAN_MAX",",","FXAA_SPAN_MAX",")",",","max","(","vec2","(","-","FXAA_SPAN_MAX",",","-","FXAA_SPAN_MAX",")",",","ky","*","kA",")",")","*","u_texel_size",";","kF","=","0.5","*","(","texture2D","(","u_color",",","a","+","ky","*","(","1.0","/","3.0","-","0.5",")",")","+","texture2D","(","u_color",",","a","+","ky","*","(","2.0","/","3.0","-","0.5",")",")",")",";","kG","=","kF","*","0.5","+","0.25","*","(","texture2D","(","u_color",",","a","+","ky","*","-","0.5",")","+","texture2D","(","u_color",",","a","+","ky","*","0.5",")",")",";","kB","=","kx","(","kG",")",";","if","(","(","kB","<","kE",")","||","(","kB",">","kD",")",")","return","kF",";","else","return","kG",";","}"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD",tokens:["(","1.0","/","6.0",")"]},{type:"define",name:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",tokens:["(","1.0","/","12.0",")"]},{type:"define",name:"FXAA_QUALITY_SUBPIX",tokens:["(","3.0","/","4.0",")"]},{type:"textline",tokens:["vec4","mp","(",")","{","bool","lM",",","lN",",","lO",",","lP",",","lQ",";","float","lR",",","lS",",","lT",",","lU",",","lV",",","lW",",","lX",",","lY",",","lZ",",","l_",",","ma",",","mb",",","mc",",","md",",","me",";","vec4","mf",",","mg",",","mh",",","mi",",","mj",";","vec2","mk",",","ml",",","mm",",","mn",",","mo",";","mk",".","x","=","a",".","x",";","mk",".","y","=","a",".","y",";","mf","=","texture2D","(","u_color",",","mk",")",";","mg","=","kt","(","0.0",",","1.0",")",";","mh","=","kt","(","1.0",",","0.0",")",";","mi","=","kt","(","0.0",",","-","1.0",")",";","mj","=","kt","(","-","1.0",",","0.0",")",";","lR","=","kx","(","mg",")",";","lS","=","kx","(","mh",")",";","lT","=","kx","(","mi",")",";","lU","=","kx","(","mj",")",";","lV","=","kx","(","mf",")",";","lW","=","max","(","lR",",","lV",")",";","lX","=","min","(","lR",",","lV",")",";","lW","=","max","(","lS",",","lW",")",";","lX","=","min","(","lS",",","lX",")",";","lY","=","max","(","lT",",","lU",")",";","lZ","=","min","(","lT",",","lU",")",";","lY","=","max","(","lY",",","lW",")",";","lW","=","min","(","lZ",",","lX",")",";","lZ","=","lY","*","FXAA_QUALITY_EDGE_THRESHOLD",";","lX","=","lY","-","lW",";","lY","=","max","(","FXAA_QUALITY_EDGE_THRESHOLD_MIN",",","lZ",")",";","lM","=","lX","<","lY",";","if","(","lM",")","return","mf",";","mg","=","kt","(","-","1.0",",","-","1.0",")",";","mh","=","kt","(","1.0",",","1.0",")",";","mi","=","kt","(","1.0",",","-","1.0",")",";","mj","=","kt","(","-","1.0",",","1.0",")",";","lW","=","kx","(","mg",")",";","lZ","=","kx","(","mh",")",";","lY","=","kx","(","mi",")",";","l_","=","kx","(","mj",")",";","ma","=","lT","+","lR",";","mb","=","lU","+","lS",";","lX","=","1.0","/","lX",";","mc","=","ma","+","mb",";","ma","=","(","-","2.0","*","lV",")","+","ma",";","mb","=","(","-","2.0","*","lV",")","+","mb",";","md","=","lY","+","lZ",";","lY","=","lW","+","lY",";","me","=","(","-","2.0","*","lS",")","+","md",";","lY","=","(","-","2.0","*","lT",")","+","lY",";","lW","=","lW","+","l_",";","l_","=","l_","+","lZ",";","lZ","=","(","abs","(","ma",")","*","2.0",")","+","abs","(","me",")",";","ma","=","(","abs","(","mb",")","*","2.0",")","+","abs","(","lY",")",";","me","=","(","-","2.0","*","lU",")","+","lW",";","mb","=","(","-","2.0","*","lR",")","+","l_",";","lY","=","abs","(","me",")","+","lZ",";","l_","=","abs","(","mb",")","+","ma",";","me","=","lW","+","md",";","lZ","=","u_texel_size",".","x",";","lM","=","lY",">=","l_",";","mb","=","mc","*","2.0","+","me",";","if","(","!","lM",")","lT","=","lU",";","if","(","!","lM",")","lR","=","lS",";","if","(","lM",")","lZ","=","u_texel_size",".","y",";","ma","=","(","mb","*","(","1.0","/","12.0",")",")","-","lV",";","lW","=","lT","-","lV",";","md","=","lR","-","lV",";","lY","=","lT","+","lV",";","l_","=","lR","+","lV",";","lN","=","abs","(","lW",")",">=","abs","(","md",")",";","mc","=","max","(","abs","(","lW",")",",","abs","(","md",")",")",";","if","(","lN",")","lZ","=","-","lZ",";","me","=","clamp","(","abs","(","ma",")","*","lX",",","0.0",",","1.0",")",";","ml",".","x","=","mk",".","x",";","ml",".","y","=","mk",".","y",";","mm",".","x","=","(","!","lM",")","?","0.0",":","u_texel_size",".","x",";","mm",".","y","=","(","lM",")","?","0.0",":","u_texel_size",".","y",";","if","(","!","lM",")","ml",".","x","+=","lZ","*","0.5",";","if","(","lM",")","ml",".","y","+=","lZ","*","0.5",";","mn",".","x","=","ml",".","x","-","mm",".","x",";","mn",".","y","=","ml",".","y","-","mm",".","y",";","mo",".","x","=","ml",".","x","+","mm",".","x",";","mo",".","y","=","ml",".","y","+","mm",".","y",";","lU","=","(","(","-","2.0",")","*","me",")","+","3.0",";","lS","=","kx","(","texture2D","(","u_color",",","mn",")",")",";","mb","=","me","*","me",";","lT","=","kx","(","texture2D","(","u_color",",","mo",")",")",";","if","(","!","lN",")","lY","=","l_",";","lR","=","mc","*","1.0","/","4.0",";","lW","=","lV","-","lY","*","0.5",";","md","=","lU","*","mb",";","lN","=","lW","<","0.0",";","lS","-=","lY","*","0.5",";","lT","-=","lY","*","0.5",";","lO","=","abs","(","lS",")",">=","lR",";","lP","=","abs","(","lT",")",">=","lR",";","if","(","!","lO",")","mn",".","x","-=","mm",".","x","*","1.5",";","if","(","!","lO",")","mn",".","y","-=","mm",".","y","*","1.5",";","lQ","=","(","!","lO",")","||","(","!","lP",")",";","if","(","!","lP",")","mo",".","x","+=","mm",".","x","*","1.5",";","if","(","!","lP",")","mo",".","y","+=","mm",".","y","*","1.5",";","if","(","lQ",")","{","if","(","!","lO",")","lS","=","kx","(","texture2D","(","u_color",",","mn",".","xy",")",")",";","if","(","!","lP",")","lT","=","kx","(","texture2D","(","u_color",",","mo",".","xy",")",")",";","if","(","!","lO",")","lS","=","lS","-","lY","*","0.5",";","if","(","!","lP",")","lT","=","lT","-","lY","*","0.5",";","lO","=","abs","(","lS",")",">=","lR",";","lP","=","abs","(","lT",")",">=","lR",";","if","(","!","lO",")","mn",".","x","-=","mm",".","x","*","2.0",";","if","(","!","lO",")","mn",".","y","-=","mm",".","y","*","2.0",";","lQ","=","(","!","lO",")","||","(","!","lP",")",";","if","(","!","lP",")","mo",".","x","+=","mm",".","x","*","2.0",";","if","(","!","lP",")","mo",".","y","+=","mm",".","y","*","2.0",";","if","(","lQ",")","{","if","(","!","lO",")","lS","=","kx","(","texture2D","(","u_color",",","mn",".","xy",")",")",";","if","(","!","lP",")","lT","=","kx","(","texture2D","(","u_color",",","mo",".","xy",")",")",";","if","(","!","lO",")","lS","=","lS","-","lY","*","0.5",";","if","(","!","lP",")","lT","=","lT","-","lY","*","0.5",";","lO","=","abs","(","lS",")",">=","lR",";","lP","=","abs","(","lT",")",">=","lR",";","if","(","!","lO",")","mn",".","x","-=","mm",".","x","*","2.0",";","if","(","!","lO",")","mn",".","y","-=","mm",".","y","*","2.0",";","lQ","=","(","!","lO",")","||","(","!","lP",")",";","if","(","!","lP",")","mo",".","x","+=","mm",".","x","*","2.0",";","if","(","!","lP",")","mo",".","y","+=","mm",".","y","*","2.0",";","if","(","lQ",")","{","if","(","!","lO",")","lS","=","kx","(","texture2D","(","u_color",",","mn",".","xy",")",")",";","if","(","!","lP",")","lT","=","kx","(","texture2D","(","u_color",",","mo",".","xy",")",")",";","if","(","!","lO",")","lS","=","lS","-","lY","*","0.5",";","if","(","!","lP",")","lT","=","lT","-","lY","*","0.5",";","lO","=","abs","(","lS",")",">=","lR",";","lP","=","abs","(","lT",")",">=","lR",";","if","(","!","lO",")","mn",".","x","-=","mm",".","x","*","4.0",";","if","(","!","lO",")","mn",".","y","-=","mm",".","y","*","4.0",";","lQ","=","(","!","lO",")","||","(","!","lP",")",";","if","(","!","lP",")","mo",".","x","+=","mm",".","x","*","4.0",";","if","(","!","lP",")","mo",".","y","+=","mm",".","y","*","4.0",";","if","(","lQ",")","{","if","(","!","lO",")","lS","=","kx","(","texture2D","(","u_color",",","mn",".","xy",")",")",";","if","(","!","lP",")","lT","=","kx","(","texture2D","(","u_color",",","mo",".","xy",")",")",";","if","(","!","lO",")","lS","=","lS","-","lY","*","0.5",";","if","(","!","lP",")","lT","=","lT","-","lY","*","0.5",";","lO","=","abs","(","lS",")",">=","lR",";","lP","=","abs","(","lT",")",">=","lR",";","if","(","!","lO",")","mn",".","x","-=","mm",".","x","*","2.0",";","if","(","!","lO",")","mn",".","y","-=","mm",".","y","*","2.0",";","if","(","!","lP",")","mo",".","x","+=","mm",".","x","*","2.0",";","if","(","!","lP",")","mo",".","y","+=","mm",".","y","*","2.0",";","}","}","}","}","ma","=","mk",".","x","-","mn",".","x",";","lX","=","mo",".","x","-","mk",".","x",";","if","(","!","lM",")","ma","=","mk",".","y","-","mn",".","y",";","if","(","!","lM",")","lX","=","mo",".","y","-","mk",".","y",";","lQ","=","(","lS","<","0.0",")","!=","lN",";","me","=","(","lX","+","ma",")",";","lO","=","(","lT","<","0.0",")","!=","lN",";","l_","=","1.0","/","me",";","lP","=","ma","<","lX",";","mc","=","min","(","ma",",","lX",")",";","lN","=","lP","?","lQ",":","lO",";","lV","=","md","*","md",";","lU","=","(","mc","*","(","-","l_",")",")","+","0.5",";","mb","=","lV","*","FXAA_QUALITY_SUBPIX",";","lW","=","lN","?","lU",":","0.0",";","lY","=","max","(","lW",",","mb",")",";","if","(","!","lM",")","mk",".","x","+=","lY","*","lZ",";","if","(","lM",")","mk",".","y","+=","lY","*","lZ",";","return","texture2D","(","u_color",",","mk",")",";","}"]},{type:"define",name:"FXAA_CONSOLE_EDGE_SHARPNESS",tokens:["8.0"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD",tokens:["0.125"]},{type:"define",name:"FXAA_CONSOLE_EDGE_THRESHOLD_MIN",tokens:["0.05"]},{type:"textline",tokens:["void","main","(",")","{"]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_PASS"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_LIGHT"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","lL","(",")",";"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_FXAA_QUALITY"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","mp","(",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","1.0",",","1.0",",","0.0",",","1.0",")","*","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/bloom_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",";","vec2","kr",",","ks",";","kr","=","vec2","(","0.0",",","0.0",")",";","ks","=","u_texel_size",";","kq","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","kq","*","0.0875447373698",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0858112354248",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0858112354248",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0808139781061",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0808139781061",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0731235112908",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0731235112908",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0635705267419",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0635705267419",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0530985673112",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0530985673112",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0426125984122",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0426125984122",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0328565115809",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0328565115809",";","kr","+=","ks",";","gl_FragColor","+=","texture2D","(","u_color",",","a","+","kr",")","*","0.0243407024472",";","gl_FragColor","+=","texture2D","(","u_color",",","a","-","kr",")","*","0.0243407024472",";","gl_FragColor","=","max","(","0.7","*","kq",",","gl_FragColor",")",";","}"]}]},exports["postprocessing/bloom_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_bloom",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",",","kr",";","kq","=","texture2D","(","u_main",",","a",")",";","kr","=","texture2D","(","u_bloom",",","a",")",";","kq","=","kq",";","kq","+=","kr",";","gl_FragColor","=","vec4","(","kq",".","rgb",",","1.0",")",";","}"]}]},exports["postprocessing/compositing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"PI_4",tokens:["0.785398163"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","float","u_brightness",";","uniform","float","u_contrast",";","uniform","float","u_exposure",";","uniform","float","u_saturation",";","varying","vec2","a",";","void","main","(",")","{","float","kq",";","vec3","kr",",","ks",";","vec4","kt",";","kt","=","texture2D","(","u_color",",","a",")",";","kr","=","kt",".","rgb",";","if","(","u_brightness","<","0.0",")","kr","=","kr","*","(","1.0","+","u_brightness",")",";","else","kr","=","kr","+","(","(","1.0","-","kr",")","*","u_brightness",")",";","kr","=","(","kr","-","0.5",")","*","(","tan","(","(","u_contrast","+","1.0",")","*","PI_4",")",")","+","0.5",";","kr","*=","u_exposure",";","ks","=","vec3","(","0.299",",","0.587",",","0.114",")",";","kq","=","dot","(","kr",",","ks",")",";","kr","=","mix","(","vec3","(","kq",")",",","kr",",","u_saturation",")",";","gl_FragColor","=","vec4","(","kr",",","kt",".","a",")",";","}"]}]},exports["postprocessing/depth_pack.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","gl_FragColor","=","cq","(","clamp","(","lQ","(","u_depth",",","a",",","u_camera_range",")",",","0.0",",","0.999999",")",")",";","}"]}]},exports["postprocessing/dof.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sharp",";","uniform","sampler2D","u_blurred",";","uniform","sampler2D","u_depth",";","uniform","float","u_view_max_depth",";","uniform","float","u_dof_dist",";","uniform","float","u_dof_front",";","uniform","float","u_dof_rear",";","uniform","vec2","u_camera_range",";","varying","vec2","a",";","void","main","(",")","{","float","lR",",","lS",";","vec4","lT",",","lU",";","lT","=","texture2D","(","u_sharp",",","a",")",";","if","(","u_dof_dist",">","0.0",")","{","lR","=","lQ","(","u_depth",",","a",",","u_camera_range",")",";","lR","*=","u_view_max_depth",";","if","(","lR","<","u_dof_dist",")","lS","=","(","u_dof_dist","-","lR",")","/","u_dof_front",";","else","lS","=","(","lR","-","u_dof_dist",")","/","u_dof_rear",";","lS","=","clamp","(","lS",",","0.0",",","1.0",")",";","lU","=","texture2D","(","u_blurred",",","a",")",";","gl_FragColor","=","mix","(","lT",",","lU",",","lS",")",";","}","else","gl_FragColor","=","lT",";","}"]}]},exports["postprocessing/edge.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_sampler",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","float","kv","(","float","kq",",","float","kr",",","float","ks",")","{","vec4","kt",";","vec2","ku",";","ku","=","a","+","vec2","(","kq",",","kr",")","*","u_texel_size",";","kt","=","texture2D","(","u_sampler",",","ku",")","*","ks",";","return","cu","(","kt",")",";","}","void","main","(",")","{","float","kw",";","kw","=","(","kv","(","-","1.0",",","-","1.0",",","-","1.0",")","+","kv","(","0.0",",","-","1.0",",","-","1.0",")","+","kv","(","1.0",",","-","1.0",",","-","1.0",")","+","kv","(","-","1.0",",","0.0",",","-","1.0",")","+","kv","(","0.0",",","0.0",",","8.0",")","+","kv","(","1.0",",","0.0",",","-","1.0",")","+","kv","(","-","1.0",",","1.0",",","-","1.0",")","+","kv","(","0.0",",","1.0",",","-","1.0",")","+","kv","(","1.0",",","1.0",",","-","1.0",")",")",";","kw","*=","1000.0",";","gl_FragColor","=","vec4","(","kw",",","kw",",","kw",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"include",file:"pack.glslf"},{type:"var",name:"STEPS_PER_PASS",tokens:["0.0"]},{type:"textline",tokens:["uniform","float","u_time",";","uniform","float","u_radial_blur_step",";","uniform","sampler2D","u_input",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec2","u_camera_range",";"]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["varying","float","lR",";","varying","vec2","lS",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lT",";","void","main","(",")","{","vec4","lU",";","float","lV",",","lW",",","lX",",","lY",",","lZ",";","vec2","l_",",","ma",",","mb",";","l_","=","(","lT",".","xy","-","a",")",";","lV","=","length","(","l_",")",";","l_","=","u_radial_blur_step","*","l_","/","lV",";","lW","=","lV","/","u_radial_blur_step",";","l_","*=","min","(","lW",",","STEPS_PER_PASS",")","/","STEPS_PER_PASS",";","lW","=","max","(","lW",",","STEPS_PER_PASS",")",";","ma","=","a",";","lX","=","0.0",";","for","(","float","mc","=","0.0",";","mc","<","STEPS_PER_PASS",";","mc","+=","1.0",")","{","if","(","mc","<=","lW",")","{"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"textline",tokens:["lY","=","lQ","(","u_input",",","ma",",","u_camera_range",")",";","lX","+=","max","(","(","1.0","-","pow","(","lV",",","0.3",")",")","*","step","(","0.9",",","lY",")",",","0.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lU","=","texture2D","(","u_input",",","ma",")",";","lX","+=","cu","(","lU",")",";"]}]}}]},{type:"textline",tokens:["}","ma","+=","l_",";","}"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["mb","=","a","+","lS",";","lZ","=","da","(","vec2","(","2.5","*","(","mb",".","x",")",",","2.5","*","(","mb",".","y",")","+","1.0","*","u_time",")",")",".","x","+","0.75","*","da","(","vec2","(","5.0","*","(","mb",".","x",")","-","0.66","*","u_time",",","5.0","*","(","mb",".","y",")","+","0.66","*","u_time",")",")",".","x","+","0.5","*","dx","(","vec2","(","7.5","*","(","mb",".","x",")","+","0.33","*","u_time",",","7.5","*","(","mb",".","y",")","-","0.33","*","u_time",")",")",";","lZ","*=","clamp","(","1.2","-","sqrt","(","0.2","*","lV",")",",","0.0",",","1.0",")","*","lR",";","lX","=","max","(","lZ",",","lX",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","cq","(","lX","/","STEPS_PER_PASS",")",";","}"]}]},exports["postprocessing/god_rays.glslv"] = {type:"group",parts:[{type:"include",file:"math.glslv"},{type:"textline",tokens:["attribute","vec2","a_bb_vertex",";","uniform","mat4","u_view_matrix",";","uniform","mat4","u_proj_matrix",";","uniform","vec3","u_sun_direction",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","vec4","u_camera_quat",";","uniform","float","u_cam_water_depth",";","varying","float","lR",";","varying","vec2","lS",";"]}]}}]}]}}]},{type:"textline",tokens:["varying","vec2","a",";","varying","vec4","lT",";","void","main","(",")","{","float","kq",",","kr",";","vec3","ks",";","a","=","a_bb_vertex","+","0.5",";","ks","=","normalize","(","u_sun_direction",")",";","lT","=","u_proj_matrix","*","u_view_matrix","*","vec4","(","ks",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["DEPTH_RGBA","&&","WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","u_cam_water_depth","<","0.0",")","{","lR","=","1.0",";","ks","=","vec3","(","0.0",",","1.0",",","0.0",")",";","ks","=","j","(","u_camera_quat",",","ks",")",";","ks","=","normalize","(","ks",")",";","kq","=","dot","(","ks",",","vec3","(","0.0",",","1.0",",","0.0",")",")",";","kr","=","atan","(","ks",".","x",",","ks",".","z",")",";","lS","=","vec2","(","-","kr",",","acos","(","kq",")",")",";","}","else","{","lR","=","0.0",";","}"]}]}}]},{type:"textline",tokens:["lT",".","xy","=","0.5","*","(","lT",".","xy","/","lT",".","w","+","1.0",")",";","lT","+=","99999.0","*","step","(","lT",".","z",",","0.0",")",";","gl_Position","=","vec4","(","2.0","*","a_bb_vertex",".","xy",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/god_rays_combine.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_god_rays",";","uniform","float","u_god_rays_intensity",";","uniform","vec3","u_sun_intensity",";","varying","vec2","a",";","void","main","(",")","{","float","kq",";","vec3","kr",";","vec4","ks",";","ks","=","texture2D","(","u_main",",","a",")",";","kr","=","clamp","(","u_sun_intensity",",","0.4",",","0.8",")",";","fV","(","ks",".","rgb",")",";","kq","=","cu","(","texture2D","(","u_god_rays",",","a",")",")",";","kr","=","ks",".","rgb","+","u_god_rays_intensity","*","vec3","(","kq",")","*","kr",";","fX","(","kr",")",";","gl_FragColor",".","rgb","=","kr",";","gl_FragColor",".","a","=","ks",".","a",";","}"]}]},exports["postprocessing/lanczos.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",";","kq","=","texture2D","(","u_color",",","a",")","*","0.38026",";","kq","+=","texture2D","(","u_color",",","a","-","u_texel_size",")","*","0.27667",";","kq","+=","texture2D","(","u_color",",","a","+","u_texel_size",")","*","0.27667",";","kq","+=","texture2D","(","u_color",",","a","-","2.0","*","u_texel_size",")","*","0.08074",";","kq","+=","texture2D","(","u_color",",","a","+","2.0","*","u_texel_size",")","*","0.08074",";","kq","+=","texture2D","(","u_color",",","a","-","3.0","*","u_texel_size",")","*","-","0.02612",";","kq","+=","texture2D","(","u_color",",","a","+","3.0","*","u_texel_size",")","*","-","0.02612",";","kq","+=","texture2D","(","u_color",",","a","-","4.0","*","u_texel_size",")","*","-","0.02143",";","kq","+=","texture2D","(","u_color",",","a","+","4.0","*","u_texel_size",")","*","-","0.02143",";","gl_FragColor","=","kq",";","}"]}]},exports["postprocessing/luminance.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","varying","vec2","a",";","void","main","(",")","{","float","kq",";","vec4","kr",";","kr","=","texture2D","(","u_input",",","a",")",";","kq","=","dot","(","kr",".","rgb",",","vec3","(","0.2126",",","0.7152",",","0.0722",")",")",";","gl_FragColor","=","vec4","(","vec3","(","kq",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_av.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_input",";","void","main","(",")","{","float","kq",",","kr",";","kr","=","0.0",";","for","(","float","ks","=","0.025",";","ks","<","1.0",";","ks","+=","0.05",")","for","(","float","kt","=","0.025",";","kt","<","1.0",";","kt","+=","0.05",")","{","kq","=","max","(","texture2D","(","u_input",",","vec2","(","ks",",","kt",")",")",".","r",",","0.01",")",";","kr","+=","log","(","kq",")",";","}","kr","=","exp","(","kr","/","400.0",")",";","gl_FragColor","=","vec4","(","vec3","(","kr",")",",","1.0",")",";","}"]}]},exports["postprocessing/luminance_trunced.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_main",";","uniform","sampler2D","u_luminance",";","uniform","sampler2D","u_average_lum",";","uniform","float","u_bloom_edge_lum",";","varying","vec2","a",";","varying","float","lU",";","void","main","(",")","{","vec4","lV",";","float","lW",",","lX",";","lW","=","texture2D","(","u_average_lum",",","vec2","(","0.5",")",")",".","r",";","lX","=","texture2D","(","u_luminance",",","a",")",".","r",";","lV","=","texture2D","(","u_main",",","a",")",";","lX","=","lX","/","lW",";","lW","=","u_bloom_edge_lum",";","gl_FragColor","=","lV","*","max","(","lX","-","lW",",","0.0",")","*","lU",";","}"]}]},exports["postprocessing/luminance_trunced.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec4","u_camera_quat",";","uniform","vec3","u_sun_direction",";","uniform","float","u_bloom_key",";","varying","vec2","a",";","varying","float","lU",";","const","vec3","kq","=","vec3","(","0.0",",","1.0",",","0.0",")",";","void","ky","(","in","vec4","kr",",","in","vec3","ks",",","out","vec3","kt",")","{","float","ku",",","kv",",","kw",",","kx",";","ku","=","kr",".","w","*","ks",".","x","+","kr",".","y","*","ks",".","z","-","kr",".","z","*","ks",".","y",";","kv","=","kr",".","w","*","ks",".","y","+","kr",".","z","*","ks",".","x","-","kr",".","x","*","ks",".","z",";","kw","=","kr",".","w","*","ks",".","z","+","kr",".","x","*","ks",".","y","-","kr",".","y","*","ks",".","x",";","kx","=","-","kr",".","x","*","ks",".","x","-","kr",".","y","*","ks",".","y","-","kr",".","z","*","ks",".","z",";","kt",".","x","=","ku","*","kr",".","w","-","kx","*","kr",".","x","-","kv","*","kr",".","z","+","kw","*","kr",".","y",";","kt",".","y","=","kv","*","kr",".","w","-","kx","*","kr",".","y","-","kw","*","kr",".","x","+","ku","*","kr",".","z",";","kt",".","z","=","kw","*","kr",".","w","-","kx","*","kr",".","z","-","ku","*","kr",".","y","+","kv","*","kr",".","x",";","}","void","main","(",")","{","vec3","kz",";","a","=","2.0","*","a_position",";","ky","(","u_camera_quat",",","kq",",","kz",")",";","lU","=","dot","(","-","kz",",","u_sun_direction",")","*","u_bloom_key",";","lU","*=","max","(","sign","(","u_sun_direction",".","y",")",",","0.0",")",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/motion_blur.glslf"] = {type:"group",parts:[{type:"var",name:"BLUR_DECAY_THRESHOLD",tokens:["0.0"]},{type:"include",file:"precision_statement.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_mb_tex_curr",";","uniform","sampler2D","u_mb_tex_accum",";","uniform","float","u_motion_blur_exp",";","varying","vec2","a",";","void","main","(",")","{","vec4","kq",",","kr",";","kq","=","texture2D","(","u_mb_tex_curr",",","a",")",";","kr","=","texture2D","(","u_mb_tex_accum",",","a",")",";","if","(","length","(","kq","-","kr",")",">","BLUR_DECAY_THRESHOLD",")","{","gl_FragColor","=","(","1.0","-","u_motion_blur_exp",")","*","kq","+","u_motion_blur_exp","*","kr",";","}","else","{","gl_FragColor","=","kq",";","}","}"]}]},exports["postprocessing/outline.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_outline_src",";","uniform","sampler2D","u_outline_mask",";","uniform","sampler2D","u_outline_mask_blurred",";","uniform","vec3","u_outline_color",";","uniform","float","u_draw_outline",";","varying","vec2","a",";","void","main","(",")","{","vec3","kq",";","float","kr",";","vec4","ks",",","kt",",","ku",";","ks","=","texture2D","(","u_outline_src",",","a",")",";","gl_FragColor","=","ks",";","if","(","u_draw_outline","!=","0.0",")","{","kt","=","texture2D","(","u_outline_mask",",","a",")",";","ku","=","texture2D","(","u_outline_mask_blurred",",","a",")",";","kr","=","ku",".","a","-","kt",".","a",";","if","(","kr","!=","0.0",")","{","kr","=","smoothstep","(","0.0",",","1.0",",","ku",".","a",")",";","if","(","kt",".","a","==","0.0",")","{","kq","=","u_outline_color",";","fX","(","kq",")",";","ku","=","vec4","(","clamp","(","kq",",","0.0",",","1.0",")",",","kr",")",";","gl_FragColor","=","mix","(","ks",",","ku",",","kr",")",";","}","}","}","}"]}]},exports["postprocessing/postprocessing.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"define",name:"POST_EFFECT_NONE",tokens:["1"]},{type:"define",name:"POST_EFFECT_GRAYSCALE",tokens:["2"]},{type:"define",name:"POST_EFFECT_X_BLUR",tokens:["3"]},{type:"define",name:"POST_EFFECT_Y_BLUR",tokens:["4"]},{type:"define",name:"POST_EFFECT_X_EXTEND",tokens:["5"]},{type:"define",name:"POST_EFFECT_Y_EXTEND",tokens:["6"]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","uniform","sampler2D","u_color",";","varying","vec2","a",";","void","main","(",")","{","vec2","kq",",","kr",";","vec4","ks",";"]},{type:"condition",parts:[{type:"if",expression:["POST_EFFECT","==","POST_EFFECT_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","texture2D","(","u_color",",","a",")",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_GRAYSCALE"],group:{type:"group",parts:[{type:"textline",tokens:["ks","=","texture2D","(","u_color",",","a",")",";","gl_FragColor",".","rgb","=","vec3","(","(","ks",".","r","+","ks",".","g","+","ks",".","b",")","/","3.0",")",";","gl_FragColor",".","a","=","1.0",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_BLUR","||","POST_EFFECT","==","POST_EFFECT_Y_BLUR"],group:{type:"group",parts:[{type:"textline",tokens:["kq","=","vec2","(","0.0",",","0.0",")",";","kr","=","u_texel_size",";","ks","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","ks","*","0.2270270270",";","kq","+=","kr",";","ks","=","texture2D","(","u_color",",","a","+","kq",")",";","gl_FragColor","+=","ks","*","0.1945945946",";","ks","=","texture2D","(","u_color",",","a","-","kq",")",";","gl_FragColor","+=","ks","*","0.1945945946",";","kq","+=","kr",";","ks","=","texture2D","(","u_color",",","a","+","kq",")",";","gl_FragColor","+=","ks","*","0.1216216216",";","ks","=","texture2D","(","u_color",",","a","-","kq",")",";","gl_FragColor","+=","ks","*","0.1216216216",";","kq","+=","kr",";","ks","=","texture2D","(","u_color",",","a","+","kq",")",";","gl_FragColor","+=","ks","*","0.0540540541",";","ks","=","texture2D","(","u_color",",","a","-","kq",")",";","gl_FragColor","+=","ks","*","0.0540540541",";","kq","+=","kr",";","ks","=","texture2D","(","u_color",",","a","+","kq",")",";","gl_FragColor","+=","ks","*","0.0162162162",";","ks","=","texture2D","(","u_color",",","a","-","kq",")",";","gl_FragColor","+=","ks","*","0.0162162162",";"]}]}},{type:"elif",expression:["POST_EFFECT","==","POST_EFFECT_X_EXTEND","||","POST_EFFECT","==","POST_EFFECT_Y_EXTEND"],group:{type:"group",parts:[{type:"textline",tokens:["kr","=","u_texel_size",";","ks","=","texture2D","(","u_color",",","a",")",";","gl_FragColor","=","ks",";","if","(","ks",".","a","==","0.0",")","{","ks","=","texture2D","(","u_color",",","a","+","kr",")",";","if","(","ks",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","ks",".","a",")",";","else","{","ks","=","texture2D","(","u_color",",","a","-","kr",")",";","if","(","ks",".","a",">","0.0",")","gl_FragColor","=","vec4","(","1.0",",","1.0",",","1.0",",","ks",".","a",")",";","}","}"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/postprocessing.glslv"] = {type:"group",parts:[{type:"textline",tokens:["attribute","vec2","a_position",";","varying","vec2","a",";","void","main","(",")","{","a","=","2.0","*","a_position",";","gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/smaa.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"gamma.glslf"},{type:"include",file:"pack.glslf"},{type:"define",name:"SMAA_RESOLVE",tokens:["1"]},{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["2"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["3"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["4"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_color_prev",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_blend",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION","&&","SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_search_tex",";","uniform","sampler2D","u_area_tex",";","uniform","vec4","u_subsample_indices",";"]}]}}]},{type:"textline",tokens:["uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lW",";","varying","vec4","lX",";","varying","vec4","lY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.15"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_DISABLE_CORNER_DETECTION",tokens:["1"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.05"]},{type:"define",name:"SMAA_DISABLE_DIAG_DETECTION",tokens:["0"]},{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["16"]},{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_THRESHOLD",tokens:["0.1"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_DEPTH_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_DEPTH_THRESHOLD",tokens:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS_DIAG",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS_DIAG",tokens:["8"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_CORNER_ROUNDING",group:{type:"group",parts:[{type:"define",name:"SMAA_CORNER_ROUNDING",tokens:["25"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",group:{type:"group",parts:[{type:"define",name:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_THRESHOLD",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_THRESHOLD",tokens:["0.01"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_SCALE",tokens:["2.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_PREDICATION_STRENGTH",group:{type:"group",parts:[{type:"define",name:"SMAA_PREDICATION_STRENGTH",tokens:["0.4"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION",tokens:["0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_REPROJECTION_WEIGHT_SCALE",group:{type:"group",parts:[{type:"define",name:"SMAA_REPROJECTION_WEIGHT_SCALE",tokens:["30.0"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE",tokens:["16"]},{type:"define",name:"SMAA_AREATEX_MAX_DISTANCE_DIAG",tokens:["20"]},{type:"define",name:"SMAA_AREATEX_PIXEL_SIZE",tokens:["(","1.0","/","vec2","(","160.0",",","560.0",")",")"]},{type:"define",name:"SMAA_AREATEX_SUBTEX_SIZE",tokens:["(","1.0","/","7.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_SIZE",tokens:["vec2","(","66.0",",","33.0",")"]},{type:"define",name:"SMAA_SEARCHTEX_PACKED_SIZE",tokens:["vec2","(","64.0",",","16.0",")"]},{type:"define",name:"SMAA_CORNER_ROUNDING_NORM",tokens:["(","float","(","SMAA_CORNER_ROUNDING",")","/","100.0",")"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","me","(","vec2","l_",",","sampler2D","ma",")","{","float","mb",",","mc",",","md",";","mb","=","texture2D","(","ma",",","l_",")",".","r",";","mc","=","texture2D","(","ma",",","lW",".","xy",")",".","r",";","md","=","texture2D","(","ma",",","lW",".","zw",")",".","r",";","return","vec3","(","mb",",","mc",",","md",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mj","(","vec2","mf",",","sampler2D","mg",")","{","vec2","mh",";","vec3","mi",";","mi","=","me","(","mf",",","mg",")",";","mh","=","abs","(","mi",".","xx","-","mi",".","yz",")",";","mh","=","step","(","SMAA_PREDICATION_THRESHOLD",",","mh",")",";","return","SMAA_PREDICATION_SCALE","*","SMAA_THRESHOLD","*","(","1.0","-","SMAA_PREDICATION_STRENGTH","*","mh",")",";","}"]}]}}]},{type:"textline",tokens:["void","mn","(","bvec2","mk",",","inout","vec2","ml",",","vec2","mm",")","{","if","(","mk",".","x",")","ml",".","x","=","mm",".","x",";","if","(","mk",".","y",")","ml",".","y","=","mm",".","y",";","}","void","mn","(","bvec4","mo",",","inout","vec4","mp",",","vec4","mq",")","{","mn","(","mo",".","xy",",","mp",".","xy",",","mq",".","xy",")",";","mn","(","mo",".","zw",",","mp",".","zw",",","mq",".","zw",")",";","}","vec2","ms","(","vec2","mr",")","{","return","sign","(","mr",")","*","floor","(","abs","(","mr",")","+",".5",")",";","}","vec4","ms","(","vec4","mt",")","{","return","sign","(","mt",")","*","floor","(","abs","(","mt",")","+",".5",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mG","(","vec2","mu",",","sampler2D","mv"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","mw"]}]}}]},{type:"textline",tokens:[")","{","vec4","mx",";","float","my",",","mz",",","mA",",","mB",",","mC",";","vec3","mD",";","vec2","mE",",","mF",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:["mE","=","mj","(","mu",",","mw",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mE","=","vec2","(","SMAA_THRESHOLD",",","SMAA_THRESHOLD",")",";"]}]}}]},{type:"textline",tokens:["mD","=","vec3","(","0.2126",",","0.7152",",","0.0722",")",";","my","=","dot","(","texture2D","(","mv",",","mu",")",".","rgb",",","mD",")",";","mz","=","dot","(","texture2D","(","mv",",","lW",".","xy",")",".","rgb",",","mD",")",";","mA","=","dot","(","texture2D","(","mv",",","lW",".","zw",")",".","rgb",",","mD",")",";","mx",".","xy","=","abs","(","my","-","vec2","(","mz",",","mA",")",")",";","mE","=","step","(","mE",",","mx",".","xy",")",";","if","(","dot","(","mE",",","vec2","(","1.0",",","1.0",")",")","==","0.0",")","discard",";","mB","=","dot","(","texture2D","(","mv",",","lX",".","xy",")",".","rgb",",","mD",")",";","mC","=","dot","(","texture2D","(","mv",",","lX",".","zw",")",".","rgb",",","mD",")",";","mx",".","zw","=","abs","(","my","-","vec2","(","mB",",","mC",")",")",";","mF","=","max","(","mx",".","xy",",","mx",".","zw",")",";","my","=","dot","(","texture2D","(","mv",",","lY",".","xy",")",".","rgb",",","mD",")",";","mB","=","dot","(","texture2D","(","mv",",","lY",".","zw",")",".","rgb",",","mD",")",";","mx",".","zw","=","abs","(","vec2","(","mz",",","mA",")","-","vec2","(","my",",","mB",")",")",";","mF","=","max","(","mF",".","xy",",","mx",".","zw",")",";","mC","=","max","(","mF",".","x",",","mF",".","y",")",";","mE",".","xy","*=","step","(","mC",",","SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR","*","mx",".","xy",")",";","return","mE",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","mI","(","vec2","mH",")","{","mH",".","r","=","mH",".","r","*","abs","(","5.0","*","mH",".","r","-","5.0","*","0.75",")",";","return","ms","(","mH",")",";","}","vec4","mI","(","vec4","mJ",")","{","mJ",".","rb","=","mJ",".","rb","*","abs","(","5.0","*","mJ",".","rb","-","5.0","*","0.75",")",";","return","ms","(","mJ",")",";","}","vec2","mR","(","sampler2D","mK",",","vec2","mL",",","vec2","mM",",","out","vec2","mN",")","{","vec3","mO",";","vec4","mP",";","mP","=","vec4","(","mL",",","-","1.0",",","1.0",")",";","mO","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mQ","=","0",";","mQ","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mQ","++",")","{","if","(","mP",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mP",".","w",">","0.9",")","{","mP",".","xyz","+=","mO","*","vec3","(","mM",",","1.0",")",";","mN","=","texture2D","(","mK",",","mP",".","xy",",","0.0",")",".","rg",";","mP",".","w","=","dot","(","mN",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mP",".","zw",";","}","vec2","mZ","(","sampler2D","mS",",","vec2","mT",",","vec2","mU",",","out","vec2","mV",")","{","vec3","mW",";","vec4","mX",";","mX","=","vec4","(","mT",",","-","1.0",",","1.0",")",";","mX",".","x","+=","0.25","*","u_texel_size",".","x",";","mW","=","vec3","(","u_texel_size",",","1.0",")",";","for","(","int","mY","=","0",";","mY","<","SMAA_MAX_SEARCH_STEPS_DIAG",";","mY","++",")","{","if","(","mX",".","z","<","float","(","SMAA_MAX_SEARCH_STEPS_DIAG","-","1",")","&&","mX",".","w",">","0.9",")","{","mX",".","xyz","=","mW","*","vec3","(","mU",",","1.0",")","+","mX",".","xyz",";","mV","=","texture2D","(","mS",",","mX",".","xy",",","0.0",")",".","rg",";","mV","=","mI","(","mV",")",";","mX",".","w","=","dot","(","mV",",","vec2","(","0.5",",","0.5",")",")",";","}","}","return","mX",".","zw",";","}","vec2","ne","(","sampler2D","m_",",","vec2","na",",","vec2","nb",",","float","nc",")","{","vec2","nd",";","nd","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE_DIAG",",","SMAA_AREATEX_MAX_DISTANCE_DIAG",")","*","nb","+","na",";","nd","=","SMAA_AREATEX_PIXEL_SIZE","*","nd","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","nd",".","x","+=","0.5",";","nd",".","y","+=","SMAA_AREATEX_SUBTEX_SIZE","*","nc",";","return","texture2D","(","m_",",","nd",",","0.0",")",".","rg",";","}","vec2","nq","(","sampler2D","nf",",","sampler2D","ng",",","vec2","nh",",","vec2","ni",",","vec4","nj",")","{","vec4","nk",",","nl",",","nm",";","vec2","nn",",","no",",","np",";","nn","=","vec2","(","0.0",",","0.0",")",";","if","(","ni",".","r",">","0.0",")","{","nk",".","xz","=","mR","(","nf",",","nh",",","vec2","(","-","1.0",",","1.0",")",",","no",")",";","nk",".","x","+=","float","(","no",".","y",">","0.9",")",";","}","else","nk",".","xz","=","vec2","(","0.0",",","0.0",")",";","nk",".","yw","=","mR","(","nf",",","nh",",","vec2","(","1.0",",","-","1.0",")",",","no",")",";","if","(","nk",".","x","+","nk",".","y",">","2.0",")","{","nl","=","vec4","(","-","nk",".","x","+","0.25",",","nk",".","x",",","nk",".","y",",","-","nk",".","y","-","0.25",")","*","u_texel_size",".","xyxy","+","nh",".","xyxy",";","nm",".","xy","=","texture2D","(","nf",",","nl",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","rg",";","nm",".","zw","=","texture2D","(","nf",",","nl",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","rg",";","nm",".","yxwz","=","mI","(","nm",".","xyzw",")",";","np","=","vec2","(","2.0",",","2.0",")","*","nm",".","xz","+","nm",".","yw",";","mn","(","bvec2","(","step","(","0.9",",","nk",".","zw",")",")",",","np",",","vec2","(","0.0",",","0.0",")",")",";","nn","+=","ne","(","ng",",","nk",".","xy",",","np",",","nj",".","z",")",";","}","nk",".","xz","=","mZ","(","nf",",","nh",",","vec2","(","-","1",",","-","1",")",",","no",")",";","if","(","texture2D","(","nf",",","nh","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",">","0.0",")","{","nk",".","yw","=","mZ","(","nf",",","nh",",","vec2","(","1",",","1",")",",","no",")",";","nk",".","y","+=","float","(","no",".","y",">","0.9",")",";","}","else","nk",".","yw","=","vec2","(","0.0",",","0.0",")",";","if","(","nk",".","x","+","nk",".","y",">","2.0",")","{","nl","=","vec4","(","-","nk",".","x",",","-","nk",".","x",",","nk",".","y",",","nk",".","y",")","*","u_texel_size",".","xyxy","+","nh",".","xyxy",";","nm",".","x","=","texture2D","(","nf",",","nl",".","xy","+","u_texel_size","*","vec2","(","-","1",",","0",")",",","0.0",")",".","g",";","nm",".","y","=","texture2D","(","nf",",","nl",".","xy","+","u_texel_size","*","vec2","(","0",",","-","1",")",",","0.0",")",".","r",";","nm",".","zw","=","texture2D","(","nf",",","nl",".","zw","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","gr",";","np","=","vec2","(","2.0",",","2.0",")","*","nm",".","xz","+","nm",".","yw",";","mn","(","bvec2","(","step","(","0.9",",","nk",".","zw",")",")",",","np",",","vec2","(","0",",","0",")",")",";","nn","+=","ne","(","ng",",","nk",".","xy",",","np",",","nj",".","w",")",".","gr",";","}","return","nn",";","}"]}]}}]},{type:"textline",tokens:["float","nw","(","sampler2D","nr",",","vec2","ns",",","float","nt",")","{","vec2","nu",",","nv",";","nu","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","0.5",",","-","1.0",")",";","nv","=","SMAA_SEARCHTEX_SIZE","*","vec2","(","nt",",","1.0",")",";","nu","+=","vec2","(","-","1.0",",","1.0",")",";","nv","+=","vec2","(","0.5",",","-","0.5",")",";","nu","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","nv","*=","1.0","/","SMAA_SEARCHTEX_PACKED_SIZE",";","return","texture2D","(","nr",",","nu","*","ns","+","nv",",","0.0",")",".","r",";","}","float","nE","(","sampler2D","nx",",","sampler2D","ny",",","vec2","nz",",","float","nA",")","{","float","nB",";","vec2","nC",";","nC","=","vec2","(","0.0",",","1.0",")",";","for","(","int","nD","=","0",";","nD","<","SMAA_MAX_SEARCH_STEPS",";","nD","++",")","{","if","(","nz",".","x",">","nA","&&","nC",".","g",">","0.8281","&&","nC",".","r","==","0.0",")","{","nC","=","texture2D","(","nx",",","nz",",","0.0",")",".","rg",";","nz","=","-","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nz",";","}","}","nB","=","-","(","255.0","/","127.0",")","*","nw","(","ny",",","nC",",","0.0",")","+","3.25",";","return","u_texel_size",".","x","*","nB","+","nz",".","x",";","}","float","nM","(","sampler2D","nF",",","sampler2D","nG",",","vec2","nH",",","float","nI",")","{","float","nJ",";","vec2","nK",";","nK","=","vec2","(","0.0",",","1.0",")",";","for","(","int","nL","=","0",";","nL","<","SMAA_MAX_SEARCH_STEPS",";","nL","++",")","{","if","(","nH",".","x","<","nI","&&","nK",".","g",">","0.8281","&&","nK",".","r","==","0.0",")","{","nK","=","texture2D","(","nF",",","nH",",","0.0",")",".","rg",";","nH","=","vec2","(","2.0",",","0.0",")","*","u_texel_size","+","nH",";","}","}","nJ","=","-","(","255.0","/","127.0",")","*","nw","(","nG",",","nK",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","x","*","nJ","+","nH",".","x",";","}","float","nU","(","sampler2D","nN",",","sampler2D","nO",",","vec2","nP",",","float","nQ",")","{","float","nR",";","vec2","nS",";","nS","=","vec2","(","1.0",",","0.0",")",";","for","(","int","nT","=","0",";","nT","<","SMAA_MAX_SEARCH_STEPS",";","nT","++",")","{","if","(","nP",".","y",">","nQ","&&","nS",".","r",">","0.8281","&&","nS",".","g","==","0.0",")","{","nS","=","texture2D","(","nN",",","nP",",","0.0",")",".","rg",";","nP","=","-","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nP",";","}","}","nR","=","-","(","255.0","/","127.0",")","*","nw","(","nO",",","nS",".","gr",",","0.0",")","+","3.25",";","return","u_texel_size",".","y","*","nR","+","nP",".","y",";","}","float","ob","(","sampler2D","nV",",","sampler2D","nW",",","vec2","nX",",","float","nY",")","{","float","nZ",";","vec2","n_",";","n_","=","vec2","(","1.0",",","0.0",")",";","for","(","int","oa","=","0",";","oa","<","SMAA_MAX_SEARCH_STEPS",";","oa","++",")","{","if","(","nX",".","y","<","nY","&&","n_",".","r",">","0.8281","&&","n_",".","g","==","0.0",")","{","n_","=","texture2D","(","nV",",","nX",",","0.0",")",".","rg",";","nX","=","vec2","(","0.0",",","2.0",")","*","u_texel_size","+","nX",";","}","}","nZ","=","-","(","255.0","/","127.0",")","*","nw","(","nW",",","n_",".","gr",",","0.5",")","+","3.25",";","return","-","u_texel_size",".","y","*","nZ","+","nX",".","y",";","}","vec2","oi","(","sampler2D","oc",",","vec2","od",",","float","oe",",","float","of",",","float","og",")","{","vec2","oh",";","oh","=","vec2","(","SMAA_AREATEX_MAX_DISTANCE",",","SMAA_AREATEX_MAX_DISTANCE",")","*","ms","(","4.0","*","vec2","(","oe",",","of",")",")","+","od",";","oh","=","SMAA_AREATEX_PIXEL_SIZE","*","oh","+","0.5","*","SMAA_AREATEX_PIXEL_SIZE",";","oh",".","y","=","SMAA_AREATEX_SUBTEX_SIZE","*","og","+","oh",".","y",";","return","texture2D","(","oc",",","oh",",","0.0",")",".","rg",";","}","void","op","(","sampler2D","oj",",","inout","vec2","ok",",","vec4","ol",",","vec2","om",")","{","vec2","on",",","oo",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["on","=","step","(","om",".","xy",",","om",".","yx",")",";","oo","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","on",";","oo","/=","on",".","x","+","on",".","y",";","on","=","vec2","(","1.0",",","1.0",")",";","on",".","x","-=","oo",".","x","*","texture2D","(","oj",",","ol",".","xy","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","r",";","on",".","x","-=","oo",".","y","*","texture2D","(","oj",",","ol",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","r",";","on",".","y","-=","oo",".","x","*","texture2D","(","oj",",","ol",".","xy","+","u_texel_size","*","vec2","(","0",",","-","2",")",",","0.0",")",".","r",";","on",".","y","-=","oo",".","y","*","texture2D","(","oj",",","ol",".","zw","+","u_texel_size","*","vec2","(","1",",","-","2",")",",","0.0",")",".","r",";","ok","*=","clamp","(","on",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}","void","ow","(","sampler2D","oq",",","inout","vec2","or",",","vec4","os",",","vec2","ot",")","{","vec2","ou",",","ov",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_CORNER_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["ou","=","step","(","ot",".","xy",",","ot",".","yx",")",";","ov","=","(","1.0","-","SMAA_CORNER_ROUNDING_NORM",")","*","ou",";","ov","/=","ou",".","x","+","ou",".","y",";","ou","=","vec2","(","1.0",",","1.0",")",";","ou",".","x","-=","ov",".","x","*","texture2D","(","oq",",","os",".","xy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","g",";","ou",".","x","-=","ov",".","y","*","texture2D","(","oq",",","os",".","zw","+","u_texel_size","*","vec2","(","1",",","1",")",",","0.0",")",".","g",";","ou",".","y","-=","ov",".","x","*","texture2D","(","oq",",","os",".","xy","+","u_texel_size","*","vec2","(","-","2",",","0",")",",","0.0",")",".","g",";","ou",".","y","-=","ov",".","y","*","texture2D","(","oq",",","os",".","zw","+","u_texel_size","*","vec2","(","-","2",",","1",")",",","0.0",")",".","g",";","or","*=","clamp","(","ou",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oK","(","vec2","ox",",","vec2","oy",",","sampler2D","oz",",","sampler2D","oA",",","sampler2D","oB",",","vec4","oC",")","{","float","oD",",","oE",";","vec3","oF",";","vec2","oG",",","oH",",","oI",";","vec4","oJ",";","oJ","=","vec4","(","0.0",",","0.0",",","0.0",",","0.0",")",";","oG","=","texture2D","(","oz",",","ox",")",".","rg",";","if","(","oG",".","g",">","0.0",")","{"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["oJ",".","rg","=","nq","(","oz",",","oA",",","ox",",","oG",",","oC",")",";","if","(","oJ",".","r","==","-","oJ",".","g",")","{"]}]}}]},{type:"textline",tokens:[";","oF",".","x","=","nE","(","oz",",","oB",",","lW",".","xy",",","lY",".","x",")",";","oF",".","y","=","lX",".","y",";","oH",".","x","=","oF",".","x",";","oD","=","texture2D","(","oz",",","oF",".","xy",",","0.0",")",".","r",";","oF",".","z","=","nM","(","oz",",","oB",",","lW",".","zw",",","lY",".","y",")",";","oH",".","y","=","oF",".","z",";","oH","=","abs","(","ms","(","oH","/","u_texel_size",".","xx","-","oy",".","xx",")",")",";","oI","=","sqrt","(","oH",")",";","oE","=","texture2D","(","oz",",","oF",".","zy","+","u_texel_size","*","vec2","(","1",",","0",")",",","0.0",")",".","r",";","oJ",".","rg","=","oi","(","oA",",","oI",",","oD",",","oE",",","oC",".","y",")",";","oF",".","y","=","ox",".","y",";","op","(","oz",",","oJ",".","rg",",","oF",".","xyzy",",","oH",")",";"]},{type:"condition",parts:[{type:"if",expression:["!","SMAA_DISABLE_DIAG_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["}","else","oG",".","r","=","0.0",";"]}]}}]},{type:"textline",tokens:["}","if","(","oG",".","r",">","0.0",")","{",";","oF",".","y","=","nU","(","oz",",","oB",",","lX",".","xy",",","lY",".","z",")",";","oF",".","x","=","lW",".","x",";","oI",".","x","=","oF",".","y",";","oD","=","texture2D","(","oz",",","oF",".","xy",",","0.0",")",".","g",";","oF",".","z","=","ob","(","oz",",","oB",",","lX",".","zw",",","lY",".","w",")",";","oI",".","y","=","oF",".","z",";","oI","=","abs","(","ms","(","oI","/","u_texel_size",".","yy","-","oy",".","yy",")",")",";","oH","=","sqrt","(","oI",")",";","oE","=","texture2D","(","oz",",","oF",".","xz","+","u_texel_size","*","vec2","(","0",",","1",")",",","0.0",")",".","g",";","oJ",".","ba","=","oi","(","oA",",","oH",",","oD",",","oE",",","oC",".","x",")",";","oF",".","x","=","ox",".","x",";","ow","(","oz",",","oJ",".","ba",",","oF",".","xyxz",",","oI",")",";","}","return","oJ",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","oW","(","vec2","oL",",","sampler2D","oM",",","sampler2D","oN"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","oO"]}]}}]},{type:"textline",tokens:[")","{","bool","oP",";","vec2","oQ",",","oR",",","oS",";","vec4","oT",",","oU",",","oV",";","oT",".","x","=","texture2D","(","oN",",","lV",".","xy",")",".","a",";","oT",".","y","=","texture2D","(","oN",",","lV",".","zw",")",".","g",";","oT",".","wz","=","texture2D","(","oN",",","oL",")",".","xz",";","if","(","dot","(","oT",",","vec4","(","1.0",",","1.0",",","1.0",",","1.0",")",")","<","1e-5",")","{","oU","=","texture2D","(","oM",",","oL",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["oV","=","texture2D","(","oO",",","a",")",";","oQ","=","2.0","*","cC","(","oV",")","-","1.0",";","oU",".","a","=","sqrt","(","2.0","*","length","(","oQ",")",")",";"]}]}}]},{type:"textline",tokens:["return","oU",";","}","else","{","oP","=","max","(","oT",".","x",",","oT",".","z",")",">","max","(","oT",".","y",",","oT",".","w",")",";","oV","=","vec4","(","0.0",",","oT",".","y",",","0.0",",","oT",".","w",")",";","oQ","=","oT",".","yw",";","mn","(","bvec4","(","oP",",","oP",",","oP",",","oP",")",",","oV",",","vec4","(","oT",".","x",",","0.0",",","oT",".","z",",","0.0",")",")",";","mn","(","bvec2","(","oP",",","oP",")",",","oQ",",","oT",".","xz",")",";","oQ","/=","dot","(","oQ",",","vec2","(","1.0",",","1.0",")",")",";","oU","=","oV","*","vec4","(","u_texel_size",",","-","u_texel_size",")","+","oL",".","xyxy",";","oT","=","oQ",".","x","*","texture2D","(","oM",",","oU",".","xy",",","0.0",")",";","oT","+=","oQ",".","y","*","texture2D","(","oM",",","oU",".","zw",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["oV","=","texture2D","(","oO",",","oU",".","xy",")",";","oR","=","2.0","*","cC","(","oV",")","-","1.0",";","oS","=","oQ",".","x","*","oR",";","oV","=","texture2D","(","oO",",","oU",".","zw",")",";","oR","=","2.0","*","cC","(","oV",")","-","1.0",";","oS","+=","oQ",".","y","*","oR",";","oT",".","a","=","sqrt","(","2.0","*","length","(","oS",")",")",";"]}]}}]},{type:"textline",tokens:["return","oT",";","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","pf","(","vec2","oX",",","sampler2D","oY",",","sampler2D","oZ"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","sampler2D","o_"]}]}}]},{type:"textline",tokens:[")","{","float","pa",";","vec2","pb",";","vec4","pc",",","pd",",","pe",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:["pc","=","texture2D","(","o_",",","a",")",";","pb","=","2.0","*","cC","(","pc",")","-","1.0",";","pc","=","texture2D","(","oY",",","oX",")",";","pd","=","texture2D","(","oZ",",","oX","-","pb",")",";","pa","=","abs","(","pc",".","a","*","pc",".","a","-","pd",".","a","*","pd",".","a",")","/","2.0",";","pa","=","0.5","*","clamp","(","1.0","-","sqrt","(","pa",")","*","SMAA_REPROJECTION_WEIGHT_SCALE",",","0.0",",","1.0",")",";","pe","=","mix","(","pc",",","pd",",","pa",")",";","pe",".","a","=","1.0",";","return","pe",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["pc","=","texture2D","(","oY",",","oX",")",";","pd","=","texture2D","(","oZ",",","oX",")",";","return","mix","(","pc",",","pd",",","0.5",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec4","pg",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["pg","=","vec4","(","mG","(","a",",","u_color"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PREDICATION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_predication_tex"]}]}}]},{type:"textline",tokens:[")",",","0.0",",","0.0",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["pg","=","oK","(","a",",","lZ",",","u_color",",","u_area_tex",",","u_search_tex",",","u_subsample_indices",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["pg","=","oW","(","a",",","u_color",",","u_blend"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_RESOLVE"],group:{type:"group",parts:[{type:"textline",tokens:["pg","=","vec4","(","pf","(","a",",","u_color",",","u_color_prev"]},{type:"condition",parts:[{type:"if",expression:["SMAA_REPROJECTION"],group:{type:"group",parts:[{type:"textline",tokens:[",","u_velocity_tex"]}]}}]},{type:"textline",tokens:[")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["pg","=","texture2D","(","u_color",",","a",")",";"]}]}}]},{type:"textline",tokens:["gl_FragColor","=","pg",";","}"]}]},exports["postprocessing/smaa.glslv"] = {type:"group",parts:[{type:"define",name:"SMAA_EDGE_DETECTION",tokens:["1"]},{type:"define",name:"SMAA_BLENDING_WEIGHT_CALCULATION",tokens:["2"]},{type:"define",name:"SMAA_NEIGHBORHOOD_BLENDING",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_LOW",tokens:["1"]},{type:"define",name:"AA_METHOD_SMAA_MEDIUM",tokens:["2"]},{type:"define",name:"AA_METHOD_SMAA_HIGH",tokens:["3"]},{type:"define",name:"AA_METHOD_SMAA_ULTRA",tokens:["4"]},{type:"textline",tokens:["attribute","vec2","a_position",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lV",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["varying","vec4","lW",";","varying","vec4","lX",";","varying","vec4","lY",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["varying","vec2","lZ",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["AA_METHOD","==","AA_METHOD_SMAA_LOW"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["4"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_MEDIUM"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["8"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_HIGH"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}},{type:"elif",expression:["AA_METHOD","==","AA_METHOD_SMAA_ULTRA"],group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["32"]}]}}]},{type:"condition",parts:[{type:"ifndef",name:"SMAA_MAX_SEARCH_STEPS",group:{type:"group",parts:[{type:"define",name:"SMAA_MAX_SEARCH_STEPS",tokens:["16"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["void","kr","(","vec2","kq",")","{","lW","=","u_texel_size",".","xyxy","*","vec4","(","-","1.0",",","0.0",",","0.0",",","-","1.0",")","+","kq",".","xyxy",";","lX","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","kq",".","xyxy",";","lY","=","u_texel_size",".","xyxy","*","vec4","(","-","2.0",",","0.0",",","0.0",",","-","2.0",")","+","kq",".","xyxy",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["void","ku","(","vec2","ks",",","out","vec2","kt",")","{","kt","=","ks","/","u_texel_size",";","lW","=","u_texel_size",".","xyxy","*","vec4","(","-","0.25",",","-","0.125",",","1.25",",","-","0.125",")","+","ks",".","xyxy",";","lX","=","u_texel_size",".","xyxy","*","vec4","(","-","0.125",",","-","0.25",",","-","0.125",",","1.25",")","+","ks",".","xyxy",";","lY","=","u_texel_size",".","xxyy","*","vec4","(","-","2.0",",","2.0",",","-","2.0",",","2.0",")","*","float","(","SMAA_MAX_SEARCH_STEPS",")","+","vec4","(","lW",".","xz",",","lX",".","yw",")",";","}"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["void","kw","(","vec2","kv",")","{","lV","=","u_texel_size",".","xyxy","*","vec4","(","1.0",",","0.0",",","0.0",",","1.0",")","+","kv",".","xyxy",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","a","=","2.0","*","a_position",";"]},{type:"condition",parts:[{type:"if",expression:["SMAA_PASS","==","SMAA_EDGE_DETECTION"],group:{type:"group",parts:[{type:"textline",tokens:["kr","(","a",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_BLENDING_WEIGHT_CALCULATION"],group:{type:"group",parts:[{type:"textline",tokens:["ku","(","a",",","lZ",")",";"]}]}},{type:"elif",expression:["SMAA_PASS","==","SMAA_NEIGHBORHOOD_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["kw","(","a",")",";"]}]}}]},{type:"textline",tokens:["gl_Position","=","vec4","(","4.0","*","(","a_position",".","xy","-","0.25",")",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"depth_fetch.glslf"},{type:"include",file:"procedural.glslf"},{type:"define",name:"SSAO_QUALITY_8",tokens:["1"]},{type:"define",name:"SSAO_QUALITY_16",tokens:["2"]},{type:"define",name:"SSAO_QUALITY_24",tokens:["3"]},{type:"define",name:"SSAO_QUALITY_32",tokens:["4"]},{type:"textline",tokens:["uniform","sampler2D","u_color",";","uniform","sampler2D","u_depth",";","uniform","sampler2D","u_ssao_special_tex",";","uniform","vec2","u_camera_range",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";","uniform","float","u_ssao_radius_increase",";","uniform","float","u_ssao_influence",";","uniform","float","u_ssao_dist_factor",";","float","ma","(","in","vec2","l_",")","{","return","lQ","(","u_depth",",","l_",",","u_camera_range",")",";","}","void","main","(",")","{","vec3","mb",",","mc",",","md",";","float","me",",","mf",",","mg",",","mh",",","mi",",","mj",",","mk",";","me","=","texture2D","(","u_color",",","a",")",".","r",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_WHITE"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","me",",","1.0",",","0.0",",","1.0",")",";","return",";"]}]}}]},{type:"textline",tokens:["mb","=","normalize","(","2.0","*","texture2D","(","u_ssao_special_tex",",","a","*","0.25","/","u_texel_size",")",".","rgb","-","1.0",")",";","mf","=","ma","(","a",")",";","mg","=","mf","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_QUALITY","==","SSAO_QUALITY_8"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ml","=","8.0",";","const","int","mm","=","1",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_16"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ml","=","16.0",";","const","int","mm","=","2",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_24"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ml","=","24.0",";","const","int","mm","=","3",";"]}]}},{type:"elif",expression:["SSAO_QUALITY","==","SSAO_QUALITY_32"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","ml","=","32.0",";","const","int","mm","=","4",";"]}]}}]},{type:"textline",tokens:["mh","=","u_ssao_radius_increase","*","0.001",";","const","float","mn","=","1.0","+","2.4","/","ml",";","mi","=","0.0",";","for","(","int","mo","=","0",";","mo","<","mm",";","mo","++",")","for","(","int","mp","=","-","1",";","mp","<=","1",";","mp","+=","2",")","for","(","int","mq","=","-","1",";","mq","<=","1",";","mq","+=","2",")","for","(","int","mr","=","-","1",";","mr","<=","1",";","mr","+=","2",")","{","mc","=","reflect","(","normalize","(","vec3","(","mp",",","mq",",","mr",")",")",",","mb",")","*","(","mh","*=","mn",")",";","md","=","vec3","(","a",",","mg",")",";","md","+=","vec3","(","mc",".","xy",",","mc",".","z","*","mg","*","2.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["md",".","z","-=","1.4","*","(","md",".","z","-","mg",")","*","step","(","mg",",","md",".","z",")",";"]}]}}]},{type:"textline",tokens:["mj","=","ma","(","md",".","xy",")","*","(","u_camera_range",".","y","-","u_camera_range",".","x",")",";","mk","=","clamp","(","(","mg","-","mj",")","/","mj",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mix","(","1.0",",","mk",",","step","(","mj",",","md",".","z",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mi","+=","mix","(","step","(","md",".","z",",","mj",")",",","0.5",",","mk",")",";"]}]}}]},{type:"textline",tokens:["}","mi","=","mi","/","ml",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_HEMISPHERE"],group:{type:"group",parts:[{type:"textline",tokens:["mi","=","clamp","(","mi","*","mi","+","0.6","*","mi",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mi","=","clamp","(","mi","*","mi","+","mi",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["mf","=","u_ssao_influence","*","(","1.0","-","u_ssao_dist_factor","*","mf",")",";","mi","=","mix","(","1.0",",","mi",",","mf",")",";","gl_FragColor","=","vec4","(","me",",","mi",",","0.0",",","1.0",")",";","}"]}]},exports["postprocessing/ssao_blur.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"include",file:"depth_fetch.glslf"}]}}]},{type:"textline",tokens:["uniform","sampler2D","u_ssao_mask",";","uniform","vec2","u_texel_size",";","varying","vec2","a",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","vec2","u_camera_range",";","uniform","float","u_ssao_blur_discard_value",";","float","ma","(","in","vec2","l_",")","{","return","lQ","(","u_depth",",","l_",",","u_camera_range",")",";","}"]}]}}]},{type:"textline",tokens:["void","main","(",")","{","vec2","mb",",","mc",";","float","md",",","me",",","mf",",","mg",",","mh",",","mi",",","mj",";","md","=","0.0",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["me","=","ma","(","a",")",";","mf","=","0.0",";","mg","=","u_ssao_blur_discard_value","*","100.0",";"]}]}}]},{type:"textline",tokens:["mb","=","vec2","(","-","2.0",")",";","for","(","int","mk","=","0",";","mk","<","4",";","++","mk",")","{","for","(","int","ml","=","0",";","ml","<","4",";","++","ml",")","{","mc","=","(","mb","+","vec2","(","float","(","mk",")",",","float","(","ml",")",")",")","*","u_texel_size",";","mh","=","texture2D","(","u_ssao_mask",",","a","+","mc",")",".","g",";"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mi","=","ma","(","a","+","mc",")",";","mj","=","1.0","-","clamp","(","abs","(","mi","-","me",")","*","mg",",","0.0",",","1.0",")",";","md","+=","mh","*","mj",";","mf","+=","mj",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["md","+=","mh",";"]}]}}]},{type:"textline",tokens:["}","}"]},{type:"condition",parts:[{type:"if",expression:["SSAO_BLUR_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","md","/","mf",",","0.0",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gl_FragColor","=","vec4","(","texture2D","(","u_ssao_mask",",","a",")",".","r",",","md","/","16.0",",","0.0",",","1.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["postprocessing/velocity.glslf"] = {type:"group",parts:[{type:"include",file:"precision_statement.glslf"},{type:"include",file:"pack.glslf"},{type:"textline",tokens:["uniform","sampler2D","u_depth",";","uniform","mat4","u_view_proj_inverse",";","uniform","mat4","u_view_proj_prev",";","varying","vec2","a",";","void","main","(",")","{","vec2","kq",";","vec4","kr",",","ks",";","float","kt",";","kt","=","texture2D","(","u_depth",",","a",")",".","x",";","kr","=","vec4","(","a","*","2.0","-","1.0",",","2.0","*","kt","-","1.0",",","1.0",")",";","ks","=","u_view_proj_inverse","*","kr",";","ks","=","ks","/","ks",".","w",";","ks","=","u_view_proj_prev","*","ks",";","ks","/=","ks",".","w",";","kq","=","(","kr",".","xy","-","ks",".","xy",")","/","4.0","+","0.5",";","kq","=","clamp","(","kq",",","0.0",",","1.0",")",";","gl_FragColor","=","cq","(","kq",")",";","}"]}]},exports["include/precision_statement.glslf"] = {type:"group",parts:[{type:"var",name:"PRECISION",tokens:["lowp"]},{type:"textline",tokens:["precision","PRECISION","float",";"]}]},exports["include/math.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["float","b","=","0.0",";","float","c","=","1.0",";","struct","d","{","vec3","a",";","vec3","b",";","vec3","c",";","vec3","d",";","vec3","e",";","vec3","f",";","}",";","bool","g","(","vec3","e",",","vec3","f",")","{","return","any","(","lessThan","(","abs","(","e","-","f",")",",","vec3","(","EPSILON",")",")",")",";","}","vec3","j","(","in","vec4","h",",","in","vec3","i",")","{","return","i","+","2.0","*","cross","(","h",".","xyz",",","cross","(","h",".","xyz",",","i",")","+","h",".","w","*","i",")",";","}","vec4","l","(","in","vec4","k",")","{","return","vec4","(","-","k",".","xyz",",","k",".","w",")","/","dot","(","k",",","k",")",";","}","vec3","q","(","vec4","m",",","vec4","n",",","vec4","o",")","{","vec3","p",";","p","=","o",".","xyz","*","m",".","w",";","p","=","j","(","n",",","p",")",";","p","+=","m",".","xyz","*","o",".","w",";","return","p",";","}","vec3","w","(","vec4","r",",","vec4","s",",","vec4","t",")","{","vec4","u",";","vec3","v",";","v","=","t",".","xyz","-","r",".","xyz","*","t",".","w",";","u","=","l","(","s",")",";","v","=","j","(","u",",","v",")",";","v","/=","r",".","w",";","return","v",";","}","mat4","x","(",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","z","(","float","y",")","{","return","mat4","(","c",",","b",",","b",",","b",",","b",",","cos","(","y",")",",","sin","(","y",")",",","b",",","b",",","-","sin","(","y",")",",","cos","(","y",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","B","(","float","A",")","{","return","mat4","(","cos","(","A",")",",","b",",","-","sin","(","A",")",",","b",",","b",",","c",",","b",",","b",",","sin","(","A",")",",","b",",","cos","(","A",")",",","b",",","b",",","b",",","b",",","c",")",";","}","mat4","D","(","float","C",")","{","return","mat4","(","cos","(","C",")",",","sin","(","C",")",",","b",",","b",",","-","sin","(","C",")",",","cos","(","C",")",",","b",",","b",",","b",",","b",",","c",",","b",",","b",",","b",",","b",",","c",")",";","}","d","F","(","in","d","E",")","{","return","d","(","E",".","a",",","E",".","b",",","normalize","(","E",".","c",")",",","normalize","(","E",".","d",")",",","normalize","(","E",".","e",")",",","E",".","f",")",";","}"]}]},exports["include/to_world.glslv"] = {type:"group",parts:[{type:"define",name:"SKIN_SLERP",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"define",name:"MAX_BILLBOARD_ANGLE",tokens:["(","M_PI","/","4.0",")"]},{type:"textline",tokens:["const","vec3","G","=","vec3","(","0.0",",","1.0",",","0.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","N","(","vec3","H",",","mat4","I",")","{","vec3","J",",","L",",","M",";","J","=","vec3","(","I","[","0","]","[","0","]",",","I","[","1","]","[","0","]",",","I","[","2","]","[","0","]",")",";","L","=","vec3","(","I","[","0","]","[","1","]",",","I","[","1","]","[","1","]",",","I","[","2","]","[","1","]",")",";","M","=","vec3","(","I","[","0","]","[","2","]",",","I","[","1","]","[","2","]",",","I","[","2","]","[","2","]",")",";","L","=","cross","(","M",",","J",")",";","return","mat4","(","vec4","(","J",",","0.0",")",",","vec4","(","L",",","0.0",")",",","vec4","(","M",",","0.0",")",",","vec4","(","H",",","1.0",")",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["mat4","T","(","vec3","O",",","vec3","P",")","{","vec3","Q",",","R",",","S",";","Q","=","O","-","P",";","Q",".","y","=","0.0",";","Q","=","normalize","(","Q",")",";","R","=","normalize","(","cross","(","G",",","Q",")",")",";","S","=","normalize","(","cross","(","Q",",","R",")",")",";","return","mat4","(","vec4","(","R",",","0.0",")",",","vec4","(","S",",","0.0",")",",","vec4","(","Q",",","0.0",")",",","vec4","(","P",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_JITTERED"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","aa","(","in","vec3","U",",","float","V",",","float","W",",","float","X",",","vec3","Y",")","{","float","Z",",","_",";","Z","=","fract","(","length","(","Y",")","/","0.17",")",";","_","=","X","+","Z","/","10.0",";","Z","=","Z",";","if","(","X","!=","0.0",")","Z","/=","X",";","U","*=","1.0","+","0.5","*","sin","(","V",")",";","_","=","length","(","U",")","*","W","*","sin","(","2.0","*","3.14","*","V","*","_","+","Z",")",";","return","D","(","_",")",";","}"]}]}}]},{type:"textline",tokens:["mat4","ai","(","in","vec3","ab",",","in","vec3","ac",",","in","mat4","ad",")","{","vec3","ae",";","float","af",",","ag",";","mat4","ah",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_SPHERICAL","||","!","BILLBOARD","&&","(","BILLBOARD_ALIGN","==","BILLBOARD_ALIGN_VIEW",")"],group:{type:"group",parts:[{type:"textline",tokens:["ah","=","N","(","ac",",","ad",")",";"]}]}},{type:"elif",expression:["BILLBOARD_RANDOM"],group:{type:"group",parts:[{type:"textline",tokens:["af","=","fract","(","(","ac",".","x","*","1.43","+","ac",".","y","*","0.123","+","ac",".","z","*","6.1",")",")",";","af","=","2.0","*","M_PI","*","af",";","ae","=","normalize","(","vec3","(","ad","[","0","]","[","2","]",",","0.0",",","ad","[","2","]","[","2","]",")",")",";","ag","=","acos","(","ae","[","2","]",")",";","if","(","ae","[","0","]","<","0.0",")","ag","=","2.0","*","M_PI","-","ag",";","ag","=","ag","-","af",";","if","(","ag","<","0.0",")","ag","=","2.0","*","M_PI","+","ag",";","af","=","af",";","if","(","ag","<=","MAX_BILLBOARD_ANGLE",")","af","+=","ag",";","else","if","(","ag","<=","M_PI","-","MAX_BILLBOARD_ANGLE",")","af","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ag","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")",";","else","if","(","ag","<=","M_PI","+","MAX_BILLBOARD_ANGLE",")","af","+=","ag","-","M_PI",";","else","if","(","ag","<=","2.0","*","M_PI","-","MAX_BILLBOARD_ANGLE",")","af","+=","MAX_BILLBOARD_ANGLE","*","(","2.0","*","ag","-","M_PI",")","/","(","2.0","*","MAX_BILLBOARD_ANGLE","-","M_PI",")","+","M_PI",";","else","af","+=","ag","-","2.0","*","M_PI",";","ah","=","B","(","af",")",";","ah","[","3","]","=","vec4","(","ac",",","1.0",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ah","=","T","(","ab",",","ac",")",";"]}]}}]},{type:"textline",tokens:["return","ah",";","}"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD_PRES_GLOB_ORIENTATION"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","ao","(","in","vec3","aj",",","in","vec3","ak",",","in","mat4","al",",","mat4","am",")","{","mat4","an",";","an","=","ai","(","aj",",","ak",",","al",")",";","am","[","3","]","=","vec4","(","0.0",",","0.0",",","0.0",",","1.0",")",";","an","=","an","*","am",";","return","an",";","}"]}]}}]},{type:"textline",tokens:["d","av","(","in","vec3","ap",",","in","vec3","aq",",","in","vec3","ar",",","in","vec3","as",",","in","vec3","at",",","in","mat4","au",")","{","ap","=","(","au","*","vec4","(","ap",",","1.0",")",")",".","xyz",";","aq","=","(","au","*","vec4","(","aq",",","1.0",")",")",".","xyz",";","ar","=","(","au","*","vec4","(","ar",",","0.0",")",")",".","xyz",";","as","=","(","au","*","vec4","(","as",",","0.0",")",")",".","xyz",";","at","=","(","au","*","vec4","(","at",",","0.0",")",")",".","xyz",";","return","F","(","d","(","ap",",","aq",",","ar",",","as",",","at",",","vec3","(","0.0",")",")",")",";","}"]}]},exports["include/scale_texcoord.glslv"] = {type:"group",parts:[{type:"textline",tokens:["vec2","ay","(","vec2","aw",",","vec3","ax",")","{","return","(","aw","+","0.5",")","*","ax",".","xy","-","0.5",";","}"]}]},exports["include/skin.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKINNED"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","aF","(","in","vec4","az",",","in","vec4","aA",",","in","float","aB",")","{","float","aC",",","aD",",","aE",";","aC","=","az","[","0","]","*","aA","[","0","]","+","az","[","1","]","*","aA","[","1","]","+","az","[","2","]","*","aA","[","2","]","+","az","[","3","]","*","aA","[","3","]",";","if","(","aC","<","0.0",")","{","aA","*=","-","1.0",";","aC","=","-","aC",";","}","if","(","abs","(","aC",")",">=","1.0",")","return","az",";","aD","=","acos","(","aC",")",";","aC","=","sqrt","(","1.0","-","aC","*","aC",")",";","if","(","abs","(","aC",")","<","0.001",")","return","vec4","(","az","*","0.5","+","aA","*","0.5",")",";","aE","=","sin","(","(","1.0","-","aB",")","*","aD",")","/","aC",";","aD","=","sin","(","aB","*","aD",")","/","aC",";","return","az","*","aE","+","aA","*","aD",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","aR","(","in","vec3","aG",",","in","vec4","aH",",","in","vec4","aI",",","in","vec4","aJ",",","in","vec4","aK",",","in","float","aL",")","{","vec3","aM",",","aN",",","aO",";","vec4","aP",",","aQ",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["aP","=","aF","(","aH",",","aI",",","aL",")",";","aQ","=","mix","(","aJ",",","aK",",","aL",")",";","aM","=","j","(","aP",",","aG",")",";","aM","=","aM","*","aQ",".","w","+","aQ",".","xyz",";","return","aM",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aN","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aG",",","1.0",")",")",";","aO","=","j","(","aH",",","aN",")",";","aN","=","j","(","aI",",","aN",")",";","aO","=","aO","*","aJ",".","w","+","aJ",".","xyz",";","aN","=","aN","*","aK",".","w","+","aK",".","xyz",";","aM","=","mix","(","aO",",","aN",",","aL",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aM",",","1.0",")",")",";"]}]}}]},{type:"textline",tokens:["}","vec3","a_","(","in","vec3","aS",",","in","vec4","aT",",","in","vec4","aU",",","in","float","aV",")","{","vec4","aW",";","vec3","aX",",","aY",",","aZ",";","aX","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aS",",","0.0",")",")",";"]},{type:"condition",parts:[{type:"if",expression:["SKIN_SLERP"],group:{type:"group",parts:[{type:"textline",tokens:["aW","=","aF","(","aT",",","aU",",","aV",")",";","aY","=","j","(","aW",",","aX",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aY",",","0.0",")",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["aZ","=","j","(","aT",",","aX",")",";","aX","=","j","(","aU",",","aX",")",";","aY","=","mix","(","aZ",",","aX",",","aV",")",";","return","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","aY",",","0.0",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["vec3","aR","(","in","vec3","ba",",","in","vec4","bb",",","in","vec4","bc",")","{","vec3","bd",";","bd","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","ba",",","1.0",")",")",";","bd","=","j","(","bb",",","bd",")",";","bd","=","bd","*","bc",".","w","+","bc",".","xyz",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bd",",","1.0",")",")",";","}","vec3","a_","(","in","vec3","be",",","in","vec4","bf",")","{","vec3","bg",";","bg","=","q","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","be",",","0.0",")",")",";","bg","=","j","(","bf",",","bg",")",";","return","w","(","u_arm_rel_trans",",","u_arm_rel_quat",",","vec4","(","bg",",","0.0",")",")",";","}"]}]}}]},{type:"textline",tokens:["void","bv","(","inout","vec3","bh",",","inout","vec3","bi",",","inout","vec3","bj",",","inout","vec3","bk",")","{","int","bl",",","bm",";","vec4","bn",";","vec3","bo",",","bp",",","bq",",","br",";","float","bs",",","bt",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bs","=","u_frame_factor",";"]}]}}]},{type:"textline",tokens:["if","(","a_influence",".","y",">","0.0",")","{","bo","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bp","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bq","=","vec3","(","0.0",",","0.0",",","0.0",")",";","br","=","vec3","(","0.0",",","0.0",",","0.0",")",";","bn","=","a_influence",";","for","(","int","bu","=","0",";","bu","<","4",";","bu","++",")","{","bl","=","int","(","bn","[","bu","]",")",";","bt","=","fract","(","bn","[","bu","]",")",";"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bo","+=","bt","*","aR","(","bh",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","u_transb","[","bl","]",",","u_transa","[","bl","]",",","bs",")",";","bp","+=","bt","*","a_","(","bi",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";","bq","+=","bt","*","a_","(","bj",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";","br","+=","bt","*","a_","(","bk",",","u_quatsb","[","bl","]",",","u_quatsa","[","bl","]",",","bs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bo","+=","bt","*","aR","(","bh",",","u_quatsb","[","bl","]",",","u_transb","[","bl","]",")",";","bp","+=","bt","*","a_","(","bi",",","u_quatsb","[","bl","]",")",";","bq","+=","bt","*","a_","(","bj",",","u_quatsb","[","bl","]",")",";","br","+=","bt","*","a_","(","bk",",","u_quatsb","[","bl","]",")",";"]}]}}]},{type:"textline",tokens:["}","bh","=","bo",";","bi","=","bp",";","bj","=","bq",";","bk","=","br",";","}","if","(","!","(","a_influence",".","y",">","0.0",")",")","{","bm","=","int","(","a_influence","[","0","]","-","1.0",")",";","if","(","bm",">","-","1",")","{"]},{type:"condition",parts:[{type:"if",expression:["FRAMES_BLENDING"],group:{type:"group",parts:[{type:"textline",tokens:["bh","=","aR","(","bh",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","u_transb","[","bm","]",",","u_transa","[","bm","]",",","bs",")",";","bi","=","a_","(","bi",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";","bj","=","a_","(","bj",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";","bk","=","a_","(","bk",",","u_quatsb","[","bm","]",",","u_quatsa","[","bm","]",",","bs",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bh","=","aR","(","bh",",","u_quatsb","[","bm","]",",","u_transb","[","bm","]",")",";","bi","=","a_","(","bi",",","u_quatsb","[","bm","]",")",";","bj","=","a_","(","bj",",","u_quatsb","[","bm","]",")",";","bk","=","a_","(","bk",",","u_quatsb","[","bm","]",")",";"]}]}}]},{type:"textline",tokens:["}","}","}"]}]}}]}]},exports["include/wind_bending.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["WIND_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["void","bG","(","inout","vec3","bw",",","in","vec3","bx",",","in","float","by",",","in","float","bz",",","in","float","bA",",","in","vec3","bB",",","in","float","bC",")","{","vec3","bD",";","float","bE",",","bF",";","bE","=","length","(","bx",")",";","bF","=","bz","*","(","1.0","+","0.1","*","fract","(","bE",")",")",";","bF","=","by","*","bC","*","(","1.0","+","sin","(","2.0","*","3.14","*","bA","*","bF","+","bE",")",")",";","bE","=","(","bw",".","y","-","bx",".","y",")","*","abs","(","bF",")",";","bE","+=","1.0",";","bE","*=","bE",";","bE","=","bE","*","bE","-","bE",";","bD","=","bw",";","bD",".","xz","+=","bB",".","xz","*","bE","*","sign","(","bF",")",";","bE","=","length","(","bw","-","bx",")",";","bw","=","bx","+","normalize","(","bD","-","bx",")","*","bE",";","}"]},{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","bI","(","vec4","bH",")","{","return","bH","*","bH","*","(","3.0","-","2.0","*","bH",")",";","}","vec4","bK","(","vec4","bJ",")","{","return","abs","(","fract","(","bJ","+","0.5",")","*","2.0","-","1.0",")",";","}","vec4","bM","(","vec4","bL",")","{","return","bI","(","bK","(","bL",")",")",";","}","void","cc","(","inout","vec3","bN",",","in","float","bO",",","in","vec3","bP",",","in","vec3","bQ",",","in","vec3","bR",",","in","float","bS",",","in","float","bT",",","in","float","bU",",","in","vec3","bV",")","{","vec3","bW",";","vec4","bX",";","vec2","bY",",","bZ",";","float","b_",",","ca",",","cb",";","b_","=","dot","(","bR",",","vec3","(","1.0",")",")",";","ca","=","b_","+","bV",".","g",";","cb","=","dot","(","bN",",","vec3","(","bV",".","g",")",")",";","bY","=","(","bO","+","vec2","(","cb",",","ca",")",")",";","bX","=","(","(","fract","(","(","bY",".","xxyy","*","vec4","(","1.975",",","0.793",",","0.375",",","0.193",")",")",")","*","2.0",")","-","1.0",")","*","length","(","bQ",")","*","bS",";","bX","=","bM","(","bX",")",";","bZ","=","bX",".","xz","+","bX",".","yw",";","bZ",".","y","=","0.5","-","bZ",".","y",";","bW","=","bZ",".","xyx","*","bV",".","rbr","*","vec3","(","bT","*","bP",".","x",",","bU",",","bT","*","bP",".","z",")",";","bN","+=","bW",";","}"]}]}}]},{type:"textline",tokens:["void","cj","(","inout","vec3","cd",",","inout","vec3","ce",",","in","vec3","cf",")","{","vec3","cg",",","ch",",","ci",";","cg","=","u_wind","*","1.0","+","0.7","*","sin","(","u_time",")",";"]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["ch","=","ce",";","ci","=","a_emitter_center",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ch","=","cd",";","ci","=","ce",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["MAIN_BEND_COL"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DETAIL_BEND"],group:{type:"group",parts:[{type:"textline",tokens:["cc","(","ch",",","u_time",",","cf",",","cg",",","ci",",","au_detail_bending_freq",",","au_detail_bending_amp",",","au_branch_bending_amp",",","a_bending_col_detail",")",";"]}]}}]},{type:"textline",tokens:["bG","(","ch",",","ci",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cg",",","a_bending_col_main",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["bG","(","ch",",","ci",",","au_wind_bending_amp",",","au_wind_bending_freq",",","u_time",",","cg",",","1.0",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["BEND_CENTER_ONLY"],group:{type:"group",parts:[{type:"textline",tokens:["cd","+=","ch","-","ce",";","ce","=","ch",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cd","=","ch",";","ce","=","ci",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/std_enums.glsl"] = {type:"group",parts:[{type:"define",name:"TEXTURE_COORDS_UV_ORCO",tokens:["1"]},{type:"define",name:"TEXTURE_COORDS_NORMAL",tokens:["2"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MIX",tokens:["1"]},{type:"define",name:"TEXTURE_BLEND_TYPE_MULTIPLY",tokens:["2"]},{type:"define",name:"SHADOW_SRC_NONE",tokens:["1"]},{type:"define",name:"SHADOW_SRC_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_SRC_MASK",tokens:["3"]},{type:"define",name:"SHADOW_DST_NONE",tokens:["1"]},{type:"define",name:"SHADOW_DST_DEPTH",tokens:["2"]},{type:"define",name:"SHADOW_DST_MASK",tokens:["3"]},{type:"define",name:"SPECULAR_PHONG",tokens:["1"]},{type:"define",name:"SPECULAR_COOKTORR",tokens:["2"]},{type:"define",name:"SPECULAR_WARDISO",tokens:["3"]},{type:"define",name:"DIFFUSE_LAMBERT",tokens:["1"]},{type:"define",name:"DIFFUSE_OREN_NAYAR",tokens:["2"]},{type:"define",name:"DIFFUSE_FRESNEL",tokens:["3"]},{type:"define",name:"MAPPING_TYPE_TEXTURE",tokens:["0.0"]},{type:"define",name:"MAPPING_TYPE_POINT",tokens:["1.0"]},{type:"define",name:"MAPPING_TYPE_VECTOR",tokens:["2.0"]},{type:"define",name:"MAPPING_TYPE_NORMAL",tokens:["3.0"]}]},exports["include/pack.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","ck","=","255.0",";","float","cl","=","0.0",";","float","cm","=","1.0",";","vec4","cq","(","const","in","float","cn",")","{","vec4","co",",","cp",";","co","=","vec4","(","ck","*","ck","*","ck",",","ck","*","ck",",","ck",",","cm",")",";","cp","=","vec4","(","cl",",","cm","/","ck",",","cm","/","ck",",","cm","/","ck",")",";","co","=","fract","(","cn","*","co",")",";","co","-=","co",".","xxyz","*","cp",";","return","co",";","}","float","cu","(","const","in","vec4","cr",")","{","vec4","cs",";","float","ct",";","cs","=","vec4","(","cm","/","(","ck","*","ck","*","ck",")",",","cm","/","(","ck","*","ck",")",",","cm","/","ck",",","cm",")",";","ct","=","dot","(","cr",",","cs",")",";","return","ct",";","}","vec4","cq","(","const","in","vec2","cv",")","{","vec4","cw",";","vec2","cx",",","cy",";","cx","=","vec2","(","ck",",","cm",")",";","cy","=","vec2","(","cl",",","cm","/","ck",")",";","cw","=","fract","(","cv",".","xxyy","*","cx",".","xyxy",")",";","cw","-=","cw",".","xxzz","*","cy",".","xyxy",";","if","(","cv",".","r","==","cm",")","cw",".","rg","=","vec2","(","cl",",","cm",")",";","if","(","cv",".","g","==","cm",")","cw",".","ba","=","vec2","(","cl",",","cm",")",";","return","cw",";","}","vec2","cC","(","const","in","vec4","cz",")","{","vec2","cA",",","cB",";","cB","=","vec2","(","cm","/","ck",",","cm",")",";","cA",".","r","=","dot","(","cz",".","rg",",","cB",")",";","cA",".","g","=","dot","(","cz",".","ba",",","cB",")",";","return","cA",";","}"]}]},exports["include/procedural.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","cK","=","0.0",";","float","cL","=","1.0",";","vec4","cN","(","vec4","cM",")","{","return","cM","-","floor","(","cM","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec3","cN","(","vec3","cO",")","{","return","cO","-","floor","(","cO","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec2","cN","(","vec2","cP",")","{","return","cP","-","floor","(","cP","*","(","cL","/","289.0",")",")","*","289.0",";","}","vec4","cR","(","vec4","cQ",")","{","return","cQ","-","floor","(","cQ","*","(","cL","/","7.0",")",")","*","7.0",";","}","vec4","cT","(","vec4","cS",")","{","return","cN","(","(","34.0","*","cS","+","5.0",")","*","cS",")",";","}"]},{type:"define",name:"K",tokens:["0.142857142857"]},{type:"define",name:"K2",tokens:["0.0714285714285"]},{type:"define",name:"JITTER",tokens:["0.7"]},{type:"textline",tokens:["vec2","da","(","vec2","cU",")","{","vec4","cV",",","cW",",","cX",",","cY",";","vec2","cZ",",","c_",";","cZ","=","cN","(","floor","(","cU",")",")",";","c_","=","fract","(","cU",")",";","cV","=","c_",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","cW","=","c_",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","cX","=","cT","(","cZ",".","x","+","vec4","(","cK",",","cL",",","cK",",","cL",")",")",";","cX","=","cT","(","cX","+","cZ",".","y","+","vec4","(","cK",",","cK",",","cL",",","cL",")",")",";","cY","=","cR","(","cX",")","*","K","+","K2",";","cX","=","cR","(","floor","(","cX","*","K",")",")","*","K","+","K2",";","cV","=","cV","+","JITTER","*","cY",";","cY","=","cW","+","JITTER","*","cX",";","cW","=","cV","*","cV","+","cY","*","cY",";"]},{type:"condition",parts:[{type:"if",expression:["1"],group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","min","(","cW",".","xy",",","cW",".","zw",")",";","cW",".","x","=","min","(","cW",".","x",",","cW",".","y",")",";","return","cW",".","xx",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["cW",".","xy","=","(","cW",".","x","<","cW",".","y",")","?","cW",".","xy",":","cW",".","yx",";","cW",".","xz","=","(","cW",".","x","<","cW",".","z",")","?","cW",".","xz",":","cW",".","zx",";","cW",".","xw","=","(","cW",".","x","<","cW",".","w",")","?","cW",".","xw",":","cW",".","wx",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","z",")",";","cW",".","y","=","min","(","cW",".","y",",","cW",".","w",")",";","return","sqrt","(","cW",".","xy",")",";"]}]}}]},{type:"textline",tokens:["}","mat3","dj","(","vec2","db",",","float","dc",")","{","vec4","dd",",","de",",","df",",","dg",";","vec2","dh",",","di",";","dh","=","cN","(","floor","(","db",")",")",";","di","=","fract","(","db",")",";","dd","=","di",".","x","+","vec4","(","-","0.5",",","-","1.5",",","-","0.5",",","-","1.5",")",";","de","=","di",".","y","+","vec4","(","-","0.5",",","-","0.5",",","-","1.5",",","-","1.5",")",";","df","=","cT","(","dh",".","x","+","vec4","(","cK",",","cL",",","cK",",","cL",")",")",";","df","=","cT","(","df","+","dh",".","y","+","vec4","(","cK",",","cK",",","cL",",","cL",")",")",";","dg","=","cR","(","df",")","*","K","+","K2",";","df","=","cR","(","floor","(","df","*","K",")",")","*","K","+","K2",";","dd","=","dd","+","JITTER","*","dg",";","dg","=","de","+","JITTER","*","df",";","de","=","dd","*","dd","+","dg","*","dg",";","dd","+=","dc",";","dg","+=","dc",";","df","=","dd","*","dd","+","dg","*","dg",";","dd","+=","dc",";","dg","+=","dc",";","dd","=","dd","*","dd","+","dg","*","dg",";","de",".","xy","=","min","(","de",".","xy",",","de",".","zw",")",";","de",".","x","=","min","(","de",".","x",",","de",".","y",")",";","df",".","xy","=","min","(","df",".","xy",",","df",".","zw",")",";","df",".","x","=","min","(","df",".","x",",","df",".","y",")",";","dd",".","xy","=","min","(","dd",".","xy",",","dd",".","zw",")",";","dd",".","x","=","min","(","dd",".","x",",","dd",".","y",")",";","return","mat3","(","de",".","xx",",","cK",",","df",".","xx",",","cK",",","dd",".","xx",",","cK",")",";","}","vec3","dl","(","vec3","dk",")","{","return","cN","(","(","(","dk","*","34.0",")","+","cL",")","*","dk",")",";","}","float","dx","(","vec2","dm",")","{","vec3","dn",",","dp",",","dq",",","dr",";","vec4","ds",";","vec2","dt",",","du",",","dv",";","const","vec4","dw","=","vec4","(","0.211324865405187",",","0.366025403784439",",","-","0.577350269189626",",","0.024390243902439",")",";","dt","=","floor","(","dm","+","dot","(","dm",",","dw",".","yy",")",")",";","du","=","dm","-","dt","+","dot","(","dt",",","dw",".","xx",")",";","dv","=","(","du",".","x",">","du",".","y",")","?","vec2","(","cL",",","cK",")",":","vec2","(","cK",",","cL",")",";","ds","=","du",".","xyxy","+","dw",".","xxzz",";","ds",".","xy","-=","dv",";","dt","=","cN","(","dt",")",";","dn","=","dl","(","dl","(","dt",".","y","+","vec3","(","cK",",","dv",".","y",",","cL",")",")","+","dt",".","x","+","vec3","(","cK",",","dv",".","x",",","cL",")",")",";","dp","=","max","(","0.5","-","vec3","(","dot","(","du",",","du",")",",","dot","(","ds",".","xy",",","ds",".","xy",")",",","dot","(","ds",".","zw",",","ds",".","zw",")",")",",","cK",")",";","dp","=","dp","*","dp",";","dp","=","dp","*","dp",";","dn","=","2.0","*","fract","(","dn","*","dw",".","www",")","-","cL",";","dq","=","abs","(","dn",")","-","0.5",";","dr","=","floor","(","dn","+","0.5",")",";","dn","=","dn","-","dr",";","dp","*=","1.79284291400159","-","0.85373472095314","*","(","dn","*","dn","+","dq","*","dq",")",";","dr",".","x","=","dn",".","x","*","du",".","x","+","dq",".","x","*","du",".","y",";","dr",".","yz","=","dn",".","yz","*","ds",".","xz","+","dq",".","yz","*","ds",".","yw",";","return","130.0","*","dot","(","dp",",","dr",")",";","}","vec2","dB","(","vec2","dy",")","{","float","dz",",","dA",";","dz","=","dot","(","dy",",","vec2","(","12.9898",",","78.233",")",")",";","dA","=","dot","(","dy",",","vec2","(","12.9898",",","78.233",")","*","2.0",")",";","dz","=","fract","(","sin","(","dz",")","*","43758.5453",")","*","2.0","-","cL",";","dA","=","fract","(","sin","(","dA",")","*","43758.5453",")","*","2.0","-","cL",";","return","vec2","(","dz",",","dA",")",";","}"]}]},exports["include/shadow.glslf"] = {type:"group",parts:[{type:"var",name:"CSM_BLEND_BETWEEN_CASCADES",tokens:["1.0"]},{type:"var",name:"CSM_FADE_LAST_CASCADE",tokens:["1.0"]},{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","dC",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dD","=","0.1",";","const","float","dE","=","0.1",";","const","float","dF","=","-","0.01",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["const","float","dG","=","0.05",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["mat4","dH","=","mat4","(","0.14383161",",","0.34495938",",","-","0.38277543",",","-","0.26496911",",","0.53742981",",","0.19984126",",","0.79197514",",","-","0.094184101",",","-","0.94201624",",","-","0.91588581",",","-","0.2418884",",","0.44323325",",","-","0.81544232",",","0.94558609",",","-","0.81409955",",","0.97484398",")",";","mat4","dI","=","mat4","(","-","0.1410079",",","0.2938776",",","0.27676845",",","-","0.41893023",",","-","0.4737342",",","0.78641367",",","0.19090188",",","-","0.9293887",",","-","0.39906216",",","0.45771432",",","0.99706507",",","-","0.97511554",",","-","0.87912464",",","-","0.76890725",",","0.9143759",",","0.7564837",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["bool","dL","(","vec2","dJ",",","float","dK",")","{","return","all","(","lessThanEqual","(","dJ",",","vec2","(","1.0","+","dK",")",")",")","&&","all","(","greaterThanEqual","(","dJ",",","vec2","(","0.0","-","dK",")",")",")",";","}"]}]}}]},{type:"textline",tokens:["float","dX","(","vec3","dM",",","sampler2D","dN",",","float","dO",")","{","vec2","dP",",","dQ",";","mat2","dR",";","float","dS",",","dT",",","dU",";","dM",".","z","=","clamp","(","dM",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["dS","=","0.0",";","dT","=","dB","(","dM",".","xy",")",".","x","*","M_PI",";","dU","=","cos","(","dT",")",";","dT","=","sin","(","dT",")",";","dR","=","mat2","(","dU",",","dT",",","-","dT",",","dU",")",";","for","(","int","dV","=","0",";","dV","<","4",";","dV","++",")","for","(","int","dW","=","0",";","dW","<","4",";","dW","++",")","{","dQ",".","x","=","dH","[","dV","]","[","dW","]",";","dQ",".","y","=","dI","[","dV","]","[","dW","]",";","dQ","=","dR","*","dQ",";","dP","=","dM",".","xy","+","dQ","*","dO","/","SHADOW_TEX_RES",";"]},{type:"condition",parts:[{type:"if",expression:["!","CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","!","dL","(","dP",",","dF",")",")","dS","+=","1.0",";","else"]}]}}]},{type:"textline",tokens:["dS","+=","step","(","dM",".","z",",","texture2D","(","dN",",","dP",")",".","r",")",";","}","dS","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["dS","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","dS",",","0.0",",","1.0",")",";","}","float","en","(","vec3","dY",",","sampler2D","dZ",",","vec3","d_",",","sampler2D","ea",",","float","eb",",","float","ec",",","float","ed",")","{","vec2","ee",",","ef",";","mat2","eg",";","float","eh",",","ei",",","ej",",","ek",";","dY",".","z","=","clamp","(","dY",".","z",",","0.0",",","1.0",")",";","d_",".","z","=","clamp","(","d_",".","z",",","0.0",",","1.0",")",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_DEPTH"],group:{type:"group",parts:[{type:"textline",tokens:["eh","=","0.0",";","ei","=","0.0",";","ej","=","dB","(","dY",".","xy",")",".","x","*","M_PI",";","ek","=","cos","(","ej",")",";","ej","=","sin","(","ej",")",";","eg","=","mat2","(","ek",",","ej",",","-","ej",",","ek",")",";","for","(","int","el","=","0",";","el","<","4",";","el","++",")","for","(","int","em","=","0",";","em","<","4",";","em","++",")","{","ef",".","x","=","dH","[","el","]","[","em","]",";","ef",".","y","=","dI","[","el","]","[","em","]",";","ef","=","eg","*","ef",";","ee","=","dY",".","xy","+","ef","*","eb","/","SHADOW_TEX_RES",";","eh","+=","step","(","dY",".","z",",","texture2D","(","dZ",",","ee",")",".","r",")",";","ee","=","d_",".","xy","+","ef","*","ec","/","SHADOW_TEX_RES",";","ei","+=","step","(","d_",".","z",",","texture2D","(","ea",",","ee",")",".","r",")",";","}","eh","=","mix","(","eh",",","ei",",","ed",")",";","eh","/=","16.0",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eh","=","1.0",";"]}]}}]},{type:"textline",tokens:["return","clamp","(","eh",",","0.0",",","1.0",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["float","er","(","vec2","eo",")","{","float","ep",",","eq",";","ep","=","min","(","eo",".","x",",","eo",".","y",")",";","eq","=","min","(","1.0","-","eo",".","x",",","1.0","-","eo",".","y",")",";","return","min","(","ep",",","eq",")",";","}","float","eu","(","float","es",",","float","et",")","{","if","(","et",">=","0.0","&&","et","<=","dE",")","es","=","(","es","-","1.0",")","/","dE","*","et","+","1.0",";","return","es",";","}","float","eF","(","vec3","ev",",","vec3","ew",",","sampler2D","ex",",","sampler2D","ey",",","float","ez",",","float","eA",",","float","eB",",","float","eC",")","{","float","eD",",","eE",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_BLEND_BETWEEN_CASCADES"],group:{type:"group",parts:[{type:"textline",tokens:["eE","=","er","(","ev",".","xy",")",";","if","(","-","eC",">","eB","&&","eE",">=","0.0","&&","eE","<=","dD","&&","dL","(","ew",".","xy",",","0.0",")",")","{","eE","=","1.0","-","eE","/","dD",";","eD","=","en","(","ev",",","ex",",","ew",",","ey",",","ez",",","eA",",","eE",")",";","}","else"]}]}}]},{type:"textline",tokens:["eD","=","dX","(","ev",",","ex",",","ez",")",";","return","eD",";","}","float","eN","(","vec3","eG",",","sampler2D","eH",",","float","eI",",","float","eJ",",","float","eK",")","{","float","eL",",","eM",";","eL","=","dX","(","eG",",","eH",",","eI",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_FADE_LAST_CASCADE"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","-","eK",">","eJ",")","{","eM","=","er","(","eG",".","xy",")",";","eL","=","eu","(","eL",",","eM",")",";","}"]}]}}]},{type:"textline",tokens:["return","eL",";","}","float","eU","(","float","eO",")","{","vec3","eP",",","eQ",",","eR",",","eS",";","float","eT",";","eT","=","1.0",";","eP","=","cE",".","xyz","/","cE",".","w",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["eQ","=","cF",".","xyz","/","cF",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eR","=","cG",".","xyz","/","cG",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eS","=","cH",".","xyz","/","cH",".","w",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dL","(","eP",".","xy",",","0.0",")",")","{","eT","=","eF","(","eP",",","eQ",",","u_shadow_map0",",","u_shadow_map1",",","u_pcf_blur_radii","[","0","]",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","0","]",",","eO",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["if","(","dL","(","eP",".","xy",",","dG",")",")","{","eT","=","eN","(","eP",",","u_shadow_map0",",","u_pcf_blur_radii","[","0","]",",","u_csm_center_dists","[","0","]",",","eO",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eQ",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eF","(","eQ",",","eR",",","u_shadow_map1",",","u_shadow_map2",",","u_pcf_blur_radii","[","1","]",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","1","]",",","eO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eN","(","eQ",",","u_shadow_map1",",","u_pcf_blur_radii","[","1","]",",","u_csm_center_dists","[","1","]",",","eO",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eR",".","xy",",","0.0",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eF","(","eR",",","eS",",","u_shadow_map2",",","u_shadow_map3",",","u_pcf_blur_radii","[","2","]",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","2","]",",","eO",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["eT","=","eN","(","eR",",","u_shadow_map2",",","u_pcf_blur_radii","[","2","]",",","u_csm_center_dists","[","2","]",",","eO",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["else","{","if","(","dL","(","eS",".","xy",",","0.0",")",")","eT","=","eN","(","eS",",","u_shadow_map3",",","u_pcf_blur_radii","[","3","]",",","u_csm_center_dists","[","3","]",",","eO",")",";","}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["}"]}]}}]},{type:"textline",tokens:["return","eT",";","}"]}]}}]}]}}]},{type:"textline",tokens:["float","eZ","(","inout","vec3","eV",")","{","float","eW",";","vec3","eX",";","vec2","eY",";"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["eY","=","texture2DProj","(","u_shadow_mask",",","cI",")",".","rg",";","eX","=","vec3","(","eY",".","r",")",";","eW","=","eY",".","g",";","dC","=","vec4","(","eX",",","eW",")",";","eV","*=","dC",".","a",";","return","dC",".","r",";"]}]}},{type:"elif",expression:["SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["return","eU","(","cJ",".","z",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","1.0",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/dynamic_grass.glslv"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["DYNAMIC_GRASS"],group:{type:"group",parts:[{type:"textline",tokens:["vec2","fd","(","vec3","e_",",","float","fa",",","vec2","fb",")","{","vec2","fc",";","fc","=","vec2","(","(","e_",".","x","-","fb",".","x",")","/","fa",",","-","(","e_",".","z","-","fb",".","y",")","/","fa",")",";","return","fract","(","fc",")",";","}","vec2","fh","(","vec2","fe",",","float","ff",",","vec2","fg",")","{","return","vec2","(","fe",".","x","*","ff",",","-","fe",".","y","*","ff",")","+","fg",";","}","d","fi","(",")","{","return","d","(","vec3","(","-","10000.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",",","vec3","(","0.0",")",")",";","}","d","fE","(","vec3","fj",",","vec3","fk",",","vec3","fl",",","vec3","fm",",","vec3","fn",",","sampler2D","fo",",","sampler2D","fp",",","vec3","fq",",","float","fr",",","vec3","fs",",","vec4","ft",",","mat4","fu",")","{","mat4","fv",";","vec4","fw",";","vec2","fx",",","fy",",","fz",";","float","fA",",","fB",";","vec3","fC",";","fC","=","j","(","ft",",","vec3","(","0.0",",","-","1.0",",","0.0",")",")",";","fA","=","-","fC",".","x",";","fB","=","-","fC",".","z",";","fx","=","vec2","(","fs",".","x","+","fr","*","(","-","1.0","-","fA",")","/","2.0",",","fs",".","z","+","fr","*","(","1.0","-","fB",")","/","2.0",")",";","fy","=","fd","(","fn",",","fr",",","fx",")",";","fA","=","fr","/","2.0",";","fz","=","abs","(","fh","(","fy","-","vec2","(","0.5",")",",","fr",",","vec2","(","0.0",")",")",")",";","fB","=","fA","*","(","1.0","+","sqrt","(","2.0",")",")","/","2.0",";","if","(","length","(","fz",")",">","fB",")","return","fi","(",")",";","fA","=","fr","/","fq",".","z",";","fz","=","(","fy","-","vec2","(","0.5",")",")","*","fA","+","vec2","(","0.5",")",";","fC","=","fC","*","(","fr","/","fq",".","z","-","1.0",")","/","2.0",";","fz",".","x","+=","fC",".","x",";","fz",".","y","-=","fC",".","z",";","fw","=","texture2D","(","fp",",","fz",")",";","fB","=","fw",".","r",";","if","(","fB","<","u_scale_threshold",")","return","fi","(",")",";","fA","=","fq",".","y","-","fq",".","x",";","fA","=","fq",".","y","-","texture2D","(","fo",",","fz",")",".","r","*","fA",";","fz","=","fj",".","xz","-","fn",".","xz",";","fn",".","xz","=","fh","(","fy",",","fr",",","fx",")",";","fn",".","y","=","fA",";","fj",".","xz","=","fn",".","xz","+","fz",";","fj",".","y","*=","fB",";","fj",".","y","+=","fA",";","fC","=","fw",".","gba",";"]},{type:"condition",parts:[{type:"if",expression:["BILLBOARD"],group:{type:"group",parts:[{type:"textline",tokens:["fj","-=","fn",";","fv","=","ai","(","fs",",","fn",",","fu",")",";","d","fD","=","av","(","fj",",","fn",",","fk",",","fl",",","fm",",","fv",")",";","fD",".","b","=","fn",";","fD",".","f","=","fC",";","return","F","(","fD",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","F","(","d","(","fj",",","fn",",","fk",",","fl",",","fm",",","fC",")",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/shadow.glslv"] = {type:"group",parts:[{type:"var",name:"SHADOW_TEX_RES",tokens:["0.0"]},{type:"condition",parts:[{type:"if",expression:["SHADOW_SRC","!=","SHADOW_SRC_MASK","&&","SHADOW_SRC","!=","SHADOW_SRC_NONE"],group:{type:"group",parts:[{type:"textline",tokens:["vec4","fK","(","mat4","fF",",","vec4","fG",")","{","vec4","fH",";","float","fI",";","vec2","fJ",";","fJ","=","(","fF","*","u_v_light_matrix","[","3","]",")",".","xy",";","fI","=","SHADOW_TEX_RES","/","2.0",";","fJ","=","floor","(","fJ","*","fI","+","0.5",")","/","fI","-","fJ",";","fH","=","fF","*","fG",";","fH",".","xy","+=","fJ",";","fH","=","u_b_light_matrix","*","fH",";","return","fH",";","}","void","fO","(","vec3","fL",")","{","vec4","fM",";","vec3","fN",";","fN","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";","fM","=","u_v_light_matrix","*","vec4","(","fL","+","u_normal_offset","*","fN",",","1.0",")",";","cE","=","fK","(","u_p_light_matrix0",",","fM",")",";"]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION1"],group:{type:"group",parts:[{type:"textline",tokens:["cF","=","fK","(","u_p_light_matrix1",",","fM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION2"],group:{type:"group",parts:[{type:"textline",tokens:["cG","=","fK","(","u_p_light_matrix2",",","fM",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["CSM_SECTION3"],group:{type:"group",parts:[{type:"textline",tokens:["cH","=","fK","(","u_p_light_matrix3",",","fM",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}},{type:"elif",expression:["SHADOW_SRC","==","SHADOW_SRC_MASK"],group:{type:"group",parts:[{type:"textline",tokens:["void","fO","(","vec4","fP",")","{","float","fQ",",","fR",",","fS",";","fQ","=","fP",".","x",";","fR","=","fP",".","y",";","fS","=","fP",".","w",";","cI",".","x","=","(","fQ","+","fS",")","/","2.0",";","cI",".","y","=","(","fR","+","fS",")","/","2.0",";","cI",".","z","=","fS",";","}"]}]}}]}]},exports["include/gamma.glslf"] = {type:"group",parts:[{type:"define",name:"GAMMA",tokens:["1"]},{type:"define",name:"PREMULTIPLY_ALPHA",tokens:["1"]},{type:"textline",tokens:["void","fV","(","inout","vec3","fU",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["fU","=","max","(","vec3","(","0.0",")",",","fU",")",";","fU","=","pow","(","fU",",","vec3","(","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","fX","(","inout","vec3","fW",")","{"]},{type:"condition",parts:[{type:"if",expression:["GAMMA"],group:{type:"group",parts:[{type:"textline",tokens:["fW","=","max","(","vec3","(","0.0",")",",","fW",")",";","fW","=","pow","(","fW",",","vec3","(","1.0","/","2.2",")",")",";"]}]}}]},{type:"textline",tokens:["}","void","f_","(","inout","vec3","fY",",","in","float","fZ",")","{"]},{type:"condition",parts:[{type:"if",expression:["PREMULTIPLY_ALPHA"],group:{type:"group",parts:[{type:"textline",tokens:["fY","=","fY","*","fZ",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/fog.glslf"] = {type:"group",parts:[{type:"var",name:"WAVES_HEIGHT",tokens:["0.0"]},{type:"textline",tokens:["void","gg","(","inout","vec3","gc",",","in","float","gd",",","in","vec4","ge",")","{","float","gf",";","gf","=","ge",".","w","*","gd",";","gf","=","exp","(","-","gf","*","gf",")",";","gf","=","clamp","(","gf",",","0.0",",","1.0",")",";","gc","=","mix","(","ge",".","rgb",",","gc",",","gf",")",";","}"]},{type:"condition",parts:[{type:"if",expression:["PROCEDURAL_FOG"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","gm","(","in","mat4","gh",",","in","vec3","gi",")","{","vec3","gj",",","gk",",","gl",";","gj","=","mix","(","gh","[","0","]",".","rgb",",","gh","[","1","]",".","rgb",",","max","(","sign","(","gi",".","x",")",",","0.0",")",")",";","gk","=","mix","(","gh","[","2","]",".","rgb",",","gh","[","3","]",".","rgb",",","max","(","sign","(","gi",".","z",")",",","0.0",")",")",";","gl","=","vec3","(","gh","[","0","]",".","a",",","gh","[","1","]",".","a",",","gh","[","2","]",".","a",")",";","gj","=","mix","(","gj",",","gk",",","abs","(","gi",".","z",")",")",";","gj","=","mix","(","gj",",","gl",",","abs","(","gi",".","y",")",")",";","return","gj",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["WATER_EFFECTS"],group:{type:"group",parts:[{type:"textline",tokens:["void","go","(","inout","float","gn",")","{","gn","-=","0.5",";","gn","=","4.0","*","(","gn","*","gn","*","gn",")","+","0.5",";","}","void","gC","(","inout","vec3","gp",",","in","float","gq",",","in","vec3","gr",",","in","float","gs",",","in","vec4","gt",",","in","vec4","gu",",","in","float","gv",",","in","float","gw",")","{","vec3","gx",",","gy",";","float","gz",",","gA",",","gB",";","gz","=","gu",".","w","*","gq",";","gz","=","exp","(","-","gz","*","gz",")",";","gz","=","clamp","(","gz",",","0.0",",","1.0",")",";","gA","=","max","(","gr",".","y",",","0.0",")",";","gq","=","max","(","gq","-","max","(","gs","/","gA",",","0.0",")",",","0.0",")",";","gB","=","gt",".","w","*","gq",";","gB","=","1.0","-","gB",";","gB","=","max","(","gB",",","0.0",")",";","go","(","gB",")",";","gB","+=","max","(","gv","-","0.5",",","0.0",")",";","if","(","gB","<","gz",")","{","gx","=","vec3","(","0.0",",","0.02",",","0.05",")",";","gy","=","gt",".","rgb",";","gs","=","clamp","(","-","gs","*","0.03",",","0.0",",","0.8",")",";","gy","=","mix","(","gy",",","gx",",","min","(","gA",",","1.0",")",")",";","gy","=","mix","(","gy",",","vec3","(","0.0",")",",","gs",")","*","gw",";","gp","=","mix","(","gy",",","gp",",","gB",")",";","}","if","(","gB",">=","gz",")","{","gp","=","mix","(","gu",".","rgb",",","gp",",","gz",")",";","}","}","void","gK","(","inout","vec3","gD",",","in","float","gE",",","in","float","gF",",","in","vec4","gG",",","in","float","gH",")","{","vec3","gI",";","float","gJ",";","gJ","=","gG",".","w","*","gE",";","gJ","=","1.0","-","gJ",";","gJ","=","clamp","(","gJ",",","0.0",",","1.0",")",";","go","(","gJ",")",";","gF","=","clamp","(","-","gF","*","0.03",",","0.0",",","0.8",")",";","gI","=","mix","(","gG",".","rgb",",","vec3","(","0.0",")",",","gF",")","*","gH",";","gD","=","mix","(","gI",",","gD",",","gJ",")",";","}"]}]}}]}]},exports["include/lighting.glslf"] = {type:"group",parts:[{type:"var",name:"NUM_LIGHTS",tokens:["0"]},{type:"var",name:"LAMP_IND",tokens:["0"]},{type:"var",name:"LAMP_SPOT_SIZE",tokens:["0"]},{type:"var",name:"LAMP_SPOT_BLEND",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_DIST",tokens:["0"]},{type:"var",name:"LAMP_LIGHT_FACT_IND",tokens:["0"]},{type:"var",name:"LAMP_FAC_CHANNELS",tokens:["rgb"]},{type:"var",name:"LAMP_SHADOW_MAP_IND",tokens:["0"]},{type:"var",name:"NUM_LFACTORS",tokens:["0"]},{type:"define",name:"M_PI",tokens:["3.14159265359"]},{type:"textline",tokens:["float","gL","=","0.0",";","float","gM","=","1.0",";","float","gN","=","0.5",";","struct","gO","{","vec4","a",";","vec3","b",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["float","gW","(","vec3","gP",",","vec3","gQ",",","vec3","gR",",","float","gS",",","float","gT",")","{","float","gU",";","vec3","gV",";","gV","=","normalize","(","gP","+","gQ",")",";","gU","=","(","gM","-","gS",")","*","max","(","dot","(","gR",",","gV",")",",","gL",")","+","gS",";","return","pow","(","gU",",","gT",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["float","hf","(","vec3","gX",",","vec3","gY",",","vec3","gZ",",","float","g_",")","{","float","ha",",","hb",",","hc",",","hd",";","vec3","he",";","he","=","normalize","(","gX","+","gY",")",";","ha","=","max","(","dot","(","gZ",",","he",")",",","0.001",")",";","hb","=","max","(","dot","(","gZ",",","gY",")",",","0.01",")",";","hc","=","max","(","dot","(","gZ",",","gX",")",",","0.01",")",";","ha","=","tan","(","acos","(","ha",")",")",";","hd","=","max","(","g_",",","0.001",")",";","return","hc","*","(","gM","/","(","4.0","*","M_PI","*","hd","*","hd",")",")","*","(","exp","(","-","(","ha","*","ha",")","/","(","hd","*","hd",")",")","/","(","sqrt","(","hb","*","hc",")",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["float","hn","(","vec3","hg",",","vec3","hh",",","vec3","hi",",","float","hj",",","float","hk",")","{","float","hl",";","vec3","hm",";","hm","=","normalize","(","hg","+","hh",")",";","hl","=","acos","(","dot","(","hm",",","hi",")",")",";","if","(","hl","<","hj",")","return","gM",";","else","if","(","hl",">=","hj","+","hk","||","hk","==","gL",")","return","gL",";","else","return","gM","-","(","hl","-","hj",")","/","hk",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["void","hC","(","float","ho",",","vec3","hp",",","vec3","hq",",","vec3","hr",",","float","hs",",","inout","float","ht",")","{","vec3","hu",",","hv",";","float","hw",",","hx",",","hy",",","hz",",","hA",",","hB",";","if","(","hs",">","gL",")","{","hw","=","max","(","dot","(","hp",",","hr",")",",","gL",")",";","hx","=","hs","*","hs",";","hy","=","gM","-","gN","*","(","hx","/","(","hx","+","0.33",")",")",";","hu","=","hq","-","ho","*","hp",";","hv","=","hr","-","hw","*","hp",";","if","(","length","(","hu",")","==","gL","||","length","(","hv",")","==","gL","||","abs","(","ho",")",">","gM","||","abs","(","hw",")",">","gM",")","ht","=","ht","*","hy",";","else","{","hz","=","acos","(","ho",")",";","hw","=","acos","(","hw",")",";","hu","=","normalize","(","hu",")",";","hv","=","normalize","(","hv",")",";","hA","=","max","(","hz",",","hw",")",";","hB","=","min","(","hz",",","hw",")",";","hB","*=","0.95",";","hz","=","max","(","dot","(","hu",",","hv",")",",","gL",")",";","hw","=","0.45","*","(","hx","/","(","hx","+","0.09",")",")",";","ht","=","ht","*","(","hy","+","(","hw","*","hz","*","sin","(","hA",")","*","tan","(","hB",")",")",")",";","}","}","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["void","hJ","(","vec3","hD",",","vec3","hE",",","float","hF",",","float","hG",",","out","float","hH",")","{","float","hI",";","if","(","hF","==","gL",")","{","hH","=","gM",";","}","else","{","hI","=","gM","+","abs","(","dot","(","hE",",","hD",")",")",";","hI","=","hG","+","(","gM","-","hG",")","*","pow","(","hI",",","hF",")",";","hH","=","clamp","(","hI",",","gL",",","gM",")",";","}","}"]}]}}]},{type:"textline",tokens:["void","hR","(","vec3","hK",",","vec3","hL",",","vec3","hM",",","vec2","hN",",","const","float","hO",",","out","float","hP",")","{","float","hQ",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_FRESNEL"],group:{type:"group",parts:[{type:"textline",tokens:["hJ","(","hK",",","hL",",","hN","[","0","]",",","hN","[","1","]",",","hP",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hQ","=","max","(","dot","(","hK",",","hL",")",",","gL",")",";","hP","=","(","gM","-","hO",")","*","hQ","+","hO",";"]},{type:"condition",parts:[{type:"if",expression:["DIFFUSE_SHADER","==","DIFFUSE_OREN_NAYAR"],group:{type:"group",parts:[{type:"textline",tokens:["hC","(","hQ",",","hK",",","hL",",","hM",",","hN","[","0","]",",","hP",")",";"]}]}}]}]}}]},{type:"textline",tokens:["}","void","hY","(","vec3","hS",",","vec3","hT",",","vec3","hU",",","float","hV",",","vec2","hW",",","out","float","hX",")","{"]},{type:"condition",parts:[{type:"if",expression:["SPECULAR_SHADER","==","SPECULAR_PHONG","||","SPECULAR_SHADER","==","SPECULAR_COOKTORR"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","gW","(","hS",",","hT",",","hU",",","hV",",","hW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_WARDISO"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","hf","(","hS",",","hT",",","hU",",","hW","[","0","]",")",";"]}]}},{type:"elif",expression:["SPECULAR_SHADER","==","SPECULAR_TOON"],group:{type:"group",parts:[{type:"textline",tokens:["hX","=","hn","(","hS",",","hT",",","hU",",","hW","[","0","]",",","hW","[","1","]",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["hX","=","gL",";"]}]}}]},{type:"textline",tokens:["}","void","iv","(","vec3","hZ",",","vec3","h_",",","vec3","ia",",","vec2","ib",",","vec4","ic",",","vec3","id",",","vec3","ie",",","vec3","ig",",","inout","gO","ih",",","float","ii",",","vec2","ij",",","vec2","ik",",","float","il",")","{","float","im",",","io",",","ip",",","iq",",","ir",",","is",",","it",",","iu",";","im","=","gL",";","if","(","ib",".","r","!=","gL",")","hR","(","ia",",","h_",",","hZ",",","ij",",","il",",","im",")",";","io","=","gL",";","if","(","ib",".","g","!=","gL",")","hY","(","h_",",","hZ",",","ia",",","il",",","ik",",","io",")",";"]},{type:"condition",parts:[{type:"if",expression:["USE_NODE_B4W_TRANSLUCENCY"],group:{type:"group",parts:[{type:"textline",tokens:["if","(","dot","(","h_",",","ia",")","*","dot","(","hZ",",","ia",")","<","gL",")","{","ip","=","ic",".","x",";","iq","=","ic",".","y",";","ir","=","ic",".","z",";","is","=","ic",".","w",";","it","=","clamp","(","abs","(","dot","(","h_",",","ia",")",")",",","gL",",","gM",")",";","iu","=","clamp","(","dot","(","hZ",",","-","h_",")",",","gL",",","gM",")",";","iu","=","pow","(","iu",",","iq",")",";","ih",".","a","+=","ii","*","vec4","(","ig","*","it","*","pow","(","id",",","vec3","(","ip",")",")",",","gM",")",";","ih",".","a","+=","ir","*","mix","(","vec4","(","id",",","gM",")",",","vec4","(","gM",")",",","is",")","*","ii","*","vec4","(","ig","*","it","*","vec3","(","iu",")",",","gM",")",";","}","else","{","ih",".","b","+=","ig","*","ie","*","io",";","ih",".","a","+=","vec4","(","ig","*","id","*","im",",","io",")",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["ih",".","b","+=","ig","*","ie","*","io",";","ih",".","a","+=","vec4","(","ig","*","id","*","im",",","io",")",";"]}]}}]},{type:"textline",tokens:["}"]},{type:"lamp",name:"POINT",statements:[{type:"textline",tokens:["iY","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iQ","=","iG","[","LAMP_IND","]",";","iR","=","iI","[","LAMP_IND","]",";","iM","=","gL",";"]},{type:"textline",tokens:["iR","=","iR",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iR","*=","iF",";","iQ","=","iQ","-","iA",";"]},{type:"textline",tokens:["iN","=","length","(","iQ",")",";","iR","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","iN","*","iN",")",";","iQ","=","normalize","(","iQ",")",";","iv","(","iC",",","iQ",",","iB",",","iY",",","iL",",","iy",",","iz",",","iR",",","jb",",","iK",",","iE",",","iD",",","iM",")",";"]}]},{type:"lamp",name:"SPOT",statements:[{type:"textline",tokens:["iZ","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iS","=","iG","[","LAMP_IND","]",";","iT","=","iI","[","LAMP_IND","]",";","iU","=","iH","[","LAMP_IND","]",";","iN","=","gL",";"]},{type:"textline",tokens:["iT","=","iT",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iT","*=","iF",";","iS","=","iS","-","iA",";"]},{type:"textline",tokens:["iO","=","length","(","iS",")",";","iT","*=","LAMP_LIGHT_DIST","/","(","LAMP_LIGHT_DIST","+","iO","*","iO",")",";","iS","=","normalize","(","iS",")",";"]},{type:"textline",tokens:["iO","=","dot","(","iS",",","iU",")",";","iO","*=","smoothstep","(","gL",",","gM",",","(","iO","-","LAMP_SPOT_SIZE",")","/","LAMP_SPOT_BLEND",")",";","iT","*=","iO",";","iv","(","iC",",","iS",",","iB",",","iZ",",","iL",",","iy",",","iz",",","iT",",","jb",",","iK",",","iE",",","iD",",","iN",")",";"]}]},{type:"lamp",name:"SUN",statements:[{type:"textline",tokens:["i_","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iU","=","iI","[","LAMP_IND","]",";","iV","=","iH","[","LAMP_IND","]",";","iO","=","gL",";"]},{type:"textline",tokens:["iU","=","iU",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iU","*=","iF",";","iv","(","iC",",","iV",",","iB",",","i_",",","iL",",","iy",",","iz",",","iU",",","jb",",","iK",",","iE",",","iD",",","iO",")",";"]}]},{type:"lamp",name:"HEMI",statements:[{type:"textline",tokens:["ja","=","iJ","[","LAMP_LIGHT_FACT_IND","]",".","LAMP_FAC_CHANNELS",";","iW","=","iI","[","LAMP_IND","]",";","iX","=","iH","[","LAMP_IND","]",";","iP","=","gN",";"]},{type:"textline",tokens:["iW","=","iW",";","if","(","bool","(","LAMP_SHADOW_MAP_IND",")",")","iW","*=","iF",";","iv","(","iC",",","iX",",","iB",",","ja",",","iL",",","iy",",","iz",",","iW",",","jb",",","iK",",","iE",",","iD",",","iP",")",";"]}]},{type:"condition",parts:[{type:"if",expression:["NUM_LIGHTS",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["gO","jc","(","vec3","iw",",","vec3","ix",",","vec3","iy",",","vec3","iz",",","vec3","iA",",","vec3","iB",",","vec3","iC",",","vec2","iD",",","vec2","iE",",","float","iF",",","vec3","iG","[","NUM_LIGHTS","]",",","vec3","iH","[","NUM_LIGHTS","]",",","vec3","iI","[","NUM_LIGHTS","]",",","vec4","iJ","[","NUM_LFACTORS","]",",","float","iK",",","vec4","iL",")","{","float","iM",",","iN",",","iO",",","iP",";","vec3","iQ",",","iR",",","iS",",","iT",",","iU",",","iV",",","iW",",","iX",";","vec2","iY",",","iZ",",","i_",",","ja",";","gO","jb",";","jb",".","a","=","vec4","(","iw","+","iy","*","ix",",","gL",")",";","jb",".","b","=","vec3","(","gL",")",";"]},{type:"lamps_main"},{type:"textline",tokens:["return","jb",";","}"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["gO","jh","(","vec3","jd",",","vec3","je",",","vec3","jf",")","{","gO","jg",";","jg",".","a","=","vec4","(","jd","+","jf","*","je",",","gL",")",";","jg",".","b","=","vec3","(","gL",")",";","return","jg",";","}"]}]}}]}]},exports["include/caustics.glslf"] = {type:"group",parts:[{type:"var",name:"CAUST_SPEED",tokens:["vec2","(","0.0",")"]},{type:"var",name:"CAUST_SCALE",tokens:["0.0"]},{type:"var",name:"CAUST_BRIGHT",tokens:["0.0"]},{type:"define",name:"CAUSTICS_VIEW_DISTANCE",tokens:["100.0"]},{type:"textline",tokens:["void","jA","(","inout","vec3","ji",",","float","jj",",","float","jk",",","float","jl",",","vec3","jm",",","vec3","jn",",","vec3","jo",",","vec4","jp",",","vec3","jq",",","float","jr",")","{","mat3","js",";","float","jt",",","ju",",","jv",",","jw",";","vec2","jx",";","vec3","jy",";","vec4","jz",";","if","(","jr",">","CAUSTICS_VIEW_DISTANCE",")","return",";","jz","=","jp",";","jy","=","jq","+","jm",";","jy",".","xz","=","10.0","*","sin","(","0.1","*","jy",".","xz",")",";","jy","=","jy","+","2.0","*","cross","(","-","jz",".","xyz",",","cross","(","-","jz",".","xyz",",","jy",")","+","jz",".","w","*","jy",")",";","jx","=","jy",".","xz",";","jy","=","jn",";","jt","=","max","(","dot","(","jm",",","jy",")",",","0.0",")",";","ju","=","0.025",";","jx",".","s","+=","0.5","*","sin","(","dot","(","jq","+","jk",",","vec3","(","1.0",")",")",")",";","jx",".","t","+=","0.7","*","(","-","sin","(","dot","(","jq","-","jk",",","vec3","(","-","0.7",")",")",")",")",";","jx",".","st","+=","0.23","*","cos","(","4.0","*","jj","-","CAUST_SPEED",".","x","*","jk",")",";","jx",".","st","+=","3.0","*","sin","(","jj","-","0.3","*","CAUST_SPEED",".","y","*","jk",")",";","jv","=","CAUST_SCALE","*","(","1.0","+","max","(","0.1","*","jj",",","0.0",")",")",";","js","=","dj","(","(","jx","/","jv",")",",","ju",")",";","jv","=","(","js","*","vec3","(","1.0",",","0.0",",","0.0",")",")",".","x",";","ju","=","(","js","*","vec3","(","0.0",",","1.0",",","0.0",")",")",".","x",";","jw","=","(","js","*","vec3","(","0.0",",","0.0",",","1.0",")",")",".","x",";","jy","=","CAUST_BRIGHT","*","vec3","(","jv",",","ju",",","jw",")",";","jv","=","jl","*","jt",";","ju","=","max","(","sign","(","jj",")",",","0.0",")",";","jv","=","min","(","jv","+","0.5","*","sign","(","-","jm",".","y",")","*","ju",",","1.0",")",";","jv","*=","1.0","-","ju","*","(","0.1","*","jj",")",";","jy","*=","jv",";","jy","*=","jy",";","jw","=","min","(","-","jj","+","10.0",",","1.0",")",";","ji","+=","max","(","(","2.0","*","jo","*","jy",")","*","jw",",","0.0",")",";","}"]}]},exports["include/mirror.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFLECTIVE","||","TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"define",name:"REFL_BUMP",tokens:["0.1"]},{type:"textline",tokens:["float","jN","(","in","vec3","jH",",","in","vec3","jI",",","in","float","jJ",",","in","float","jK",")","{","float","jL",";","vec3","jM",";","jM","=","normalize","(","jI","+","jH",")",";","jL","=","1.0","-","dot","(","jH",",","jM",")",";","jL","=","jK","+","(","1.0","-","jK",")","*","pow","(","jL",",","jJ",")",";","return","jL",";","}","void","jZ","(","inout","vec3","jO",",","in","vec3","jP",",","in","vec3","jQ",",","in","float","jR",",","in","float","jS",",","in","float","jT",")","{","vec2","jU",",","jV",";","float","jW",";","vec3","jX",",","jY",";","jX","=","reflect","(","-","jP",",","jQ",")",";","jW","=","1.0",";","if","(","jR","!=","0.0",")","jW","=","jN","(","jP",",","jX",",","jR",",","jS",")",";"]},{type:"condition",parts:[{type:"if",expression:["REFLECTIVE"],group:{type:"group",parts:[{type:"textline",tokens:["jY","=","u_refl_plane",".","xyz","*","dot","(","jQ",",","u_refl_plane",".","xyz",")",";","jY","=","jQ","-","jY",";","jU","=","(","u_view_matrix_frag","*","vec4","(","jY",",","0.0",")",")",".","xy",";","jV","=","cI",".","xy","/","cI",".","z",";","jV","+=","jU","*","REFL_BUMP",";","jY","=","texture2D","(","u_reflectmap",",","jV",")",".","rgb",";","fV","(","jY",".","rgb",")",";","jO","=","mix","(","jO",",","jY",",","jT","*","jW",")",";"]}]}},{type:"elif",expression:["TEXTURE_MIRROR"],group:{type:"group",parts:[{type:"textline",tokens:["jY","=","textureCube","(","u_mirrormap",",","jX",")",".","xyz",";","fV","(","jY",".","rgb",")",";","jO","=","mix","(","jO",",","jY",",","u_mirror_factor","*","jW",")",";"]}]}}]},{type:"textline",tokens:["}"]}]}}]}]},exports["include/refraction.glslf"] = {type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["REFRACTIVE"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["float","ke","(","in","float","j_",",","inout","vec2","ka",",","in","vec2","kb",")","{","float","kc",";","vec4","kd",";","kd","=","texture2D","(","u_scene_depth",",","ka",")",";","kc","=","cu","(","kd",")",";","if","(","kc","<","jG",")","{","ka","=","kb",";","return","j_",";","}","else","{","return","kc",";","}","return","j_",";","}"]}]}}]},{type:"textline",tokens:["vec3","km","(","in","vec3","kf",",","in","vec2","kg",")","{","vec3","kh",";","float","ki",";","vec4","kj",";","vec2","kk",",","kl",";","kk","=","kf",".","xy","/","kf",".","z",";","kl","=","kk","+","kg",";"]},{type:"condition",parts:[{type:"if",expression:["USE_REFRACTION_CORRECTION"],group:{type:"group",parts:[{type:"textline",tokens:["kj","=","texture2DProj","(","u_scene_depth",",","kf",")",";","ki","=","cu","(","kj",")",";","ke","(","ki",",","kl",",","kk",")",";"]}]}}]},{type:"textline",tokens:["kh","=","texture2D","(","u_refractmap",",","kl",")",".","rgb",";","fV","(","kh",")",";","return","kh",";","}"]}]}}]}]},exports["include/environment.glslf"] = {type:"group",parts:[{type:"textline",tokens:["vec3","kp","(","float","kn",",","vec3","ko",")","{"]},{type:"condition",parts:[{type:"if",expression:["USE_ENVIRONMENT_LIGHT"],group:{type:"group",parts:[{type:"condition",parts:[{type:"if",expression:["SKY_TEXTURE"],group:{type:"group",parts:[{type:"textline",tokens:["return","textureCube","(","u_sky_texture",",","ko",")",".","rgb",";"]}]}},{type:"elif",expression:["SKY_COLOR"],group:{type:"group",parts:[{type:"textline",tokens:["return","mix","(","u_horizon_color",",","u_zenith_color",",","kn",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","1.0",")",";"]}]}}]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["return","vec3","(","0.0",")",";"]}]}}]},{type:"textline",tokens:["}"]}]},exports["include/particles.glslv"] = {type:"group",parts:[{type:"var",name:"EPSILON",tokens:["0.0001"]},{type:"textline",tokens:["struct","kT","{","float","a",";","vec3","b",";","float","c",";","vec3","d",";","float","e",";","}",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","kZ","(","inout","float","kU",",","float","kV",",","vec2","kW",",","vec2","kX",")","{","float","kY",";","kY","=","kX",".","x","-","kW",".","x",";","kY","=","(","kV","-","kW",".","x",")","/","kY",";","kU","=","mix","(","kU",",","kX",".","y",",","clamp","(","kY",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["void","le","(","inout","vec3","k_",",","float","la",",","vec4","lb",",","vec4","lc",")","{","float","ld",";","ld","=","lc",".","x","-","lb",".","x",";","ld","=","(","la","-","lb",".","x",")","/","ld",";","k_","=","mix","(","k_",",","lc",".","yzw",",","clamp","(","ld",",","0.0",",","1.0",")",")",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["float","lk","(","float","lf",",","float","lg",",","vec2","lh","[","SIZE_RAMP_LENGTH","]",")","{","float","li",",","lj",";","li","=","lf","/","lg",";","lj","=","lh","[","0","]",".","y",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","(","lj",",","li",",","lh","[","0","]",",","lh","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","(","lj",",","li",",","lh","[","1","]",",","lh","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["kZ","(","lj",",","li",",","lh","[","2","]",",","lh","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","lj",";","}"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["vec3","lq","(","float","ll",",","float","lm",",","vec4","ln","[","COLOR_RAMP_LENGTH","]",")","{","vec3","lo",";","float","lp",";","lp","=","ll","/","lm",";","lo","=","ln","[","0","]",".","yzw",";"]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","1"],group:{type:"group",parts:[{type:"textline",tokens:["le","(","lo",",","lp",",","ln","[","0","]",",","ln","[","1","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","2"],group:{type:"group",parts:[{type:"textline",tokens:["le","(","lo",",","lp",",","ln","[","1","]",",","ln","[","2","]",")",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","3"],group:{type:"group",parts:[{type:"textline",tokens:["le","(","lo",",","lp",",","ln","[","2","]",",","ln","[","3","]",")",";"]}]}}]},{type:"textline",tokens:["return","lo",";","}"]}]}}]},{type:"textline",tokens:["float","ly","(","float","lr",",","float","ls",",","float","lt",",","float","lu",")","{","float","lv",",","lw",",","lx",";","lv","=","max","(","0.01",",","min","(","ls",",","lt",")",")",";","lw","=","max","(","0.01",",","min","(","ls",",","lu",")",")",";","lx","=","ls","-","lw",";","lv","=","clamp","(","lr","/","lv",",","0.0",",","1.0",")","-","step","(","lx",",","lr",")","*","(","lr","-","lx",")","/","lw",";","return","lv",";","}","kT","lE","(",")","{","vec3","lz",",","lA",";","float","lB",",","lC",";","kT","lD",";","if","(","u_p_cyclic","==","1",")","{","lB","=","mod","(","u_p_time",",","u_p_length",")","-","a_p_delay",";","if","(","lB","<","0.0",")","lB","+=","u_p_length",";","}","if","(","u_p_cyclic","!=","1",")","{","lB","=","u_p_time","-","a_p_delay",";","}","if","(","lB","<","0.0","||","lB",">=","a_p_lifetime",")","{","lD",".","a","=","0.0001",";","lD",".","b","=","vec3","(","99999.0",",","0.0",",","0.0",")",";","}","if","(","!","(","lB","<","0.0","||","lB",">=","a_p_lifetime",")",")","{"]},{type:"condition",parts:[{type:"if",expression:["WORLD_SPACE"],group:{type:"group",parts:[{type:"textline",tokens:["lz","=","a_position",";","lA","=","a_normal",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lz","=","(","u_model_matrix","*","vec4","(","a_position",",","1.0",")",")",".","xyz",";","lA","=","(","u_model_matrix","*","vec4","(","a_normal",",","0.0",")",")",".","xyz",";"]}]}}]},{type:"textline",tokens:["lz","+=","u_p_nfactor","*","lB","*","lA",";","lz","+=","a_p_vels",".","xyz","*","lB",";","lz",".","y","-=","u_p_gravity","*","lB","*","lB","/","2.0",";","lC","=","max","(","u_p_mass",",","EPSILON",")",";","lz","+=","(","u_p_wind","/","lC",")","*","lB","*","lB","/","2.0",";","lD",".","b","=","lz",";","lD",".","e","=","a_p_vels",".","w","*","lB",";"]},{type:"condition",parts:[{type:"if",expression:["SIZE_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lD",".","a","=","lk","(","lB",",","u_p_max_lifetime",",","u_p_size_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lD",".","a","=","1.0",";"]}]}}]},{type:"condition",parts:[{type:"if",expression:["COLOR_RAMP_LENGTH",">","0"],group:{type:"group",parts:[{type:"textline",tokens:["lD",".","d","=","lq","(","lB",",","u_p_max_lifetime",",","u_p_color_ramp",")",";"]}]}},{type:"else",group:{type:"group",parts:[{type:"textline",tokens:["lD",".","d","=","vec3","(","1.0",")",";"]}]}}]},{type:"textline",tokens:["lD",".","c","=","ly","(","lB",",","a_p_lifetime",",","u_p_fade_in",",","u_p_fade_out",")",";","}","return","lD",";","}"]}]},exports["include/depth_fetch.glslf"] = {type:"group",parts:[{type:"textline",tokens:["float","lQ","(","in","sampler2D","lK",",","in","vec2","lL",",","in","vec2","lM",")","{","float","lN",",","lO",",","lP",";","lN","=","texture2D","(","lK",",","lL",")",".","r",";","lO","=","lM",".","x",";","lP","=","lM",".","y",";","lN","=","2.0","*","lO","/","(","lO","+","lP","-","(","2.0","*","lN","-","1.0",")","*","(","lP","-","lO",")",")",";","return","lN",";","}"]}]}}